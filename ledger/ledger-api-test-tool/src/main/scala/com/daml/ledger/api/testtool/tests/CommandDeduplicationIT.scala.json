[
  {
    "id" : "8626e334-90f2-42b9-9ba9-e72058b92faa",
    "prId" : 7294,
    "comments" : [
      {
        "id" : "6274b634-6c4e-4e52-a612-8f497215d2bb",
        "parentId" : null,
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Why did you remove the `final` qualifier? In which way would you like to extend this class?",
        "createdAt" : "2020-09-02T12:19:25Z",
        "updatedAt" : "2020-09-04T12:48:14Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "d5bbd1ee-f583-464a-ab58-3cc58f86ee14",
        "parentId" : "6274b634-6c4e-4e52-a612-8f497215d2bb",
        "author" : {
          "login" : "dasormeter",
          "name" : "Brian Healey",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/25179017?u=80e3160e2447461bd5847fe928a3e6fa9f6793fc&v=4"
        },
        "body" : "initially I did this because I was going to do a companion object but not needed now : will revert",
        "createdAt" : "2020-09-02T17:43:10Z",
        "updatedAt" : "2020-09-04T12:48:14Z",
        "lastEditedBy" : {
          "login" : "dasormeter",
          "name" : "Brian Healey",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/25179017?u=80e3160e2447461bd5847fe928a3e6fa9f6793fc&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "3c95e9e9-bcb9-4947-a0e7-c41e0c1b8cb2",
        "parentId" : "6274b634-6c4e-4e52-a612-8f497215d2bb",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "I'm not sure I understand. A `final` class can have a companion object.",
        "createdAt" : "2020-09-03T07:09:04Z",
        "updatedAt" : "2020-09-04T12:48:14Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "8ec3a3f3aa8d156744841bab938f5e26ddc6492d",
    "line" : null,
    "diffHunk" : "@@ -19,15 +19,17 @@ import scala.concurrent.Future\n import scala.concurrent.duration.DurationInt\n import scala.util.{Failure, Success}\n \n-final class CommandDeduplicationIT extends LedgerTestSuite {\n+class CommandDeduplicationIT(ledgerTimeIntervalMs: Int) extends LedgerTestSuite {"
  },
  {
    "id" : "ce6951ca-d854-45f6-9f76-a598707cfe48",
    "prId" : 7294,
    "comments" : [
      {
        "id" : "b42718d7-38a3-4581-9e26-af9bbc14fb2f",
        "parentId" : null,
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "I thought you already renamed these tests.",
        "createdAt" : "2020-09-02T12:19:45Z",
        "updatedAt" : "2020-09-04T12:48:14Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "5a1e5452-897e-4071-858f-1b76feb45d68",
        "parentId" : "b42718d7-38a3-4581-9e26-af9bbc14fb2f",
        "author" : {
          "login" : "dasormeter",
          "name" : "Brian Healey",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/25179017?u=80e3160e2447461bd5847fe928a3e6fa9f6793fc&v=4"
        },
        "body" : "will rebase",
        "createdAt" : "2020-09-02T17:42:51Z",
        "updatedAt" : "2020-09-04T12:48:14Z",
        "lastEditedBy" : {
          "login" : "dasormeter",
          "name" : "Brian Healey",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/25179017?u=80e3160e2447461bd5847fe928a3e6fa9f6793fc&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "8ec3a3f3aa8d156744841bab938f5e26ddc6492d",
    "line" : 20,
    "diffHunk" : "@@ -19,15 +19,17 @@ import scala.concurrent.Future\n import scala.concurrent.duration.DurationInt\n import scala.util.{Failure, Success}\n \n-final class CommandDeduplicationIT extends LedgerTestSuite {\n+class CommandDeduplicationIT(ledgerTimeIntervalMs: Int) extends LedgerTestSuite {\n+  private val timeInterval = ledgerTimeIntervalMs / 1000\n+  private val deduplicationSeconds = 1 * timeInterval\n+  private val deduplicationWindowWait = 2 * timeInterval\n \n   test(\n-    \"CDSimpleDeduplication\",\n+    \"CDSimpleDeduplicationBasic\","
  },
  {
    "id" : "0d0ba611-bb91-4215-875a-5cf21a904a44",
    "prId" : 7294,
    "comments" : [
      {
        "id" : "cb422999-441e-4c04-b9f6-abe35541942e",
        "parentId" : null,
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "```suggestion\r\n  private val deduplicationSeconds = ledgerTimeIntervalMs / 1000\r\n  private val deduplicationWindowWait = 2 * deduplicationSeconds\r\n```",
        "createdAt" : "2020-09-02T12:21:45Z",
        "updatedAt" : "2020-09-04T12:48:14Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "9ead4e5a-941c-44eb-ba51-ff0eb8fbe18a",
        "parentId" : "cb422999-441e-4c04-b9f6-abe35541942e",
        "author" : {
          "login" : "dasormeter",
          "name" : "Brian Healey",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/25179017?u=80e3160e2447461bd5847fe928a3e6fa9f6793fc&v=4"
        },
        "body" : "addressed",
        "createdAt" : "2020-09-03T14:42:27Z",
        "updatedAt" : "2020-09-04T12:48:14Z",
        "lastEditedBy" : {
          "login" : "dasormeter",
          "name" : "Brian Healey",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/25179017?u=80e3160e2447461bd5847fe928a3e6fa9f6793fc&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "8ec3a3f3aa8d156744841bab938f5e26ddc6492d",
    "line" : null,
    "diffHunk" : "@@ -19,15 +19,17 @@ import scala.concurrent.Future\n import scala.concurrent.duration.DurationInt\n import scala.util.{Failure, Success}\n \n-final class CommandDeduplicationIT extends LedgerTestSuite {\n+class CommandDeduplicationIT(ledgerTimeIntervalMs: Int) extends LedgerTestSuite {\n+  private val timeInterval = ledgerTimeIntervalMs / 1000\n+  private val deduplicationSeconds = 1 * timeInterval\n+  private val deduplicationWindowWait = 2 * timeInterval"
  },
  {
    "id" : "f959ea7d-e445-4354-8fad-1bf162248404",
    "prId" : 7294,
    "comments" : [
      {
        "id" : "36304e5d-b73e-4e1d-90c6-6ebbb7383722",
        "parentId" : null,
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Please use `Duration`.",
        "createdAt" : "2020-09-02T12:25:52Z",
        "updatedAt" : "2020-09-04T12:48:14Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "d59e6ad1-7fb6-499e-b4f7-b435a7a86f95",
        "parentId" : "36304e5d-b73e-4e1d-90c6-6ebbb7383722",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Still unadressed.",
        "createdAt" : "2020-09-03T07:32:16Z",
        "updatedAt" : "2020-09-04T12:48:14Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "776f1c07-31f0-438d-961f-c7f29d191531",
        "parentId" : "36304e5d-b73e-4e1d-90c6-6ebbb7383722",
        "author" : {
          "login" : "dasormeter",
          "name" : "Brian Healey",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/25179017?u=80e3160e2447461bd5847fe928a3e6fa9f6793fc&v=4"
        },
        "body" : "addressed in latest push now https://github.com/digital-asset/daml/pull/7294/commits/12064ba6e1ff7ca961da400072bf396bbf1b17da",
        "createdAt" : "2020-09-03T18:50:12Z",
        "updatedAt" : "2020-09-04T12:48:14Z",
        "lastEditedBy" : {
          "login" : "dasormeter",
          "name" : "Brian Healey",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/25179017?u=80e3160e2447461bd5847fe928a3e6fa9f6793fc&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "8ec3a3f3aa8d156744841bab938f5e26ddc6492d",
    "line" : null,
    "diffHunk" : "@@ -19,15 +19,17 @@ import scala.concurrent.Future\n import scala.concurrent.duration.DurationInt\n import scala.util.{Failure, Success}\n \n-final class CommandDeduplicationIT extends LedgerTestSuite {\n+class CommandDeduplicationIT(ledgerTimeIntervalMs: Int) extends LedgerTestSuite {"
  },
  {
    "id" : "de809dfd-eed0-401a-bb6e-21a8bd047c95",
    "prId" : 7294,
    "comments" : [
      {
        "id" : "0f7ecd75-e4f0-4320-985e-b679b2b2ab0a",
        "parentId" : null,
        "author" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "body" : "The duration encapsulates the time unit.\r\n\r\n```suggestion\r\nfinal class CommandDeduplicationIT(ledgerTimeInterval: scala.concurrent.duration.Duration) extends LedgerTestSuite {\r\n```",
        "createdAt" : "2020-09-03T18:58:20Z",
        "updatedAt" : "2020-09-04T12:48:14Z",
        "lastEditedBy" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "17ca14d4-3ce4-421f-abd0-6c464fd203a2",
        "parentId" : "0f7ecd75-e4f0-4320-985e-b679b2b2ab0a",
        "author" : {
          "login" : "dasormeter",
          "name" : "Brian Healey",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/25179017?u=80e3160e2447461bd5847fe928a3e6fa9f6793fc&v=4"
        },
        "body" : "addressed",
        "createdAt" : "2020-09-03T20:36:54Z",
        "updatedAt" : "2020-09-04T12:48:14Z",
        "lastEditedBy" : {
          "login" : "dasormeter",
          "name" : "Brian Healey",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/25179017?u=80e3160e2447461bd5847fe928a3e6fa9f6793fc&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "8ec3a3f3aa8d156744841bab938f5e26ddc6492d",
    "line" : null,
    "diffHunk" : "@@ -12,23 +12,22 @@ import com.daml.ledger.test.model.DA.Types.Tuple2\n import com.daml.ledger.test.model.Test.TextKeyOperations._\n import com.daml.ledger.test.model.Test._\n import com.daml.timer.Delayed\n-import com.google.protobuf.duration.Duration\n import io.grpc.Status\n \n import scala.concurrent.Future\n-import scala.concurrent.duration.DurationInt\n import scala.util.{Failure, Success}\n \n-final class CommandDeduplicationIT extends LedgerTestSuite {\n+final class CommandDeduplicationIT(ledgerTimeIntervalMs: scala.concurrent.duration.Duration) extends LedgerTestSuite {"
  },
  {
    "id" : "77dc382c-0ee8-440c-aa2a-15470cf8deae",
    "prId" : 7294,
    "comments" : [
      {
        "id" : "2fc0691a-65d9-4623-8332-7602449bf9f5",
        "parentId" : null,
        "author" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "body" : "Perhaps consider importing `scala.concurrent.duration.Duration` as `ScalaDuration` and `com.google.protobuf.duration.Duration` as `ProtobufDuration` to make things easier to read.",
        "createdAt" : "2020-09-03T19:00:08Z",
        "updatedAt" : "2020-09-04T12:48:14Z",
        "lastEditedBy" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "60345c71-cd4c-42a5-b236-2c8f01c272ef",
        "parentId" : "2fc0691a-65d9-4623-8332-7602449bf9f5",
        "author" : {
          "login" : "dasormeter",
          "name" : "Brian Healey",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/25179017?u=80e3160e2447461bd5847fe928a3e6fa9f6793fc&v=4"
        },
        "body" : "addressed",
        "createdAt" : "2020-09-03T20:37:06Z",
        "updatedAt" : "2020-09-04T12:48:14Z",
        "lastEditedBy" : {
          "login" : "dasormeter",
          "name" : "Brian Healey",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/25179017?u=80e3160e2447461bd5847fe928a3e6fa9f6793fc&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "8ec3a3f3aa8d156744841bab938f5e26ddc6492d",
    "line" : null,
    "diffHunk" : "@@ -12,23 +12,22 @@ import com.daml.ledger.test.model.DA.Types.Tuple2\n import com.daml.ledger.test.model.Test.TextKeyOperations._\n import com.daml.ledger.test.model.Test._\n import com.daml.timer.Delayed\n-import com.google.protobuf.duration.Duration\n import io.grpc.Status\n \n import scala.concurrent.Future\n-import scala.concurrent.duration.DurationInt\n import scala.util.{Failure, Success}\n \n-final class CommandDeduplicationIT extends LedgerTestSuite {\n+final class CommandDeduplicationIT(ledgerTimeIntervalMs: scala.concurrent.duration.Duration) extends LedgerTestSuite {"
  },
  {
    "id" : "da433e4e-4670-41d3-b8ea-cb4ba1020470",
    "prId" : 6499,
    "comments" : [
      {
        "id" : "67590adb-a6f0-4a2c-afea-84e48553f7e5",
        "parentId" : null,
        "author" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "body" : "I like it that you now relying on the properly prefixed commandIds. Could you also do the same to the last remaining test that doesn't do it in `CDStopOnCompletionFailure`?",
        "createdAt" : "2020-06-30T07:06:24Z",
        "updatedAt" : "2020-06-30T07:35:56Z",
        "lastEditedBy" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "93e98bc4-32f1-4239-a675-32cabd2ef0c5",
        "parentId" : "67590adb-a6f0-4a2c-afea-84e48553f7e5",
        "author" : {
          "login" : "rautenrieth-da",
          "name" : "Robert Autenrieth",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/31539813?u=e5fe17e2c6f986e9ee04c5b9ca5f6a5a90d1c94a&v=4"
        },
        "body" : "I have removed the last remaining random command ID.",
        "createdAt" : "2020-06-30T07:36:27Z",
        "updatedAt" : "2020-06-30T07:36:27Z",
        "lastEditedBy" : {
          "login" : "rautenrieth-da",
          "name" : "Robert Autenrieth",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/31539813?u=e5fe17e2c6f986e9ee04c5b9ca5f6a5a90d1c94a&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "35f8149dd7d34e03385cf85054c55f9251427c5f",
    "line" : 21,
    "diffHunk" : "@@ -37,42 +37,63 @@ final class CommandDeduplicationIT extends LedgerTestSuite {\n     case Participants(Participant(ledger, party)) =>\n       val deduplicationSeconds = 5\n       val deduplicationTime = Duration.of(deduplicationSeconds.toLong, 0)\n-      val a = UUID.randomUUID.toString\n-      val b = UUID.randomUUID.toString\n-      val requestA = ledger\n-        .submitRequest(party, Dummy(party).create.command)\n+      val requestA1 = ledger\n+        .submitRequest(party, DummyWithAnnotation(party, \"First submission\").create.command)\n         .update(\n           _.commands.deduplicationTime := deduplicationTime,\n-          _.commands.commandId := a,"
  }
]