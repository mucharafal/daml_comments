[
  {
    "id" : "ce79b34a-07ec-4362-9d9c-cbf9d00efc38",
    "prId" : 3359,
    "comments" : [
      {
        "id" : "a970e224-d89f-41d4-a101-42ee5468954f",
        "parentId" : null,
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "I'm starting to think that this class does a little too much.",
        "createdAt" : "2019-11-06T14:24:06Z",
        "updatedAt" : "2019-11-07T14:26:30Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "461ec6a2-471f-483f-a70b-94609b85cce4",
        "parentId" : "a970e224-d89f-41d4-a101-42ee5468954f",
        "author" : {
          "login" : "gerolf-da",
          "name" : "Gerolf Seitz",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/29121423?u=f683aa614e742c653ae8c01b194905dcdef6e974&v=4"
        },
        "body" : "Is the purpose of this to not have to compile packages twice?",
        "createdAt" : "2019-11-06T18:09:47Z",
        "updatedAt" : "2019-11-07T14:26:30Z",
        "lastEditedBy" : {
          "login" : "gerolf-da",
          "name" : "Gerolf Seitz",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/29121423?u=f683aa614e742c653ae8c01b194905dcdef6e974&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "4e186dc0-669f-4815-9ac4-dc483764f891",
        "parentId" : "a970e224-d89f-41d4-a101-42ee5468954f",
        "author" : {
          "login" : "oliverse-da",
          "name" : "Oliver Seeliger",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/46452754?u=dd1d8e09760abe67b40a4e527a15aafe9d104d82&v=4"
        },
        "body" : "@gerolf-da , yes indeed",
        "createdAt" : "2019-11-07T07:53:49Z",
        "updatedAt" : "2019-11-07T14:26:30Z",
        "lastEditedBy" : {
          "login" : "oliverse-da",
          "name" : "Oliver Seeliger",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/46452754?u=dd1d8e09760abe67b40a4e527a15aafe9d104d82&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "57b56f34c1c450872c0e56b48c140c1fe8a5ccab",
    "line" : 21,
    "diffHunk" : "@@ -38,38 +39,21 @@ object StandaloneIndexServer {\n       readService: ReadService,\n       writeService: WriteService,\n       authService: AuthService,\n-      loggerFactory: NamedLoggerFactory): StandaloneIndexServer =\n+      loggerFactory: NamedLoggerFactory,\n+      engine: Engine = engineSharedAmongIndexServers, // allows sharing DAML engine with DAML-on-X participant"
  },
  {
    "id" : "dede410d-a60c-4467-bdae-4ec5b5d1ad8c",
    "prId" : 2717,
    "comments" : [
      {
        "id" : "bba5aa94-935d-49e3-9e32-2dfef750e744",
        "parentId" : null,
        "author" : {
          "login" : "gerolf-da",
          "name" : "Gerolf Seitz",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/29121423?u=f683aa614e742c653ae8c01b194905dcdef6e974&v=4"
        },
        "body" : "We shouldn't assert that the user-provided `participantId` string is a valid `LedgerString`.",
        "createdAt" : "2019-09-02T08:00:25Z",
        "updatedAt" : "2019-09-02T09:57:05Z",
        "lastEditedBy" : {
          "login" : "gerolf-da",
          "name" : "Gerolf Seitz",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/29121423?u=f683aa614e742c653ae8c01b194905dcdef6e974&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "9e4c28846d5c0b7684d2f68a70323dbd421c628c",
    "line" : null,
    "diffHunk" : "@@ -80,8 +80,7 @@ class StandaloneIndexServer(\n     writeService: WriteService) {\n \n   // Name of this participant,\n-  // TODO: Pass this info in command-line (See issue #2025)\n-  val participantId: ParticipantId = Ref.LedgerString.assertFromString(\"postgress-participant\")\n+  val participantId: ParticipantId = Ref.LedgerString.assertFromString(config.participantId)"
  },
  {
    "id" : "d229cbea-8da5-4251-bd21-6f7ae46da2da",
    "prId" : 2091,
    "comments" : [
      {
        "id" : "6fef6909-728c-4b05-acb7-f6365a19f82c",
        "parentId" : null,
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "It looks like the previous logic was to set `Instant.now` as the `knownSince` time. It probably makes sense to keep it as is.",
        "createdAt" : "2019-07-12T09:44:35Z",
        "updatedAt" : "2019-07-12T11:08:32Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "ff43bae0-68db-4f55-9ead-d1dedb51c9f7",
        "parentId" : "6fef6909-728c-4b05-acb7-f6365a19f82c",
        "author" : {
          "login" : "rautenrieth-da",
          "name" : "Robert Autenrieth",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/31539813?u=e5fe17e2c6f986e9ee04c5b9ca5f6a5a90d1c94a&v=4"
        },
        "body" : "Interesting. The sandbox application always used `EPOCH` (see https://github.com/digital-asset/daml/pull/2091/files#diff-9ee24205d1c2b37348e86cc67c097e36L173), while the standalone index server used `Instant.now` before.\r\n\r\nWhy do we need to load any packages at all here? The read service contains ledger entries for package uploads, the package store should be updated from these entries.\r\n\r\nIf the initial packages are somehow packages that the ledger needs, but does not expose through the read service, then these should be uploaded at `EPOCH`, to make sure they predate any other ledger entries.",
        "createdAt" : "2019-07-12T10:17:39Z",
        "updatedAt" : "2019-07-12T11:08:32Z",
        "lastEditedBy" : {
          "login" : "rautenrieth-da",
          "name" : "Robert Autenrieth",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/31539813?u=e5fe17e2c6f986e9ee04c5b9ca5f6a5a90d1c94a&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "a2730c3d-1e15-4708-9979-8b9a02d7db06",
        "parentId" : "6fef6909-728c-4b05-acb7-f6365a19f82c",
        "author" : {
          "login" : "gabor-aranyossy",
          "name" : "Gabor Aranyossy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/29858875?u=03b5eca13ed32e74056ee216f2def12e249bcfed&v=4"
        },
        "body" : "it might be just a temporary solution. Let me change it to `Instant.now` so we can merge this.",
        "createdAt" : "2019-07-12T11:07:50Z",
        "updatedAt" : "2019-07-12T11:08:32Z",
        "lastEditedBy" : {
          "login" : "gabor-aranyossy",
          "name" : "Gabor Aranyossy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/29858875?u=03b5eca13ed32e74056ee216f2def12e249bcfed&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "5d5ca6719a14cdc9991e9790da4ba5e4ce90c25c",
    "line" : 14,
    "diffHunk" : "@@ -119,16 +119,23 @@ class StandaloneIndexServer(\n     }\n   }\n \n+  private def loadDamlPackages(): InMemoryPackageStore = {\n+    // TODO is it sensible to have all the initial packages to be known since the epoch?"
  },
  {
    "id" : "c4ae73e3-8e26-4edd-959a-ff7b46db7e98",
    "prId" : 1985,
    "comments" : [
      {
        "id" : "1bb04729-a6f9-4a70-8dea-edbba78a13f8",
        "parentId" : null,
        "author" : {
          "login" : "gerolf-da",
          "name" : "Gerolf Seitz",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/29121423?u=f683aa614e742c653ae8c01b194905dcdef6e974&v=4"
        },
        "body" : "At this point it is only a small change away from actually putting it into `com.digitalasset.platform.index.config.Config`.\r\nIf you don't want to do that in this PR, then please\r\n1) rename it to `postgres-participant` or something like that (In-Memory is just factually wrong),\r\n2) create a github issue for this TODO and reference the issue here in a code comment.",
        "createdAt" : "2019-07-05T11:17:45Z",
        "updatedAt" : "2019-07-05T14:48:28Z",
        "lastEditedBy" : {
          "login" : "gerolf-da",
          "name" : "Gerolf Seitz",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/29121423?u=f683aa614e742c653ae8c01b194905dcdef6e974&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "8827ba61-2d81-462d-95a9-0192a7f6bd31",
        "parentId" : "1bb04729-a6f9-4a70-8dea-edbba78a13f8",
        "author" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "body" : "Done, Issue #2025",
        "createdAt" : "2019-07-05T14:37:35Z",
        "updatedAt" : "2019-07-05T14:48:28Z",
        "lastEditedBy" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "a76d1f28b41fc02600441b5d40c9b25038667c33",
    "line" : null,
    "diffHunk" : "@@ -79,6 +80,9 @@ class StandaloneIndexServer(\n     readService: ReadService,\n     writeService: WriteService) {\n \n+  // Name of this participant, ultimately pass this info in command-line\n+  val participantId: ParticipantId = Ref.LedgerString.assertFromString(\"in-memory-participant\")"
  }
]