[
  {
    "id" : "de8bdc2b-a12c-461f-96e6-45f3afc4a6bc",
    "prId" : 959,
    "comments" : [
      {
        "id" : "3b385fa7-22ce-44a4-a790-f58e277f1b1d",
        "parentId" : null,
        "author" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "body" : "I suggest you \"group\" the migration with minor number. that is using\r\n\r\n- `V2_0__Contract_divulgence.sha256` \r\n\r\n- `V2_1__Rebuild_Acs` \r\n",
        "createdAt" : "2019-05-13T09:36:39Z",
        "updatedAt" : "2019-05-15T16:27:45Z",
        "lastEditedBy" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "c080d93c-05f8-4418-b93c-8d0a831f8258",
        "parentId" : "3b385fa7-22ce-44a4-a790-f58e277f1b1d",
        "author" : {
          "login" : "rautenrieth-da",
          "name" : "Robert Autenrieth",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/31539813?u=e5fe17e2c6f986e9ee04c5b9ca5f6a5a90d1c94a&v=4"
        },
        "body" : "Done.",
        "createdAt" : "2019-05-15T13:45:27Z",
        "updatedAt" : "2019-05-15T16:27:45Z",
        "lastEditedBy" : {
          "login" : "rautenrieth-da",
          "name" : "Robert Autenrieth",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/31539813?u=e5fe17e2c6f986e9ee04c5b9ca5f6a5a90d1c94a&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "a8892eec-fc8e-4818-9053-e3ff42d70eab",
        "parentId" : "3b385fa7-22ce-44a4-a790-f58e277f1b1d",
        "author" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "body" : ":+1: ",
        "createdAt" : "2019-05-15T13:57:54Z",
        "updatedAt" : "2019-05-15T16:27:45Z",
        "lastEditedBy" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "e4dc5b75fb95575adb8e21bb2ae04bcccdc97acf",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,760 @@\n+// Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+// Note: package name must correspond exactly to the flyway 'locations' setting, which defaults to 'db.migration'\n+package db.migration\n+\n+import java.io.InputStream\n+import java.sql.Connection\n+import java.util.Date\n+\n+import akka.stream.scaladsl.Source\n+import akka.NotUsed\n+import anorm.SqlParser.{str, _}\n+import anorm.{BatchSql, Macro, NamedParameter, RowParser, SQL, SqlParser}\n+import com.digitalasset.daml.lf.data.Ref\n+import com.digitalasset.daml.lf.data.Relation.Relation\n+import com.digitalasset.daml.lf.engine.Blinding\n+import com.digitalasset.daml.lf.transaction.Transaction\n+import com.digitalasset.daml.lf.transaction.Node.{GlobalKey, KeyWithMaintainers}\n+import com.digitalasset.daml.lf.value.Value.{AbsoluteContractId, ContractId}\n+import com.digitalasset.ledger.backend.api.v1.RejectionReason\n+import com.digitalasset.ledger.backend.api.v1.RejectionReason._\n+import com.digitalasset.platform.sandbox.services.transaction.SandboxEventIdFormatter\n+import com.digitalasset.platform.sandbox.stores._\n+import com.digitalasset.platform.sandbox.stores.ledger.LedgerEntry\n+import com.digitalasset.platform.sandbox.stores.ledger.sql.dao.Contract\n+import com.digitalasset.platform.sandbox.stores.ledger.sql.serialisation.{\n+  ContractSerializer,\n+  KeyHasher,\n+  TransactionSerializer,\n+  ValueSerializer\n+}\n+import com.google.common.io.ByteStreams\n+import org.flywaydb.core.api.migration.{BaseJavaMigration, Context}\n+import org.slf4j.LoggerFactory\n+\n+import scala.collection.immutable\n+\n+/**\n+  * V1 was missing divulgence info\n+  * V2 adds corresponding new tables\n+  * V3 fills the new tables\n+  */\n+class V3__Rebuild_Acs extends BaseJavaMigration {"
  }
]