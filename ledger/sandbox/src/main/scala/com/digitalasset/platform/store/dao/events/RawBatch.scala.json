[
  {
    "id" : "9904bcba-2878-4627-9105-9a6aaf07b736",
    "prId" : 6372,
    "comments" : [
      {
        "id" : "af9e9ccf-0522-4eb7-a1df-248b2e860271",
        "parentId" : null,
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Doesn't `None` work?",
        "createdAt" : "2020-07-07T07:03:49Z",
        "updatedAt" : "2020-07-07T20:49:51Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "c715c055-db73-4ded-8031-5a215d42ded2",
        "parentId" : "af9e9ccf-0522-4eb7-a1df-248b2e860271",
        "author" : {
          "login" : "gerolf-da",
          "name" : "Gerolf Seitz",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/29121423?u=f683aa614e742c653ae8c01b194905dcdef6e974&v=4"
        },
        "body" : "Yeah, I think passing `None` or `Option.empty[Array[String]]` should work as expected, i.e. the column is set to null.",
        "createdAt" : "2020-07-07T08:30:09Z",
        "updatedAt" : "2020-07-07T20:49:51Z",
        "lastEditedBy" : {
          "login" : "gerolf-da",
          "name" : "Gerolf Seitz",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/29121423?u=f683aa614e742c653ae8c01b194905dcdef6e974&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "9e1d357b-34ce-4a7e-b6c9-625e2a1dc7da",
        "parentId" : "af9e9ccf-0522-4eb7-a1df-248b2e860271",
        "author" : {
          "login" : "leo-da",
          "name" : "Leonid Shlyapnikov",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/27688859?u=375a6e2bd1079fec6f7d6d582ac05b5628218384&v=4"
        },
        "body" : "`Option.empty[A]` works, `None` doesn't. Thanks!",
        "createdAt" : "2020-07-07T13:24:45Z",
        "updatedAt" : "2020-07-07T20:49:51Z",
        "lastEditedBy" : {
          "login" : "leo-da",
          "name" : "Leonid Shlyapnikov",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/27688859?u=375a6e2bd1079fec6f7d6d582ac05b5628218384&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "a4ac22ba1dbfc5a1f114a75812abec7b87d0eb34",
    "line" : null,
    "diffHunk" : "@@ -108,7 +109,15 @@ private[events] object RawBatch {\n           \"create_signatories\" -> create.signatories.toArray[String],\n           \"create_observers\" -> create.stakeholders.diff(create.signatories).toArray[String],\n           \"create_agreement_text\" -> Some(create.coinst.agreementText).filter(_.nonEmpty),\n+          // set exercise event columns to NULL\n+          \"exercise_consuming\" -> nullParamValue[Boolean],\n+          \"exercise_choice\" -> nullParamValue[String],\n+          \"exercise_argument\" -> nullParamValue[Array[Byte]],\n+          \"exercise_result\" -> nullParamValue[Array[Byte]],\n+          \"exercise_actors\" -> nullParamValue[Array[String]],\n+          \"exercise_child_event_ids\" -> nullParamValue[Array[String]],"
  },
  {
    "id" : "2f4bfe25-2fc6-4ab8-89e4-011585e1c34c",
    "prId" : 6372,
    "comments" : [
      {
        "id" : "6c9dec48-fe0b-4cc1-be58-03c9324946d1",
        "parentId" : null,
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Doesn't `None` work?",
        "createdAt" : "2020-07-07T07:04:09Z",
        "updatedAt" : "2020-07-07T20:49:51Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "717c7b36-7ef6-4b56-97a4-c4ad3e08e64f",
        "parentId" : "6c9dec48-fe0b-4cc1-be58-03c9324946d1",
        "author" : {
          "login" : "leo-da",
          "name" : "Leonid Shlyapnikov",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/27688859?u=375a6e2bd1079fec6f7d6d582ac05b5628218384&v=4"
        },
        "body" : "`None` does not work, it needs a type in order to set column to null:\r\n```\r\ns.setNull(index, jdbcType)\r\n```",
        "createdAt" : "2020-07-07T13:34:09Z",
        "updatedAt" : "2020-07-07T20:49:51Z",
        "lastEditedBy" : {
          "login" : "leo-da",
          "name" : "Leonid Shlyapnikov",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/27688859?u=375a6e2bd1079fec6f7d6d582ac05b5628218384&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "a4ac22ba1dbfc5a1f114a75812abec7b87d0eb34",
    "line" : null,
    "diffHunk" : "@@ -127,6 +136,12 @@ private[events] object RawBatch {\n           \"exercise_consuming\" -> exercise.consuming,\n           \"exercise_choice\" -> exercise.choiceId,\n           \"exercise_actors\" -> exercise.actingParties.toArray[String],\n+          // set create event columns to NULL\n+          \"create_argument\" -> nullParamValue[Array[Byte]],\n+          \"create_signatories\" -> nullParamValue[Array[String]],\n+          \"create_observers\" -> nullParamValue[Array[String]],\n+          \"create_agreement_text\" -> nullParamValue[String],\n+          \"create_key_value\" -> nullParamValue[Array[Byte]],"
  },
  {
    "id" : "b1162242-1c29-4ed7-898a-3e43b94754a1",
    "prId" : 6372,
    "comments" : [
      {
        "id" : "6dffbfe0-41a2-476b-b8a6-8e3117cc45d3",
        "parentId" : null,
        "author" : {
          "login" : "gerolf-da",
          "name" : "Gerolf Seitz",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/29121423?u=f683aa614e742c653ae8c01b194905dcdef6e974&v=4"
        },
        "body" : "This shouldn't be necessary. Try using `Option.empty[A]` instead, where `A` is the respective type of the column.",
        "createdAt" : "2020-07-07T08:32:57Z",
        "updatedAt" : "2020-07-07T20:49:51Z",
        "lastEditedBy" : {
          "login" : "gerolf-da",
          "name" : "Gerolf Seitz",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/29121423?u=f683aa614e742c653ae8c01b194905dcdef6e974&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "1d712a3f-ab21-4434-959f-94d3eeee928a",
        "parentId" : "6dffbfe0-41a2-476b-b8a6-8e3117cc45d3",
        "author" : {
          "login" : "S11001001",
          "name" : "Stephen Compall",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/219186?u=7b27ed58a578fe7d4983d1bab28c2f5608ed8739&v=4"
        },
        "body" : "Scalaz also has nice aliases for this, `none[A]` and `some(x)`, `import scalaz.std.option._` to get them. üè† üñåÔ∏è ",
        "createdAt" : "2020-07-07T20:47:55Z",
        "updatedAt" : "2020-07-07T20:49:51Z",
        "lastEditedBy" : {
          "login" : "S11001001",
          "name" : "Stephen Compall",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/219186?u=7b27ed58a578fe7d4983d1bab28c2f5608ed8739&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "07ae7ace-78f7-40f0-bea1-9c44acfec7b5",
        "parentId" : "6dffbfe0-41a2-476b-b8a6-8e3117cc45d3",
        "author" : {
          "login" : "leo-da",
          "name" : "Leonid Shlyapnikov",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/27688859?u=375a6e2bd1079fec6f7d6d582ac05b5628218384&v=4"
        },
        "body" : "Cannot keep everyone happy :).. had to remove a few scalaz functions and replace them with `stdlib` ones.",
        "createdAt" : "2020-07-08T00:02:40Z",
        "updatedAt" : "2020-07-08T00:02:40Z",
        "lastEditedBy" : {
          "login" : "leo-da",
          "name" : "Leonid Shlyapnikov",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/27688859?u=375a6e2bd1079fec6f7d6d582ac05b5628218384&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "a4ac22ba1dbfc5a1f114a75812abec7b87d0eb34",
    "line" : null,
    "diffHunk" : "@@ -140,4 +155,23 @@ private[events] object RawBatch {\n \n   }\n \n+  private implicit lazy val stringArrayParameterMetadata: anorm.ParameterMetaData[Array[String]] =\n+    new anorm.ParameterMetaData[Array[String]] {\n+      override def sqlType: String = \"ARRAY\"\n+\n+      override def jdbcType: Int = java.sql.Types.ARRAY\n+    }\n+\n+  private val dummy = new java.lang.Object();\n+\n+  private def nullParamValue[A: anorm.ParameterMetaData] ="
  }
]