[
  {
    "id" : "52942480-d8ac-4e76-8e4c-cd5aa1b0f0a4",
    "prId" : 6382,
    "comments" : [
      {
        "id" : "a8dd0c73-9778-4f6d-9ded-89daa52a16f1",
        "parentId" : null,
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "H2 does not need to have data migrations.",
        "createdAt" : "2020-06-18T13:22:08Z",
        "updatedAt" : "2020-06-19T09:18:12Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "c41f060c-4733-4b2c-b639-4a2ad468285f",
        "parentId" : "a8dd0c73-9778-4f6d-9ded-89daa52a16f1",
        "author" : {
          "login" : "oliverse-da",
          "name" : "Oliver Seeliger",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/46452754?u=dd1d8e09760abe67b40a4e527a15aafe9d104d82&v=4"
        },
        "body" : "Ok, so to make sure we have a consistent table-schema between h2database and postgres, I am just setting the values to true via default value before removing the default value in a second `ALTER TABLE .. DROP DEFAULT` command.",
        "createdAt" : "2020-06-18T15:54:46Z",
        "updatedAt" : "2020-06-19T09:18:12Z",
        "lastEditedBy" : {
          "login" : "oliverse-da",
          "name" : "Oliver Seeliger",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/46452754?u=dd1d8e09760abe67b40a4e527a15aafe9d104d82&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "efb941f667b1ddcd27e8da8d7740f2ea79ba5a67",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,21 @@\n+-- Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+-- SPDX-License-Identifier: Apache-2.0\n+\n+---------------------------------------------------------------------------------------------------\n+-- V34: Add is_local column to parties table.\n+--\n+-- This allows parties to be marked as to whether they were added locally as determined by whether\n+-- the specified participant_id matched the local participant_id.\n+--\n+-- To initialize parties.is_local properly, rely on the existence of party_entries.is_local\n+-- default to parties.is_local = true only if party_entries were somehow manually deleted.\n+---------------------------------------------------------------------------------------------------\n+\n+ALTER TABLE parties ADD COLUMN is_local bool;\n+\n+UPDATE parties SET is_local = false\n+WHERE party IN (SELECT party FROM party_entries WHERE is_local = false);\n+\n+UPDATE parties SET is_local = true WHERE is_local IS NULL;\n+\n+ALTER TABLE parties ALTER COLUMN is_local SET NOT NULL;"
  }
]