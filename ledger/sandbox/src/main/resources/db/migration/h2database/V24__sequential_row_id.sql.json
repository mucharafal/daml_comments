[
  {
    "id" : "579e2116-4c07-4815-b2aa-f4467e93f07a",
    "prId" : 6372,
    "comments" : [
      {
        "id" : "2d2217da-d9c4-40e6-8037-e01d96e97527",
        "parentId" : null,
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "In order to not fall in the same trap as before, please name the indexes we create.",
        "createdAt" : "2020-07-01T09:44:32Z",
        "updatedAt" : "2020-07-07T20:49:51Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "50cff1e9-3ce7-4dcb-bff3-455bc384fbb7",
        "parentId" : "2d2217da-d9c4-40e6-8037-e01d96e97527",
        "author" : {
          "login" : "leo-da",
          "name" : "Leonid Shlyapnikov",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/27688859?u=375a6e2bd1079fec6f7d6d582ac05b5628218384&v=4"
        },
        "body" : "um.... it is named `participant_events_row_id`... what do you mean?",
        "createdAt" : "2020-07-07T13:14:42Z",
        "updatedAt" : "2020-07-07T20:49:51Z",
        "lastEditedBy" : {
          "login" : "leo-da",
          "name" : "Leonid Shlyapnikov",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/27688859?u=375a6e2bd1079fec6f7d6d582ac05b5628218384&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "a4ac22ba1dbfc5a1f114a75812abec7b87d0eb34",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,24 @@\n+-- Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+-- SPDX-License-Identifier: Apache-2.0\n+\n+---------------------------------------------------------------------------------------------------\n+-- V34: Add a sequential row_id to participant_events\n+--\n+---------------------------------------------------------------------------------------------------\n+\n+-- 1. add the column\n+alter table participant_events add column row_id bigint auto_increment;\n+\n+-- 2. fix the row_id to be sequential according to the order of (event_offset, transaction_id, node_index)\n+-- don't need to migrate H2 datasets\n+\n+-- 3. drop the now unused index\n+drop index INDEX_9;\n+\n+-- 4. create a new index involving row_id\n+create index participant_events_row_id"
  }
]