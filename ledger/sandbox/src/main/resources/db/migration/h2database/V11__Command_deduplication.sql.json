[
  {
    "id" : "3385403e-be5d-4594-82ba-bfeb486c87ef",
    "prId" : 4467,
    "comments" : [
      {
        "id" : "87e4a6c2-4206-4109-98fb-0187740872ac",
        "parentId" : null,
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Why is this nullable?",
        "createdAt" : "2020-02-11T10:02:50Z",
        "updatedAt" : "2020-02-26T09:55:05Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "a2ef979c-6190-47e6-9a98-9bb4f012be72",
        "parentId" : "87e4a6c2-4206-4109-98fb-0187740872ac",
        "author" : {
          "login" : "rautenrieth-da",
          "name" : "Robert Autenrieth",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/31539813?u=e5fe17e2c6f986e9ee04c5b9ca5f6a5a90d1c94a&v=4"
        },
        "body" : "`WriteService.submitTransaction` is async. While the submission is in progress, it is unknown whether it was successful.",
        "createdAt" : "2020-02-12T00:06:40Z",
        "updatedAt" : "2020-02-26T09:55:05Z",
        "lastEditedBy" : {
          "login" : "rautenrieth-da",
          "name" : "Robert Autenrieth",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/31539813?u=e5fe17e2c6f986e9ee04c5b9ca5f6a5a90d1c94a&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "81c3bb07cc3057b6358f8d09902331b1a80501bf",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,25 @@\n+-- Copyright (c) 2019 The DAML Authors. All rights reserved.\n+-- SPDX-License-Identifier: Apache-2.0\n+\n+---------------------------------------------------------------------------------------------------\n+-- V16: New command deduplication\n+--\n+-- Command deduplication has moved from ledger to participant\n+---------------------------------------------------------------------------------------------------\n+\n+\n+DROP INDEX idx_transactions_deduplication;\n+\n+\n+CREATE TABLE participant_commands(\n+  -- The deduplication key\n+  deduplication_key  varchar primary key   not null,\n+  -- The time the command was first submitted\n+  submitted_at       timestamptz           not null,\n+  -- The time the command will stop being deduplicated\n+  ttl                timestamptz           not null,\n+  -- If set, then the command was successfully submitted\n+  success            boolean,"
  },
  {
    "id" : "564efe8b-8d1d-4929-a84a-f7920cebdad3",
    "prId" : 4467,
    "comments" : [
      {
        "id" : "ba4d5fbd-f449-48dd-ad48-4384415b4f24",
        "parentId" : null,
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "FYI I'm using `status_code` and `status_message` for these columns.",
        "createdAt" : "2020-02-25T10:48:34Z",
        "updatedAt" : "2020-02-26T09:55:05Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "54254de5-75e1-48c0-a918-eee9d33c5a33",
        "parentId" : "ba4d5fbd-f449-48dd-ad48-4384415b4f24",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Now that I think about it, can you piggy back on the work I'm doing in #4681? I'm storing completions with the intent of serving them.",
        "createdAt" : "2020-02-25T12:48:28Z",
        "updatedAt" : "2020-02-26T09:55:05Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "46d11cb0-6751-4a0a-b34f-a1ed352aaac1",
        "parentId" : "ba4d5fbd-f449-48dd-ad48-4384415b4f24",
        "author" : {
          "login" : "rautenrieth-da",
          "name" : "Robert Autenrieth",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/31539813?u=e5fe17e2c6f986e9ee04c5b9ca5f6a5a90d1c94a&v=4"
        },
        "body" : "I don't think so - this the result of command submission, not command completion.",
        "createdAt" : "2020-02-25T15:03:50Z",
        "updatedAt" : "2020-02-26T09:55:05Z",
        "lastEditedBy" : {
          "login" : "rautenrieth-da",
          "name" : "Robert Autenrieth",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/31539813?u=e5fe17e2c6f986e9ee04c5b9ca5f6a5a90d1c94a&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "0de71722-9f7a-425a-84ff-6a4157ca5baf",
        "parentId" : "ba4d5fbd-f449-48dd-ad48-4384415b4f24",
        "author" : {
          "login" : "rautenrieth-da",
          "name" : "Robert Autenrieth",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/31539813?u=e5fe17e2c6f986e9ee04c5b9ca5f6a5a90d1c94a&v=4"
        },
        "body" : "I have renamed the columns as you suggested. ",
        "createdAt" : "2020-02-25T15:04:13Z",
        "updatedAt" : "2020-02-26T09:55:05Z",
        "lastEditedBy" : {
          "login" : "rautenrieth-da",
          "name" : "Robert Autenrieth",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/31539813?u=e5fe17e2c6f986e9ee04c5b9ca5f6a5a90d1c94a&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "81c3bb07cc3057b6358f8d09902331b1a80501bf",
    "line" : null,
    "diffHunk" : "@@ -18,8 +18,8 @@ CREATE TABLE participant_command_submissions(\n   submitted_at       timestamp             not null,\n   -- The time the command will stop being deduplicated\n   ttl                timestamp             not null,\n-  -- If set, then the command was successfully submitted\n-  success            boolean,\n-  -- If set, then the command submission failed with the given error\n-  error              varchar\n+  -- The gRPC status code of the original command submission, if available\n+  result_code        int,"
  }
]