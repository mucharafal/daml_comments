[
  {
    "id" : "e7f10b9f-8fa0-4ca0-b8cb-e64055cd32f0",
    "prId" : 7574,
    "comments" : [
      {
        "id" : "168d6969-d53b-4706-97e9-5042e7052e6e",
        "parentId" : null,
        "author" : {
          "login" : "rautenrieth-da",
          "name" : "Robert Autenrieth",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/31539813?u=e5fe17e2c6f986e9ee04c5b9ca5f6a5a90d1c94a&v=4"
        },
        "body" : "The two participants can't have the same participant ID, otherwise there are conflicts in the metrics registry.",
        "createdAt" : "2020-10-07T01:09:14Z",
        "updatedAt" : "2020-10-12T06:42:44Z",
        "lastEditedBy" : {
          "login" : "rautenrieth-da",
          "name" : "Robert Autenrieth",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/31539813?u=e5fe17e2c6f986e9ee04c5b9ca5f6a5a90d1c94a&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "5bee0e65d693c31ebb3a7b2d736ad4c23c132af6",
    "line" : null,
    "diffHunk" : "@@ -190,6 +190,23 @@ conformance_test(\n     ],\n )\n \n+conformance_test(\n+    name = \"conformance-test-split-participant\",\n+    ports = [\n+        6865,\n+    ],\n+    server = \":app\",\n+    server_args = [\n+        \"--contract-id-seeding=testing-weak\",\n+        \"--participant participant-id=split-example-i,port=6865,server-jdbc-url=jdbc:h2:mem:split-example;db_close_delay=-1;db_close_on_exit=false,mode=indexer\",\n+        \"--participant participant-id=split-example-s,port=6865,server-jdbc-url=jdbc:h2:mem:split-example;db_close_delay=-1;db_close_on_exit=false,mode=ledger-api-server\","
  },
  {
    "id" : "7b975f23-e774-4f9d-b4e6-9097c273da46",
    "prId" : 7574,
    "comments" : [
      {
        "id" : "10511507-4646-472c-8d10-6da5065befef",
        "parentId" : null,
        "author" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "body" : "```suggestion\r\n        \"--participant participant-id=split-example-indexer,port=6865,server-jdbc-url=jdbc:h2:mem:split-example;db_close_delay=-1;db_close_on_exit=false,mode=indexer\",\r\n```",
        "createdAt" : "2020-10-07T13:19:14Z",
        "updatedAt" : "2020-10-12T06:42:44Z",
        "lastEditedBy" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "5bee0e65d693c31ebb3a7b2d736ad4c23c132af6",
    "line" : null,
    "diffHunk" : "@@ -190,6 +190,23 @@ conformance_test(\n     ],\n )\n \n+conformance_test(\n+    name = \"conformance-test-split-participant\",\n+    ports = [\n+        6865,\n+    ],\n+    server = \":app\",\n+    server_args = [\n+        \"--contract-id-seeding=testing-weak\",\n+        \"--participant participant-id=split-example-i,port=6865,server-jdbc-url=jdbc:h2:mem:split-example;db_close_delay=-1;db_close_on_exit=false,mode=indexer\","
  },
  {
    "id" : "593fb6ac-0234-4fd4-bd54-81d277ae4de7",
    "prId" : 7574,
    "comments" : [
      {
        "id" : "180c938b-963e-499b-9fcc-2771c984d64d",
        "parentId" : null,
        "author" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "body" : "```suggestion\r\n        \"--participant participant-id=split-example-server,port=6865,server-jdbc-url=jdbc:h2:mem:split-example;db_close_delay=-1;db_close_on_exit=false,mode=ledger-api-server\",\r\n```",
        "createdAt" : "2020-10-07T13:19:31Z",
        "updatedAt" : "2020-10-12T06:42:44Z",
        "lastEditedBy" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "5bee0e65d693c31ebb3a7b2d736ad4c23c132af6",
    "line" : null,
    "diffHunk" : "@@ -190,6 +190,23 @@ conformance_test(\n     ],\n )\n \n+conformance_test(\n+    name = \"conformance-test-split-participant\",\n+    ports = [\n+        6865,\n+    ],\n+    server = \":app\",\n+    server_args = [\n+        \"--contract-id-seeding=testing-weak\",\n+        \"--participant participant-id=split-example-i,port=6865,server-jdbc-url=jdbc:h2:mem:split-example;db_close_delay=-1;db_close_on_exit=false,mode=indexer\",\n+        \"--participant participant-id=split-example-s,port=6865,server-jdbc-url=jdbc:h2:mem:split-example;db_close_delay=-1;db_close_on_exit=false,mode=ledger-api-server\","
  },
  {
    "id" : "1ecc6b86-1b4d-4b49-90d5-d7456a9b29cc",
    "prId" : 6160,
    "comments" : [
      {
        "id" : "c7652796-85f1-4b50-925c-e03874b68ca2",
        "parentId" : null,
        "author" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "body" : "If we need these parameters in order for this to work, perhaps they shouldn't have defaults. The ledger could specify its own defaults if you like, but having them in kvutils itself is quite dangerous.",
        "createdAt" : "2020-05-29T12:06:03Z",
        "updatedAt" : "2020-05-29T12:53:16Z",
        "lastEditedBy" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "b7a661d7-5f17-45ee-91b9-8510c66650be",
        "parentId" : "c7652796-85f1-4b50-925c-e03874b68ca2",
        "author" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "body" : "We provide these defaults to get started easily. However, I agree that it would make sense to specify good defaults per ledger. Via `LedgerFactory` you may simply override the defaults used for batching, i.e., these are not enforced by kvutils in any way.\r\nI'll add some more documentation to these settings in a separate PR.",
        "createdAt" : "2020-05-29T12:55:51Z",
        "updatedAt" : "2020-05-29T12:55:51Z",
        "lastEditedBy" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "e036f1b4710ceaa7802515c1d30cafb21cf7e48b",
    "line" : null,
    "diffHunk" : "@@ -119,7 +119,7 @@ conformance_test(\n     server_args = [\n         \"--contract-id-seeding=testing-weak\",\n         \"--participant participant-id=example,port=6865\",\n-        \"--batching enable=true,max-queue-size=500\",\n+        \"--batching enable=true,max-queue-size=500,max-batch-size-bytes=262144,max-concurrent-commits=2\","
  },
  {
    "id" : "9de1b814-61ff-48df-8bc1-7b3330e90399",
    "prId" : 6004,
    "comments" : [
      {
        "id" : "0f4e2792-fbd7-4fbe-9142-8606d5a22abc",
        "parentId" : null,
        "author" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "body" : "I'd appreciate it if we can move the test dependencies into `kvutils` rather than `kvutils/app`. If you need to keep the options reader in `app`, fair enough, but the configuration class can still be moved.",
        "createdAt" : "2020-05-20T07:06:42Z",
        "updatedAt" : "2020-05-25T16:06:53Z",
        "lastEditedBy" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "3656fc85-a93f-44ed-9e38-ade4cab55dcb",
        "parentId" : "0f4e2792-fbd7-4fbe-9142-8606d5a22abc",
        "author" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "body" : "Changed that -- now all the batching related config definition & factory classes are in `kvutils` and only the config parsing logic is in `kvutils/app`.",
        "createdAt" : "2020-05-20T08:52:20Z",
        "updatedAt" : "2020-05-25T16:06:53Z",
        "lastEditedBy" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "f5039a2c00da681659f3cc8423f9ddfc9d993996",
    "line" : null,
    "diffHunk" : "@@ -58,6 +58,7 @@ da_scala_test(\n         \"//ledger/participant-state\",\n         \"//ledger/participant-state/kvutils\",\n         \"//ledger/participant-state/kvutils:kvutils-tests-lib\",\n+        \"//ledger/participant-state/kvutils/app\","
  },
  {
    "id" : "568930b8-5d79-4867-a14b-978727023909",
    "prId" : 5256,
    "comments" : [
      {
        "id" : "7045b309-94cd-40f3-b2e4-f01e61729171",
        "parentId" : null,
        "author" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "body" : "You can probably just use `\"@openjdk_base//image\"` here, and delete `app-image-base`, if you don't care about running this inside an orchestrator/scheduler such as Kubernetes.",
        "createdAt" : "2020-03-27T16:20:00Z",
        "updatedAt" : "2020-03-29T08:29:57Z",
        "lastEditedBy" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "1d158b8f-202a-4abb-bfc5-a205906c5933",
        "parentId" : "7045b309-94cd-40f3-b2e4-f01e61729171",
        "author" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "body" : "Done",
        "createdAt" : "2020-03-27T16:57:45Z",
        "updatedAt" : "2020-03-29T08:29:57Z",
        "lastEditedBy" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "987d1bf797b0edec3d56ff6b76fb215a883597e9",
    "line" : null,
    "diffHunk" : "@@ -150,3 +153,22 @@ conformance_test(\n         \"--include=ConfigManagementServiceIT\",\n     ],\n )\n+\n+container_image(\n+    name = \"app-image-base\",\n+    base = \"@openjdk_base//image\",\n+    cmd = None,\n+    directory = \"/usr/bin\",\n+    files = [\n+        \"@com_github_grpc_ecosystem_grpc_health_probe_binary//file\",\n+    ],\n+) if not is_windows else None\n+\n+java_image(\n+    name = \"app-image\",\n+    base = \":app-image-base\","
  },
  {
    "id" : "01c2b136-babe-47b2-82c0-96f13855f007",
    "prId" : 4669,
    "comments" : [
      {
        "id" : "e669ab8a-5a7a-4b79-a881-e81fd8d0d0b9",
        "parentId" : null,
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "I'm a bit surprised the server has to depend on the client bindings, how come? Or am I missing something?",
        "createdAt" : "2020-02-25T12:30:50Z",
        "updatedAt" : "2020-02-26T07:26:00Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "78102139-4dd0-402f-9b11-891073569216",
        "parentId" : "e669ab8a-5a7a-4b79-a881-e81fd8d0d0b9",
        "author" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "body" : "`TimeProvider` lives there. Is there a better place?",
        "createdAt" : "2020-02-25T12:39:56Z",
        "updatedAt" : "2020-02-26T07:26:00Z",
        "lastEditedBy" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "9891d27d-2336-43c5-ac83-6417da4d348b",
        "parentId" : "e669ab8a-5a7a-4b79-a881-e81fd8d0d0b9",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "If it's supposed to be shared between clients and servers, probably `ledger-api-common`.",
        "createdAt" : "2020-02-25T12:44:41Z",
        "updatedAt" : "2020-02-26T07:26:00Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "2580188e-2778-45f9-a4df-b8966aebabd8",
        "parentId" : "e669ab8a-5a7a-4b79-a881-e81fd8d0d0b9",
        "author" : {
          "login" : "fabiotudone-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/59609563?u=a3a8ac844c9aacd1d1bd319a77d1d0ac60d701a3&v=4"
        },
        "body" : "I'll move it there and remove the dep.",
        "createdAt" : "2020-02-25T13:19:42Z",
        "updatedAt" : "2020-02-26T07:26:00Z",
        "lastEditedBy" : {
          "login" : "fabiotudone-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/59609563?u=a3a8ac844c9aacd1d1bd319a77d1d0ac60d701a3&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "07ff0c54-ebb6-4a32-ae22-7ffb721fbce7",
        "parentId" : "e669ab8a-5a7a-4b79-a881-e81fd8d0d0b9",
        "author" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "body" : "This is more complicated than it looks; I suggest we do it elsewhere.",
        "createdAt" : "2020-02-25T14:27:11Z",
        "updatedAt" : "2020-02-26T07:26:00Z",
        "lastEditedBy" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "ae0a86ecb50b24000dc0788888770635bf7f5fd9",
    "line" : 4,
    "diffHunk" : "@@ -19,6 +19,7 @@ da_scala_library(\n     ],\n     deps = [\n         \"//daml-lf/data\",\n+        \"//language-support/scala/bindings\","
  },
  {
    "id" : "9e68d3e9-162e-4c6c-a313-933faf36928e",
    "prId" : 3930,
    "comments" : [
      {
        "id" : "b8bd12fc-eb38-441d-a26f-19b259b392b9",
        "parentId" : null,
        "author" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "body" : "It is recommended to explicitly enumerate dependencies in the respective build targets to allow easier maintenance using `buildozer`.",
        "createdAt" : "2020-01-07T09:24:21Z",
        "updatedAt" : "2020-01-13T09:32:40Z",
        "lastEditedBy" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "7700f243-bbf7-49c8-8d20-c4f0c1d4c7eb",
        "parentId" : "b8bd12fc-eb38-441d-a26f-19b259b392b9",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "lol I love that name :tractor: ",
        "createdAt" : "2020-01-07T09:59:17Z",
        "updatedAt" : "2020-01-13T09:32:40Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "9419d695-18bf-40bb-8b67-58a9729c76ce",
        "parentId" : "b8bd12fc-eb38-441d-a26f-19b259b392b9",
        "author" : {
          "login" : "SamirTalwar",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/47582?v=4"
        },
        "body" : "Done as part of merging `master` in.",
        "createdAt" : "2020-01-13T08:34:24Z",
        "updatedAt" : "2020-01-13T09:32:40Z",
        "lastEditedBy" : {
          "login" : "SamirTalwar",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/47582?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "e6dcd869a792cd3f93481b15fa023552da27cb7f",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,84 @@\n+# Copyright (c) 2019 The DAML Authors. All rights reserved.\n+# SPDX-License-Identifier: Apache-2.0\n+\n+load(\n+    \"//bazel_tools:scala.bzl\",\n+    \"da_scala_binary\",\n+    \"da_scala_library\",\n+    \"da_scala_test\",\n+)\n+load(\"//ledger/ledger-api-test-tool:conformance.bzl\", \"conformance_test\")\n+\n+compile_deps = ["
  }
]