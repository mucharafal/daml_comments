[
  {
    "id" : "859e773f-fe3f-48ed-9830-d39371607874",
    "prId" : 6671,
    "comments" : [
      {
        "id" : "dc73edd5-96fa-435d-a85d-20cd73c1b555",
        "parentId" : null,
        "author" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "body" : "As there are multiple assertions on the same result, for improving readability you could declare the relevant log entry here, i.e.:\r\n```scala\r\nfor {\r\n  preExecutionResult <- ...\r\n  actualLogEntry = preExecutionResult.successfulLogEntry\r\n} yield {\r\n  actualLogEntry.getPayLoadCase shouldEqual ...\r\n  ...\r\n}\r\n```",
        "createdAt" : "2020-07-13T16:45:34Z",
        "updatedAt" : "2020-07-14T09:10:04Z",
        "lastEditedBy" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "89efc40e-7399-418a-aed6-c04990311a21",
        "parentId" : "dc73edd5-96fa-435d-a85d-20cd73c1b555",
        "author" : {
          "login" : "fabiotudone-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/59609563?u=a3a8ac844c9aacd1d1bd319a77d1d0ac60d701a3&v=4"
        },
        "body" : "Done.",
        "createdAt" : "2020-07-14T07:17:55Z",
        "updatedAt" : "2020-07-14T09:10:04Z",
        "lastEditedBy" : {
          "login" : "fabiotudone-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/59609563?u=a3a8ac844c9aacd1d1bd319a77d1d0ac60d701a3&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "86586b48939830545d9f47df569ddbd0dd9fdc46",
    "line" : 17,
    "diffHunk" : "@@ -63,6 +63,19 @@ class KVUtilsPackageSpec extends WordSpec with Matchers with BazelRunfiles {\n       }\n     }\n \n+    \"be able to pre-execute model-test.dar\" in KVTest.runTest {\n+      for {\n+        // NOTE(JM): 'runTest' always uploads 'simpleArchive' by default.\n+        preExecutionResult <- preExecuteArchives(\n+          \"model-test-submission\",\n+          testStablePackages.all: _*)\n+          .map(_._2)"
  },
  {
    "id" : "b51ee073-6e93-4bca-b63d-88b0084d3290",
    "prId" : 6671,
    "comments" : [
      {
        "id" : "e21f130d-ce80-43bd-aad9-f8f88e38aa6c",
        "parentId" : null,
        "author" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "body" : "Why is this note relevant here? I think it should be removed (along with the above note) as it doesn't make sense in this context.",
        "createdAt" : "2020-07-13T16:47:41Z",
        "updatedAt" : "2020-07-14T09:10:04Z",
        "lastEditedBy" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "4f111ad5-5fca-4b8e-ab40-9e5b6d5e2af4",
        "parentId" : "e21f130d-ce80-43bd-aad9-f8f88e38aa6c",
        "author" : {
          "login" : "fabiotudone-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/59609563?u=a3a8ac844c9aacd1d1bd319a77d1d0ac60d701a3&v=4"
        },
        "body" : "I guess it explains why we're uploading more packages but then again it can be removed from both places.",
        "createdAt" : "2020-07-14T07:07:31Z",
        "updatedAt" : "2020-07-14T09:10:04Z",
        "lastEditedBy" : {
          "login" : "fabiotudone-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/59609563?u=a3a8ac844c9aacd1d1bd319a77d1d0ac60d701a3&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "4f80034f-344d-42c8-bafe-52371cd42595",
        "parentId" : "e21f130d-ce80-43bd-aad9-f8f88e38aa6c",
        "author" : {
          "login" : "fabiotudone-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/59609563?u=a3a8ac844c9aacd1d1bd319a77d1d0ac60d701a3&v=4"
        },
        "body" : "Done.",
        "createdAt" : "2020-07-14T07:17:47Z",
        "updatedAt" : "2020-07-14T09:10:04Z",
        "lastEditedBy" : {
          "login" : "fabiotudone-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/59609563?u=a3a8ac844c9aacd1d1bd319a77d1d0ac60d701a3&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "86586b48939830545d9f47df569ddbd0dd9fdc46",
    "line" : null,
    "diffHunk" : "@@ -63,6 +63,19 @@ class KVUtilsPackageSpec extends WordSpec with Matchers with BazelRunfiles {\n       }\n     }\n \n+    \"be able to pre-execute model-test.dar\" in KVTest.runTest {\n+      for {\n+        // NOTE(JM): 'runTest' always uploads 'simpleArchive' by default."
  },
  {
    "id" : "b63edf7c-89b2-4094-8b8c-22492720456f",
    "prId" : 6506,
    "comments" : [
      {
        "id" : "280715db-9db5-425d-abb4-fe054e4a541b",
        "parentId" : null,
        "author" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "body" : "Here too.",
        "createdAt" : "2020-06-26T09:55:30Z",
        "updatedAt" : "2020-06-26T11:19:16Z",
        "lastEditedBy" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "8d4342e4db17283312fc898b18a846df59d9b908",
    "line" : null,
    "diffHunk" : "@@ -24,7 +24,9 @@ class KVUtilsPackageSpec extends WordSpec with Matchers with BazelRunfiles {\n   private val darReader = DarReader { case (_, is) => Try(DamlLf.Archive.parseFrom(is)) }\n \n   private val testStablePackages =\n-    darReader.readArchiveFromFile(new File(rlocation(\"ledger/test-common/Test-stable.dar\"))).get\n+    darReader\n+      .readArchiveFromFile(new File(rlocation(\"ledger/test-common/model-tests.dar\")))"
  },
  {
    "id" : "dfbe2b3e-ad65-40d3-a2b8-790759695a3e",
    "prId" : 2860,
    "comments" : [
      {
        "id" : "900dc862-977b-4055-92e9-f37adfa9188b",
        "parentId" : null,
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "I believe this would be an error on the Ledger API. Is this by design?",
        "createdAt" : "2019-09-10T13:31:47Z",
        "updatedAt" : "2019-09-13T09:55:56Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "66feacefba7b54019abe3376660df6e5301c989f",
    "line" : null,
    "diffHunk" : "@@ -3,22 +3,35 @@\n \n package com.daml.ledger.participant.state.kvutils\n \n+import java.io.File\n+\n import com.daml.ledger.participant.state.kvutils.DamlKvutils.DamlLogEntry\n+import com.digitalasset.daml.bazeltools.BazelRunfiles\n+import com.digitalasset.daml.lf.archive.DarReader\n+import com.digitalasset.daml_lf.DamlLf\n import org.scalatest.{Matchers, WordSpec}\n \n-class KVUtilsPackageSpec extends WordSpec with Matchers {\n+import scala.util.Try\n+\n+class KVUtilsPackageSpec extends WordSpec with Matchers with BazelRunfiles {\n   import KVTest._\n   import TestHelpers._\n \n+  val darReader = DarReader { case (_, is) => Try(DamlLf.Archive.parseFrom(is)) }\n+\n+  val testStablePackages =\n+    darReader.readArchiveFromFile(new File(rlocation(\"ledger/test-common/Test-stable.dar\"))).get\n+\n   \"packages\" should {\n-    \"be able to submit package\" in KVTest.runTest {\n+    \"be able to submit empty package\" in KVTest.runTest {"
  }
]