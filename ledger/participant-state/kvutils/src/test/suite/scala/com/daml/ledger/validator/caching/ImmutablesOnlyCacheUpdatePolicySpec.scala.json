[
  {
    "id" : "9a611f85-c919-4bee-ba95-5d9f775515d7",
    "prId" : 6187,
    "comments" : [
      {
        "id" : "28996d90-066a-45a6-ac2c-4cc60261bb7d",
        "parentId" : null,
        "author" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "body" : "If we're testing against the interface, I'd prefer if we set `val policy = ImmutablesOnlyCacheUpdatePolicy` and then checked:\r\n\r\n```suggestion\r\n      policy.shouldCacheOnWrite(aPackageKey) shouldBe true\r\n```",
        "createdAt" : "2020-06-02T13:58:36Z",
        "updatedAt" : "2020-06-02T15:59:48Z",
        "lastEditedBy" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "4ecb95a0-4b43-4aa4-9bfd-14b2c535072b",
        "parentId" : "28996d90-066a-45a6-ac2c-4cc60261bb7d",
        "author" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "body" : "Good point -- changed accordingly.",
        "createdAt" : "2020-06-02T15:56:39Z",
        "updatedAt" : "2020-06-02T15:59:48Z",
        "lastEditedBy" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "41c5843a44798677800dbfd73417a434d86350da",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,45 @@\n+// Copyright (c) 2020 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+package com.daml.ledger.validator.caching\n+\n+import com.daml.ledger.participant.state.kvutils.DamlKvutils.DamlStateKey\n+import com.daml.ledger.validator.TestHelper\n+import com.daml.ledger.validator.caching.ImmutablesOnlyCacheUpdatePolicy._\n+import org.scalatest.{Matchers, WordSpec}\n+\n+class ImmutablesOnlyCacheUpdatePolicySpec extends WordSpec with Matchers {\n+  \"cache update policy\" should {\n+    \"allow write-through caching of packages\" in {\n+      shouldCacheOnWrite(aPackageKey) shouldBe true"
  }
]