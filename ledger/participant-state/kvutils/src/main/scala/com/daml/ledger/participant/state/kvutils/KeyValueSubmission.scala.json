[
  {
    "id" : "64809251-1e60-4606-86bf-c974bbf3e724",
    "prId" : 6143,
    "comments" : [
      {
        "id" : "a29f3c36-e2df-444b-bc09-80223d551336",
        "parentId" : null,
        "author" : {
          "login" : "gerolf-da",
          "name" : "Gerolf Seitz",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/29121423?u=f683aa614e742c653ae8c01b194905dcdef6e974&v=4"
        },
        "body" : "Same, should this be a `SubmittedTransaction`?",
        "createdAt" : "2020-05-28T13:31:53Z",
        "updatedAt" : "2020-06-08T14:24:10Z",
        "lastEditedBy" : {
          "login" : "gerolf-da",
          "name" : "Gerolf Seitz",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/29121423?u=f683aa614e742c653ae8c01b194905dcdef6e974&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "89af6d420800adee764159fb1c3073fae07859e9",
    "line" : null,
    "diffHunk" : "@@ -42,7 +41,7 @@ class KeyValueSubmission(metrics: Metrics) {\n   def transactionToSubmission(\n       submitterInfo: SubmitterInfo,\n       meta: TransactionMeta,\n-      tx: Transaction.Transaction,\n+      tx: CommittedTransaction,"
  },
  {
    "id" : "fde8442a-28ed-4c01-b827-0e52206f4fc2",
    "prId" : 4741,
    "comments" : [
      {
        "id" : "a257441d-d187-4f83-a56d-4de400bc036f",
        "parentId" : null,
        "author" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "body" : "Do we need `entryId` anymore? Preferrably we remove the whole `submissionOutputs` function and include the outputs in the submission message itself. This can and should probably be later work.",
        "createdAt" : "2020-02-27T13:46:51Z",
        "updatedAt" : "2020-03-02T09:32:20Z",
        "lastEditedBy" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "f646a5b5-9968-4fe1-8859-ad48cf85aab6",
        "parentId" : "a257441d-d187-4f83-a56d-4de400bc036f",
        "author" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "body" : "Does not seem we need it. ",
        "createdAt" : "2020-02-27T16:07:24Z",
        "updatedAt" : "2020-03-02T09:32:20Z",
        "lastEditedBy" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "9ee3168f-3289-44e1-bfd3-ea84cb01ac2a",
        "parentId" : "a257441d-d187-4f83-a56d-4de400bc036f",
        "author" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "body" : "dropped",
        "createdAt" : "2020-02-27T18:32:28Z",
        "updatedAt" : "2020-03-02T09:32:20Z",
        "lastEditedBy" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "6fdd134e28edcb94e9bf2aff60e5605405bf6128",
    "line" : null,
    "diffHunk" : "@@ -35,7 +35,10 @@ object KeyValueSubmission {\n     *\n     * @deprecated Use [[KeyValueCommitting.submissionOutputs]] instead. This function will be removed in later version.\n     */\n-  def transactionOutputs(entryId: DamlLogEntryId, tx: SubmittedTransaction): List[DamlStateKey] = {\n+  def transactionOutputs(\n+      entryId: DamlLogEntryId,"
  },
  {
    "id" : "76e281f2-a0b1-4892-a879-a77c911e3a77",
    "prId" : 3847,
    "comments" : [
      {
        "id" : "9571b552-2b0b-443b-9e99-b9f60912a13e",
        "parentId" : null,
        "author" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "body" : "easier to read as: `List(x, y)`, or even preferably to avoid building the intermediate list you can just call `addInputDamlState` twice.",
        "createdAt" : "2019-12-17T12:16:08Z",
        "updatedAt" : "2019-12-17T18:52:24Z",
        "lastEditedBy" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "04c468fd-b681-4fdb-a798-1fd13f0c766a",
        "parentId" : "9571b552-2b0b-443b-9e99-b9f60912a13e",
        "author" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "body" : "Done",
        "createdAt" : "2019-12-17T16:21:50Z",
        "updatedAt" : "2019-12-17T18:52:24Z",
        "lastEditedBy" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "c9a07f89574f1c170c540c240010fa88a826ce2f",
    "line" : null,
    "diffHunk" : "@@ -98,8 +100,11 @@ object KeyValueSubmission {\n       displayName: Option[String],\n       participantId: ParticipantId): DamlSubmission = {\n     val party = hint.getOrElse(\"\")\n+    val inputDamlState =\n+      partyAllocationDedupKey(participantId, submissionId) ::"
  },
  {
    "id" : "25a180df-cd8a-4450-9791-e3854b017be1",
    "prId" : 3847,
    "comments" : [
      {
        "id" : "5380bfdf-a5d2-43f5-ba0e-eb78a6d05e5f",
        "parentId" : null,
        "author" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "body" : "as mentioned below, you might want to instead do repeated calls to `addInputDamlState` (e.g. archive.foreach etc.). this avoids building up these intermediate structures, though of course here this shouldn't really be an issue as we're not uploading thousands of packages.",
        "createdAt" : "2019-12-17T12:17:50Z",
        "updatedAt" : "2019-12-17T18:52:24Z",
        "lastEditedBy" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "f51c7b1f-0818-4096-94bc-1473628c37b5",
        "parentId" : "5380bfdf-a5d2-43f5-ba0e-eb78a6d05e5f",
        "author" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "body" : "Done",
        "createdAt" : "2019-12-17T16:22:12Z",
        "updatedAt" : "2019-12-17T18:52:24Z",
        "lastEditedBy" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "c9a07f89574f1c170c540c240010fa88a826ce2f",
    "line" : null,
    "diffHunk" : "@@ -73,11 +73,13 @@ object KeyValueSubmission {\n       sourceDescription: String,\n       participantId: ParticipantId): DamlSubmission = {\n \n-    val inputDamlState = archives.map(\n-      archive =>\n-        DamlStateKey.newBuilder\n-          .setPackageId(archive.getHash)\n-          .build)\n+    val inputDamlState =\n+      packageUploadDedupKey(participantId, submissionId) ::"
  },
  {
    "id" : "d19386ce-7c20-4178-9423-cd000aae2601",
    "prId" : 3847,
    "comments" : [
      {
        "id" : "6bd6ba3d-9015-4e9a-bb62-2de0e220420d",
        "parentId" : null,
        "author" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "body" : "see comment above.",
        "createdAt" : "2019-12-17T12:18:01Z",
        "updatedAt" : "2019-12-17T18:52:24Z",
        "lastEditedBy" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "b2cc5e51-3abb-4d00-9eab-5a875bef8d56",
        "parentId" : "6bd6ba3d-9015-4e9a-bb62-2de0e220420d",
        "author" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "body" : "Done",
        "createdAt" : "2019-12-17T16:22:24Z",
        "updatedAt" : "2019-12-17T18:52:24Z",
        "lastEditedBy" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "c9a07f89574f1c170c540c240010fa88a826ce2f",
    "line" : 54,
    "diffHunk" : "@@ -117,8 +122,11 @@ object KeyValueSubmission {\n       participantId: ParticipantId,\n       config: Configuration): DamlSubmission = {\n     val tm = config.timeModel\n+    val inputDamlState ="
  }
]