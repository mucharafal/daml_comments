[
  {
    "id" : "091388f0-d751-401a-8ecd-bd5dc5476daa",
    "prId" : 7460,
    "comments" : [
      {
        "id" : "66e60633-080a-472b-baf5-4936b9c2e5ef",
        "parentId" : null,
        "author" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "body" : "It makes me little bit nervous that the step lists are duplicated. If one needs to add a new step one needs to remember to add it to all three places. Since all of them are extra validation steps the order isn't as important, so could it be safer to have e.g. \"extra_validation_steps\" or some such that gets spliced into steps in PackageCommitter? What do you think?",
        "createdAt" : "2020-09-30T10:58:01Z",
        "updatedAt" : "2020-10-08T09:30:43Z",
        "lastEditedBy" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "968ce53f-e503-44eb-9a4a-fa0e5850e9f3",
        "parentId" : "66e60633-080a-472b-baf5-4936b9c2e5ef",
        "author" : {
          "login" : "gerolf-da",
          "name" : "Gerolf Seitz",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/29121423?u=f683aa614e742c653ae8c01b194905dcdef6e974&v=4"
        },
        "body" : "I share @dajmaki's concern.",
        "createdAt" : "2020-09-30T15:29:55Z",
        "updatedAt" : "2020-10-08T09:30:43Z",
        "lastEditedBy" : {
          "login" : "gerolf-da",
          "name" : "Gerolf Seitz",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/29121423?u=f683aa614e742c653ae8c01b194905dcdef6e974&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "0a4599bcbf38cacac4088b9b73021b01c997c440",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,24 @@\n+package com.daml.ledger.participant.state.kvutils.committer\n+\n+import com.daml.ledger.participant.state.kvutils.committer.Committer.StepInfo\n+import com.daml.metrics.Metrics\n+\n+/*\n+ * This Package Committer do not run any validation but just prunes duplicated\n+ *  packages from the entry.\n+ *\n+ * This should be used only by non distributed ledgers, like DAML-on-SQL,\n+ * where the validation done in the API server is enough.\n+ */\n+private[committer] class NonValidatingPackageCommitter(metrics: Metrics)\n+    extends PackageCommitter(metrics) {\n+\n+  override protected val committerName: String = \"package_committer\"\n+\n+  override protected val steps: Iterable[(StepInfo, Step)] =\n+    List(\n+      \"deduplicate_submission\" -> deduplicateSubmission,"
  },
  {
    "id" : "9f758264-a215-44fe-a7ed-9c8451d83b24",
    "prId" : 7460,
    "comments" : [
      {
        "id" : "c623412c-71f7-4436-b1b3-248f159f324b",
        "parentId" : null,
        "author" : {
          "login" : "gerolf-da",
          "name" : "Gerolf Seitz",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/29121423?u=f683aa614e742c653ae8c01b194905dcdef6e974&v=4"
        },
        "body" : "```suggestion\r\n * This Package Committer does not run any validation but just prunes duplicated\r\n```",
        "createdAt" : "2020-09-30T15:29:14Z",
        "updatedAt" : "2020-10-08T09:30:43Z",
        "lastEditedBy" : {
          "login" : "gerolf-da",
          "name" : "Gerolf Seitz",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/29121423?u=f683aa614e742c653ae8c01b194905dcdef6e974&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "0a4599bcbf38cacac4088b9b73021b01c997c440",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,24 @@\n+package com.daml.ledger.participant.state.kvutils.committer\n+\n+import com.daml.ledger.participant.state.kvutils.committer.Committer.StepInfo\n+import com.daml.metrics.Metrics\n+\n+/*\n+ * This Package Committer do not run any validation but just prunes duplicated"
  }
]