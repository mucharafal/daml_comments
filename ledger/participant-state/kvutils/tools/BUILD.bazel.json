[
  {
    "id" : "a10f5d8b-a984-4188-98c5-b7393d498447",
    "prId" : 7024,
    "comments" : [
      {
        "id" : "71b719d3-8412-42bf-8aa9-3c137fe1a257",
        "parentId" : null,
        "author" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "body" : "Why do you need the `srcs` section at all? It looks like this is included by the `:tools` library.",
        "createdAt" : "2020-08-05T15:38:43Z",
        "updatedAt" : "2020-08-05T16:08:35Z",
        "lastEditedBy" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "eaea7a03-df7f-4484-b155-aa1c9ad85941",
        "parentId" : "71b719d3-8412-42bf-8aa9-3c137fe1a257",
        "author" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "body" : "Good point -- removed.",
        "createdAt" : "2020-08-05T16:08:48Z",
        "updatedAt" : "2020-08-05T16:08:48Z",
        "lastEditedBy" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "4a678f7f3c81b3b0b7921c7bea3a3233a4c485ca",
    "line" : null,
    "diffHunk" : "@@ -5,13 +5,37 @@ load(\n     \"//bazel_tools:scala.bzl\",\n     \"da_scala_benchmark_jmh\",\n     \"da_scala_binary\",\n+    \"da_scala_library\",\n     \"lf_scalacopts\",\n )\n \n+da_scala_library(\n+    name = \"tools\",\n+    srcs = glob([\"src/main/scala/**/*.scala\"]),\n+    tags = [\"maven_coordinates=com.daml:data-export-kvutils:__VERSION__\"],\n+    visibility = [\n+        \"//visibility:public\",\n+    ],\n+    deps = [\n+        \"//daml-lf/data\",\n+        \"//daml-lf/engine\",\n+        \"//ledger/ledger-on-memory\",\n+        \"//ledger/metrics\",\n+        \"//ledger/participant-state\",\n+        \"//ledger/participant-state/kvutils\",\n+        \"//ledger/participant-state/kvutils:daml_kvutils_java_proto\",\n+        \"//libs-scala/direct-execution-context\",\n+        \"@maven//:com_google_protobuf_protobuf_java\",\n+        \"@maven//:com_typesafe_akka_akka_actor_2_12\",\n+        \"@maven//:com_typesafe_akka_akka_stream_2_12\",\n+        \"@maven//:io_dropwizard_metrics_metrics_core\",\n+    ],\n+)\n+\n da_scala_binary(\n     name = \"integrity-check\",\n-    srcs = [\"src/main/scala/com/daml/ledger/participant/state/kvutils/tools/IntegrityCheck.scala\"],\n-    main_class = \"com.daml.ledger.participant.state.kvutils.tools.IntegrityCheck\",\n+    srcs = [\"src/main/scala/com/daml/ledger/participant/state/kvutils/tools/driver/IntegrityCheck.scala\"],"
  },
  {
    "id" : "f6c311b8-e54b-4a95-ad40-2422072fb727",
    "prId" : 7024,
    "comments" : [
      {
        "id" : "0d0ab904-6036-483b-afed-5aa8cbab7df7",
        "parentId" : null,
        "author" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "body" : "Here too.",
        "createdAt" : "2020-08-05T15:38:49Z",
        "updatedAt" : "2020-08-05T16:08:35Z",
        "lastEditedBy" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "1947c619-98ba-4b5e-b563-edc0e1ff6772",
        "parentId" : "0d0ab904-6036-483b-afed-5aa8cbab7df7",
        "author" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "body" : "Removed.",
        "createdAt" : "2020-08-05T16:08:59Z",
        "updatedAt" : "2020-08-05T16:08:59Z",
        "lastEditedBy" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "4a678f7f3c81b3b0b7921c7bea3a3233a4c485ca",
    "line" : null,
    "diffHunk" : "@@ -34,8 +58,8 @@ da_scala_binary(\n \n da_scala_binary(\n     name = \"integrity-check-v2\",\n-    srcs = glob([\"src/main/scala/com/daml/ledger/participant/state/kvutils/tools/*\"]),\n-    main_class = \"com.daml.ledger.participant.state.kvutils.tools.IntegrityCheckV2\",\n+    srcs = glob([\"src/main/scala/com/daml/ledger/participant/state/kvutils/tools/driver/IntegrityCheckV2.scala\"]),"
  },
  {
    "id" : "2ca19316-bb98-4b2a-a933-94df39f3ffff",
    "prId" : 7024,
    "comments" : [
      {
        "id" : "0d6bb63c-dc95-4fef-be3a-f6102bb7ee63",
        "parentId" : null,
        "author" : {
          "login" : "fabiotudone-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/59609563?u=a3a8ac844c9aacd1d1bd319a77d1d0ac60d701a3&v=4"
        },
        "body" : "Why do we need to keep V1?",
        "createdAt" : "2020-08-05T15:51:39Z",
        "updatedAt" : "2020-08-05T16:08:35Z",
        "lastEditedBy" : {
          "login" : "fabiotudone-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/59609563?u=a3a8ac844c9aacd1d1bd319a77d1d0ac60d701a3&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "0b926260-9b36-41d4-8370-0f9292c27866",
        "parentId" : "0d6bb63c-dc95-4fef-be3a-f6102bb7ee63",
        "author" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "body" : "For backwards compatibility reasons. It'll make sense to phase out v1 once we start publishing ledger exports in the new format and all build tools will be using v2.",
        "createdAt" : "2020-08-05T16:10:50Z",
        "updatedAt" : "2020-08-05T16:10:50Z",
        "lastEditedBy" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "4a678f7f3c81b3b0b7921c7bea3a3233a4c485ca",
    "line" : 35,
    "diffHunk" : "@@ -5,13 +5,37 @@ load(\n     \"//bazel_tools:scala.bzl\",\n     \"da_scala_benchmark_jmh\",\n     \"da_scala_binary\",\n+    \"da_scala_library\",\n     \"lf_scalacopts\",\n )\n \n+da_scala_library(\n+    name = \"tools\",\n+    srcs = glob([\"src/main/scala/**/*.scala\"]),\n+    tags = [\"maven_coordinates=com.daml:data-export-kvutils:__VERSION__\"],\n+    visibility = [\n+        \"//visibility:public\",\n+    ],\n+    deps = [\n+        \"//daml-lf/data\",\n+        \"//daml-lf/engine\",\n+        \"//ledger/ledger-on-memory\",\n+        \"//ledger/metrics\",\n+        \"//ledger/participant-state\",\n+        \"//ledger/participant-state/kvutils\",\n+        \"//ledger/participant-state/kvutils:daml_kvutils_java_proto\",\n+        \"//libs-scala/direct-execution-context\",\n+        \"@maven//:com_google_protobuf_protobuf_java\",\n+        \"@maven//:com_typesafe_akka_akka_actor_2_12\",\n+        \"@maven//:com_typesafe_akka_akka_stream_2_12\",\n+        \"@maven//:io_dropwizard_metrics_metrics_core\",\n+    ],\n+)\n+\n da_scala_binary(\n     name = \"integrity-check\",\n-    srcs = [\"src/main/scala/com/daml/ledger/participant/state/kvutils/tools/IntegrityCheck.scala\"],\n-    main_class = \"com.daml.ledger.participant.state.kvutils.tools.IntegrityCheck\",\n+    srcs = [\"src/main/scala/com/daml/ledger/participant/state/kvutils/tools/driver/IntegrityCheck.scala\"],\n+    main_class = \"com.daml.ledger.participant.state.kvutils.tools.driver.IntegrityCheck\","
  }
]