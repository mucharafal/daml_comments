[
  {
    "id" : "e6dcdb54-ff68-4649-b1f8-6846689afa4a",
    "prId" : 6043,
    "comments" : [
      {
        "id" : "cfdccfbf-3694-4c69-b0cf-f03e830a0cc2",
        "parentId" : null,
        "author" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "body" : "This is deprecated. Override `recordEviction(int weight)` instead and increment the eviction count by one and eviction weight by the passed `weight`.",
        "createdAt" : "2020-05-20T10:27:55Z",
        "updatedAt" : "2020-05-20T12:50:18Z",
        "lastEditedBy" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "94782c40-a8a3-4ca1-9e1f-122bbf007a1e",
        "parentId" : "cfdccfbf-3694-4c69-b0cf-f03e830a0cc2",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Addressed by https://github.com/digital-asset/daml/pull/6043/commits/516f1af59a19d50a52062d0ccffb1faa21e7f143",
        "createdAt" : "2020-05-20T10:59:01Z",
        "updatedAt" : "2020-05-20T12:50:19Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "241da9f2-debc-4b4e-be0c-c64906436c2d",
        "parentId" : "cfdccfbf-3694-4c69-b0cf-f03e830a0cc2",
        "author" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "body" : "I assume only one of these `recordEviction` methods will be called otherwise we would get evictions double-counted.",
        "createdAt" : "2020-05-20T11:17:59Z",
        "updatedAt" : "2020-05-20T12:50:19Z",
        "lastEditedBy" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "2936235bdbd9010386da40a1297477eb856f678a",
    "line" : 37,
    "diffHunk" : "@@ -0,0 +1,41 @@\n+// Copyright (c) 2020 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+package com.daml.caching\n+\n+import com.daml.metrics.CacheMetrics\n+import com.github.benmanes.caffeine.cache.stats.{CacheStats, StatsCounter}\n+\n+private[caching] final class DropwizardStatsCounter(\n+    metrics: CacheMetrics,\n+) extends StatsCounter {\n+\n+  override def recordHits(i: Int): Unit =\n+    metrics.hitCount.inc(i.toLong)\n+\n+  override def recordMisses(i: Int): Unit =\n+    metrics.missCount.inc(i.toLong)\n+\n+  override def recordLoadSuccess(l: Long): Unit =\n+    metrics.loadSuccessCount.inc(l)\n+\n+  override def recordLoadFailure(l: Long): Unit =\n+    metrics.loadFailureCount.inc(l)\n+\n+  override def recordEviction(): Unit = {"
  },
  {
    "id" : "aa1be057-051c-4d3c-a2d0-def1d5dfed4e",
    "prId" : 6043,
    "comments" : [
      {
        "id" : "eaf338ec-0145-4921-855a-a1706e5c5597",
        "parentId" : null,
        "author" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "body" : "```suggestion\r\n  override def recordLoadFailure(loadTime: Long): Unit =\r\n```",
        "createdAt" : "2020-05-20T10:28:20Z",
        "updatedAt" : "2020-05-20T12:50:18Z",
        "lastEditedBy" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "201c6cf7-e3f0-4074-be19-0f272c5e2530",
        "parentId" : "eaf338ec-0145-4921-855a-a1706e5c5597",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Addressed by https://github.com/digital-asset/daml/pull/6043/commits/ded4b4a0c1492bafb03a5edd76c7e7a682c9de9b",
        "createdAt" : "2020-05-20T10:59:33Z",
        "updatedAt" : "2020-05-20T12:50:19Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "2936235bdbd9010386da40a1297477eb856f678a",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,41 @@\n+// Copyright (c) 2020 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+package com.daml.caching\n+\n+import com.daml.metrics.CacheMetrics\n+import com.github.benmanes.caffeine.cache.stats.{CacheStats, StatsCounter}\n+\n+private[caching] final class DropwizardStatsCounter(\n+    metrics: CacheMetrics,\n+) extends StatsCounter {\n+\n+  override def recordHits(i: Int): Unit =\n+    metrics.hitCount.inc(i.toLong)\n+\n+  override def recordMisses(i: Int): Unit =\n+    metrics.missCount.inc(i.toLong)\n+\n+  override def recordLoadSuccess(l: Long): Unit =\n+    metrics.loadSuccessCount.inc(l)\n+\n+  override def recordLoadFailure(l: Long): Unit ="
  },
  {
    "id" : "7a4f4ee9-5d51-4911-b2df-219eca7a4f94",
    "prId" : 6043,
    "comments" : [
      {
        "id" : "bc8497cc-613c-40dc-bf96-b6f6c2134410",
        "parentId" : null,
        "author" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "body" : "```suggestion\r\n  override def recordLoadSuccess(loadTime: Long): Unit =\r\n```",
        "createdAt" : "2020-05-20T10:28:30Z",
        "updatedAt" : "2020-05-20T12:50:18Z",
        "lastEditedBy" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "2621f19c-2a2e-4db4-a42e-727cc9b0f03e",
        "parentId" : "bc8497cc-613c-40dc-bf96-b6f6c2134410",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Addressed by https://github.com/digital-asset/daml/pull/6043/commits/ded4b4a0c1492bafb03a5edd76c7e7a682c9de9b",
        "createdAt" : "2020-05-20T10:59:38Z",
        "updatedAt" : "2020-05-20T12:50:19Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "2936235bdbd9010386da40a1297477eb856f678a",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,41 @@\n+// Copyright (c) 2020 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+package com.daml.caching\n+\n+import com.daml.metrics.CacheMetrics\n+import com.github.benmanes.caffeine.cache.stats.{CacheStats, StatsCounter}\n+\n+private[caching] final class DropwizardStatsCounter(\n+    metrics: CacheMetrics,\n+) extends StatsCounter {\n+\n+  override def recordHits(i: Int): Unit =\n+    metrics.hitCount.inc(i.toLong)\n+\n+  override def recordMisses(i: Int): Unit =\n+    metrics.missCount.inc(i.toLong)\n+\n+  override def recordLoadSuccess(l: Long): Unit ="
  },
  {
    "id" : "ebb5b2bf-fa10-4624-928f-57cde6ce5ec9",
    "prId" : 6043,
    "comments" : [
      {
        "id" : "55fa0b41-7938-4750-9bd9-e1ad114c5dde",
        "parentId" : null,
        "author" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "body" : "You only need to increment it by one.\r\n```suggestion\r\n    metrics.loadSuccessCount.inc()\r\n```",
        "createdAt" : "2020-05-20T10:28:45Z",
        "updatedAt" : "2020-05-20T12:50:18Z",
        "lastEditedBy" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "fb19d705-63b7-41a0-b1d6-790b408193de",
        "parentId" : "55fa0b41-7938-4750-9bd9-e1ad114c5dde",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Addressed by https://github.com/digital-asset/daml/pull/6043/commits/ded4b4a0c1492bafb03a5edd76c7e7a682c9de9b",
        "createdAt" : "2020-05-20T10:59:44Z",
        "updatedAt" : "2020-05-20T12:50:19Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "2936235bdbd9010386da40a1297477eb856f678a",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,41 @@\n+// Copyright (c) 2020 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+package com.daml.caching\n+\n+import com.daml.metrics.CacheMetrics\n+import com.github.benmanes.caffeine.cache.stats.{CacheStats, StatsCounter}\n+\n+private[caching] final class DropwizardStatsCounter(\n+    metrics: CacheMetrics,\n+) extends StatsCounter {\n+\n+  override def recordHits(i: Int): Unit =\n+    metrics.hitCount.inc(i.toLong)\n+\n+  override def recordMisses(i: Int): Unit =\n+    metrics.missCount.inc(i.toLong)\n+\n+  override def recordLoadSuccess(l: Long): Unit =\n+    metrics.loadSuccessCount.inc(l)"
  },
  {
    "id" : "92d036a8-c549-4689-aeca-e40bb73baf35",
    "prId" : 6043,
    "comments" : [
      {
        "id" : "d0446ba6-b59a-4fe5-a44b-7ec989a8f355",
        "parentId" : null,
        "author" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "body" : "Same as above.",
        "createdAt" : "2020-05-20T10:28:53Z",
        "updatedAt" : "2020-05-20T12:50:18Z",
        "lastEditedBy" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "2e8a28cd-718d-43dc-b8fb-cc6ea402b9b0",
        "parentId" : "d0446ba6-b59a-4fe5-a44b-7ec989a8f355",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Addressed by https://github.com/digital-asset/daml/pull/6043/commits/ded4b4a0c1492bafb03a5edd76c7e7a682c9de9b",
        "createdAt" : "2020-05-20T10:59:49Z",
        "updatedAt" : "2020-05-20T12:50:19Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "2936235bdbd9010386da40a1297477eb856f678a",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,41 @@\n+// Copyright (c) 2020 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+package com.daml.caching\n+\n+import com.daml.metrics.CacheMetrics\n+import com.github.benmanes.caffeine.cache.stats.{CacheStats, StatsCounter}\n+\n+private[caching] final class DropwizardStatsCounter(\n+    metrics: CacheMetrics,\n+) extends StatsCounter {\n+\n+  override def recordHits(i: Int): Unit =\n+    metrics.hitCount.inc(i.toLong)\n+\n+  override def recordMisses(i: Int): Unit =\n+    metrics.missCount.inc(i.toLong)\n+\n+  override def recordLoadSuccess(l: Long): Unit =\n+    metrics.loadSuccessCount.inc(l)\n+\n+  override def recordLoadFailure(l: Long): Unit =\n+    metrics.loadFailureCount.inc(l)"
  },
  {
    "id" : "fbd7f3c4-f5e2-42cc-bb05-63cf4d02f749",
    "prId" : 6043,
    "comments" : [
      {
        "id" : "b9674460-7606-4d8f-9bd9-9eaff17be902",
        "parentId" : null,
        "author" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "body" : "```suggestion\r\n  override def recordHits(count: Int): Unit =\r\n```",
        "createdAt" : "2020-05-20T10:29:12Z",
        "updatedAt" : "2020-05-20T12:50:18Z",
        "lastEditedBy" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "98141b07-27b8-4511-abed-bda45b6f7835",
        "parentId" : "b9674460-7606-4d8f-9bd9-9eaff17be902",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Addressed by https://github.com/digital-asset/daml/pull/6043/commits/ded4b4a0c1492bafb03a5edd76c7e7a682c9de9b",
        "createdAt" : "2020-05-20T10:59:54Z",
        "updatedAt" : "2020-05-20T12:50:19Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "2936235bdbd9010386da40a1297477eb856f678a",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,41 @@\n+// Copyright (c) 2020 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+package com.daml.caching\n+\n+import com.daml.metrics.CacheMetrics\n+import com.github.benmanes.caffeine.cache.stats.{CacheStats, StatsCounter}\n+\n+private[caching] final class DropwizardStatsCounter(\n+    metrics: CacheMetrics,\n+) extends StatsCounter {\n+\n+  override def recordHits(i: Int): Unit ="
  },
  {
    "id" : "18fa8a06-a5de-463f-8bb7-64e50baae8d2",
    "prId" : 6043,
    "comments" : [
      {
        "id" : "99f9840b-1595-403b-8aad-067545ddd25c",
        "parentId" : null,
        "author" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "body" : "```suggestion\r\n  override def recordMisses(count: Int): Unit =\r\n```",
        "createdAt" : "2020-05-20T10:29:23Z",
        "updatedAt" : "2020-05-20T12:50:19Z",
        "lastEditedBy" : {
          "login" : "miklos-da",
          "name" : "Miklos",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/57664299?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "cbb4946f-dbff-4356-877a-95a2e67b01b4",
        "parentId" : "99f9840b-1595-403b-8aad-067545ddd25c",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Addressed by https://github.com/digital-asset/daml/pull/6043/commits/ded4b4a0c1492bafb03a5edd76c7e7a682c9de9b",
        "createdAt" : "2020-05-20T10:59:58Z",
        "updatedAt" : "2020-05-20T12:50:19Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "2936235bdbd9010386da40a1297477eb856f678a",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,41 @@\n+// Copyright (c) 2020 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+package com.daml.caching\n+\n+import com.daml.metrics.CacheMetrics\n+import com.github.benmanes.caffeine.cache.stats.{CacheStats, StatsCounter}\n+\n+private[caching] final class DropwizardStatsCounter(\n+    metrics: CacheMetrics,\n+) extends StatsCounter {\n+\n+  override def recordHits(i: Int): Unit =\n+    metrics.hitCount.inc(i.toLong)\n+\n+  override def recordMisses(i: Int): Unit ="
  }
]