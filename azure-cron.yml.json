[
  {
    "id" : "8dd95ccd-54e0-4bd3-9327-78d8c4c35bf9",
    "prId" : 5780,
    "comments" : [
      {
        "id" : "a324bd49-03c7-458f-be90-d3cb94af52f5",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Nit: `.tag_name` is separate from the transformation from `\"v1.0.2\"` to `[1,0,2]`.",
        "createdAt" : "2020-04-29T12:30:32Z",
        "updatedAt" : "2020-04-30T13:04:57Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "a940b94e53c4c7a36e8d6b2e4585ee8dc1ed0105",
    "line" : 17,
    "diffHunk" : "@@ -108,17 +108,46 @@ jobs:\n                         -s \\\n                         \"https://marketplace.visualstudio.com/_apis/gallery/publishers/DigitalAssetHoldingsLLC/extensions/daml?flags=1\" \\\n                         | jq -r '.versions[0].version')\n-          GITHUB=$(curl https://api.github.com/repos/digital-asset/daml/releases -s | jq -r '. | map(select(.prerelease == false)) | map(.tag_name)[0]')\n-          if [[ \"${GITHUB#v}\" != \"$MARKET\" ]] && git merge-base --is-ancestor 798e96c9b9034eac85ace786b9e1955cf380285c $GITHUB; then\n+          # This jq expression should ensure that we always upload the\n+          # highest-number version. Here is how this works:\n+          #\n+          # 1. The GitHub API documentation does not specify the order for the\n+          #    \"list releases\" endpoint, but does specify that the \"latest\"\n+          #    endpoint returns the release that points to the most recent commit.\n+          #    Assuming the same sort order is applied for the list endpoint\n+          #    (which empirically seems to hold so far), this means that they may\n+          #    be out-of-order wrt version numbers, e.g. 1.1.0 may appear after\n+          #    1.0.2.\n+          # 2. The `.tag_name | .[1:] | split (\".\") | map(tonumber)` part will\n+          #    turn \"v1.0.2\" into an array [1, 0, 2]."
  },
  {
    "id" : "ae11a53c-88f5-4963-8d32-488e6f4499ec",
    "prId" : 5205,
    "comments" : [
      {
        "id" : "4279449b-dd1b-4491-b189-0710cd5619ce",
        "parentId" : null,
        "author" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "body" : "```suggestion\r\n          RELEASES=$(curl https://api.github.com/repos/digital-asset/daml/releases -s | jq -r '.[] | .tag_name')\r\n```",
        "createdAt" : "2020-03-26T09:20:03Z",
        "updatedAt" : "2020-03-26T09:20:57Z",
        "lastEditedBy" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "4e2d4fb3c1043e70de864e739ef271d8234f7983",
    "line" : null,
    "diffHunk" : "@@ -64,7 +64,7 @@ jobs:\n           HEAD=$(git rev-parse HEAD)\n           while ! nix-build -A tools.sed -A tools.jq -A tools.curl nix; do :; done\n           echo $DOCKER_PASSWORD | docker login --username $DOCKER_LOGIN --password-stdin\n-          RELEASES=$(curl https://api.github.com/repos/digital-asset/daml/releases -s | jq -r '. | map(select(.prerelease == false)) | map(.tag_name)[]')\n+          RELEASES=$(curl https://api.github.com/repos/digital-asset/daml/releases -s | jq -r '. | map(.tag_name)[]')"
  },
  {
    "id" : "c893f4b8-936a-4947-8f42-318a38168e67",
    "prId" : 4055,
    "comments" : [
      {
        "id" : "dc847e06-8793-4ff0-b18d-f758239da5f5",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "Is that how a while loop in bash looks like?",
        "createdAt" : "2020-01-15T16:13:27Z",
        "updatedAt" : "2020-01-15T16:32:15Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "6257681d-63dd-4472-baf1-26832d6e0970",
        "parentId" : "dc847e06-8793-4ff0-b18d-f758239da5f5",
        "author" : {
          "login" : "SamirTalwar",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/47582?v=4"
        },
        "body" : "`:` is a built-in version of `/bin/true`; it's a no-op.",
        "createdAt" : "2020-01-15T16:23:31Z",
        "updatedAt" : "2020-01-15T16:32:15Z",
        "lastEditedBy" : {
          "login" : "SamirTalwar",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/47582?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "3c9f5caee02e68000b476d626e04dda7a445edda",
    "line" : null,
    "diffHunk" : "@@ -68,7 +68,7 @@ jobs:\n           # >= 0.13.43 are built this way.\n           for version in $(echo $RELEASES | sed -e 's/ /\\n/g'); do\n             git checkout \"$version\"\n-            while ! nix-build -A tools -A cached nix; do; done\n+            while ! nix-build -A tools -A cached nix; do:; done"
  },
  {
    "id" : "46c2a37d-9882-4038-a238-16fc2e6f4a06",
    "prId" : 4024,
    "comments" : [
      {
        "id" : "9fa30871-d3d0-4ef4-bd46-0162df1c1d74",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "Shall we put a limit to this? Right now, we're risking to get stuck in an infinite loop.",
        "createdAt" : "2020-01-13T13:51:54Z",
        "updatedAt" : "2020-01-13T13:51:54Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "a460fdbd6d09968290b4f906d17665474ba3c1df",
    "line" : 4,
    "diffHunk" : "@@ -68,6 +68,7 @@ jobs:\n           # >= 0.13.43 are built this way.\n           for version in $(echo $RELEASES | sed -e 's/ /\\n/g'); do\n             git checkout \"$version\"\n+            while ! nix-build -A tools -A cached nix; do; done"
  },
  {
    "id" : "08a48165-b0a4-42da-beef-9454edcd1798",
    "prId" : 2968,
    "comments" : [
      {
        "id" : "bec172f8-0e56-4a26-865e-c837a62408cd",
        "parentId" : null,
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "AFAICT the script really only configures Bazel for pushing, and this job doesn't need to push.",
        "createdAt" : "2019-09-20T13:38:27Z",
        "updatedAt" : "2019-09-23T21:05:28Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "caa0fdeb-ad4e-44a9-9a6a-3c95c1973c6b",
        "parentId" : "bec172f8-0e56-4a26-865e-c837a62408cd",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Sounds right to me :+1:",
        "createdAt" : "2019-09-21T05:33:37Z",
        "updatedAt" : "2019-09-23T21:05:28Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "f52e8ccbd305580a00451992a0c17ce2136f1396",
    "line" : 8,
    "diffHunk" : "@@ -33,11 +33,6 @@ jobs:\n       - checkout: self\n       - bash: ci/dev-env-install.sh\n         displayName: 'Build/Install the Developer Environment'\n-      - bash: ci/configure-bazel.sh\n-        displayName: 'Configure Bazel'\n-        env:\n-          IS_FORK: $(System.PullRequest.IsFork)\n-          GOOGLE_APPLICATION_CREDENTIALS_CONTENT: $(GOOGLE_APPLICATION_CREDENTIALS_CONTENT)"
  },
  {
    "id" : "e19b48be-1029-4e1c-b79b-6e4e711539ab",
    "prId" : 2263,
    "comments" : [
      {
        "id" : "86341c0d-385f-4d67-b9ec-58d0f2d3ac9f",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "Where is this magic number coming from? Is it the ID of our blog? Same for `blog_author_id` below/",
        "createdAt" : "2019-07-23T13:35:17Z",
        "updatedAt" : "2019-07-23T13:46:18Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "7cbfb904-d5d4-4ae9-b777-88dc874bf78f",
        "parentId" : "86341c0d-385f-4d67-b9ec-58d0f2d3ac9f",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "Yes, id of our blog and blog author, respectively. I've added a line of comment to clarify.",
        "createdAt" : "2019-07-23T13:46:48Z",
        "updatedAt" : "2019-07-23T13:46:48Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "bb2ad6f4b4ab89861f0be5c40b9ebc1469f3e1a2",
    "line" : null,
    "diffHunk" : "@@ -101,10 +103,34 @@ jobs:\n           aws cloudfront create-invalidation \\\n                          --distribution-id E1U753I56ERH55 \\\n                          --paths '/*'\n+          echo \"Publishing $LATEST to Hubspot...\"\n+          DESCRIPTION_MD=\"$(cat $GH_RESP | jq -r '. | map(select(.tag_name=\"'$LATEST'\"))[0].body')\"\n+          DESCRIPTION=$(curl -s -XPOST 'https://api.github.com/markdown/raw' -H 'Content-Type: text/plain' -d\"$DESCRIPTION_MD\" | jq -sR .)\n+          DATE=\"$(date -d $(cat $GH_RESP | jq -r '. | map(select(.tag_name=\"'$LATEST'\"))[0].published_at') +%s)000\"\n+          BLOG=11411412838"
  },
  {
    "id" : "3a4f6cdb-d98f-4a40-97bf-ae6e30c6a0f9",
    "prId" : 2090,
    "comments" : [
      {
        "id" : "ff3cbdcc-8883-42b5-909f-72b1636e23b9",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "I think we still need the `yarn compile` step.",
        "createdAt" : "2019-07-10T12:17:11Z",
        "updatedAt" : "2019-07-10T12:27:01Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "239c8fa8-21d3-48a4-ab61-06e3c3aed4c8",
        "parentId" : "ff3cbdcc-8883-42b5-909f-72b1636e23b9",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "Good point, will add that.",
        "createdAt" : "2019-07-10T12:19:46Z",
        "updatedAt" : "2019-07-10T12:27:01Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "c1fd2aceba15ee036afbb7ee56d9566c5d8b194d",
    "line" : 8,
    "diffHunk" : "@@ -177,10 +177,9 @@ jobs:\n             echo \"Publishing $GITHUB to VSCode Marketplace\"\n             git checkout $GITHUB\n             cd compiler/daml-extension\n-            yarn\n             # This produces out/src/extension.js\n-            yarn run compile\n-            vsce publish ${GITHUB#v} -p $MARKETPLACE_TOKEN\n+            bazel run @nodejs//:bin/yarn"
  },
  {
    "id" : "f18f6f7a-1521-48c3-8505-ebc70d1f137f",
    "prId" : 1838,
    "comments" : [
      {
        "id" : "28b0b148-bdd4-48a3-841b-73572f9035aa",
        "parentId" : null,
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "```\r\nline 22: unexpected EOF while looking for matching `\"'\r\n```\r\nhttps://dev.azure.com/digitalasset/daml/_build/results?buildId=9529&view=logs",
        "createdAt" : "2019-06-24T13:21:40Z",
        "updatedAt" : "2019-06-24T13:21:41Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "6692938000e465846f631fd5c780c03bf1125ca1",
    "line" : 4,
    "diffHunk" : "@@ -144,6 +144,7 @@ jobs:\n               echo \"FROM openjdk:8u212-alpine\" >> Dockerfile\n               echo \"RUN apk add curl bash\" >> Dockerfile\n               echo \"RUN curl https://get.daml.com | sh -s ${version#v}\" >> Dockerfile\n+              echo \"ENV PATH=\"~/.daml/bin:${PATH}\" >> Dockerfile"
  },
  {
    "id" : "09f4d860-de46-417c-9c38-4ea923d4fb66",
    "prId" : 1811,
    "comments" : [
      {
        "id" : "1fc01029-48c5-4aa1-9b89-33e86fa22cfc",
        "parentId" : null,
        "author" : {
          "login" : "ndmitchell",
          "name" : "Neil Mitchell",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1651197?u=2a7f401a0bc6c1e722d5fbecc923715861c4567c&v=4"
        },
        "body" : "Should the curl not be outside the loop",
        "createdAt" : "2019-06-21T16:50:46Z",
        "updatedAt" : "2019-06-21T18:18:24Z",
        "lastEditedBy" : {
          "login" : "ndmitchell",
          "name" : "Neil Mitchell",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1651197?u=2a7f401a0bc6c1e722d5fbecc923715861c4567c&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "e52c8354-cfd7-4a02-a394-2fb6725e72c6",
        "parentId" : "1fc01029-48c5-4aa1-9b89-33e86fa22cfc",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "Right now the entire line is version-specific, but yes, the `curl` bit could be lifted out of the loop. Will do, thanks.",
        "createdAt" : "2019-06-21T17:40:26Z",
        "updatedAt" : "2019-06-21T18:18:24Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "d4b7182a73d21c66155119b2fcf3f0dbe5c92bd3",
    "line" : null,
    "diffHunk" : "@@ -118,3 +118,37 @@ jobs:\n                --data \"{\\\"text\\\":\\\"<!here> *FAILED* Daily Docs: <https://dev.azure.com/digitalasset/daml/_build/results?buildId=$(Build.BuildId)|$MESSAGE>\\n\\\"}\" \\\n                $(Slack.URL)\n         condition: and(failed(), eq(variables['Build.SourceBranchName'], 'master'))\n+\n+  - job: docker_image\n+    timeoutInMinutes: 20\n+    pool:\n+      name: 'linux-pool'\n+    steps:\n+      - checkout: self\n+      - bash: |\n+          set -euo pipefail\n+\n+          eval \"$(dev-env/bin/dade-assist)\"\n+          echo $DOCKER_PASSWORD | docker login --username $DOCKER_LOGIN --password-stdin\n+          RELEASES=$(curl https://api.github.com/repos/digital-asset/daml/releases -s | jq -r '. | map(select(.prerelease == false)) | map(.tag_name)[]')\n+          DIR=$(pwd)\n+          for version in $(echo $RELEASES | sed -e 's/ /\\n/g'); do\n+            EXISTS=$(curl 'https://hub.docker.com/v2/repositories/digitalasset/daml-sdk/tags/?page_size=10000' -s | jq -r '[.results[].name == \"${version#v}\"] | any')"
  },
  {
    "id" : "f1f841c6-f0d0-4265-a7bc-5e0b6ae1cb8f",
    "prId" : 1811,
    "comments" : [
      {
        "id" : "331bddec-0ec9-45a2-8618-81b2c1f2843a",
        "parentId" : null,
        "author" : {
          "login" : "ndmitchell",
          "name" : "Neil Mitchell",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1651197?u=2a7f401a0bc6c1e722d5fbecc923715861c4567c&v=4"
        },
        "body" : "Comment is just to try it out?",
        "createdAt" : "2019-06-21T16:51:09Z",
        "updatedAt" : "2019-06-21T18:18:24Z",
        "lastEditedBy" : {
          "login" : "ndmitchell",
          "name" : "Neil Mitchell",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1651197?u=2a7f401a0bc6c1e722d5fbecc923715861c4567c&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "5a5d7c43-b10d-4229-b232-48d1a8e1827e",
        "parentId" : "331bddec-0ec9-45a2-8618-81b2c1f2843a",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "Yes, as is the echo on the next line.",
        "createdAt" : "2019-06-21T17:41:49Z",
        "updatedAt" : "2019-06-21T18:18:24Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "d4b7182a73d21c66155119b2fcf3f0dbe5c92bd3",
    "line" : null,
    "diffHunk" : "@@ -118,3 +118,37 @@ jobs:\n                --data \"{\\\"text\\\":\\\"<!here> *FAILED* Daily Docs: <https://dev.azure.com/digitalasset/daml/_build/results?buildId=$(Build.BuildId)|$MESSAGE>\\n\\\"}\" \\\n                $(Slack.URL)\n         condition: and(failed(), eq(variables['Build.SourceBranchName'], 'master'))\n+\n+  - job: docker_image\n+    timeoutInMinutes: 20\n+    pool:\n+      name: 'linux-pool'\n+    steps:\n+      - checkout: self\n+      - bash: |\n+          set -euo pipefail\n+\n+          eval \"$(dev-env/bin/dade-assist)\"\n+          echo $DOCKER_PASSWORD | docker login --username $DOCKER_LOGIN --password-stdin\n+          RELEASES=$(curl https://api.github.com/repos/digital-asset/daml/releases -s | jq -r '. | map(select(.prerelease == false)) | map(.tag_name)[]')\n+          DIR=$(pwd)\n+          for version in $(echo $RELEASES | sed -e 's/ /\\n/g'); do\n+            EXISTS=$(curl 'https://hub.docker.com/v2/repositories/digitalasset/daml-sdk/tags/?page_size=10000' -s | jq -r '[.results[].name == \"${version#v}\"] | any')\n+            if [ \"$EXISTS\" == \"true\" ]; then\n+              echo \"${version#v} already exists, skipping.\"\n+            else\n+              echo \"Building version ${version#v}...\"\n+              cd $(mktemp -d)\n+              echo \"FROM openjdk:8u212-alpine\" >> Dockerfile\n+              echo \"RUN apk add curl bash\" >> Dockerfile\n+              echo \"RUN curl https://get.daml.com | sh -s ${version#v}\" >> Dockerfile\n+              docker build -t digitalasset/daml:${version#v} .\n+              #docker push digitalasset/daml:${version#v}"
  },
  {
    "id" : "b70f7204-e31b-49fa-b9aa-8a4a6a8af573",
    "prId" : 1797,
    "comments" : [
      {
        "id" : "76c0cd3f-ff5a-49fb-a11d-8dca6b761115",
        "parentId" : null,
        "author" : {
          "login" : "neil-da",
          "name" : "Neil Mitchell",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/35463327?u=0eb1719958bc6e449ec5e7df3a312fa566f5055d&v=4"
        },
        "body" : "Did you intend to push this?",
        "createdAt" : "2019-06-21T13:06:16Z",
        "updatedAt" : "2019-06-21T13:10:18Z",
        "lastEditedBy" : {
          "login" : "neil-da",
          "name" : "Neil Mitchell",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/35463327?u=0eb1719958bc6e449ec5e7df3a312fa566f5055d&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "2283b660-47fe-4e82-898a-7f744f78dee0",
        "parentId" : "76c0cd3f-ff5a-49fb-a11d-8dca6b761115",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "Nope; removed. Thanks for catching it!",
        "createdAt" : "2019-06-21T16:49:14Z",
        "updatedAt" : "2019-06-21T16:49:15Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "09bafc634e8583916c42f61559bcd3c72bfa8e8e",
    "line" : null,
    "diffHunk" : "@@ -92,6 +103,7 @@ jobs:\n           echo \"Pushing to S3 bucket...\"\n           aws s3 sync $DOCDIR \\\n                       s3://docs-daml-com/ \\\n+                      --dryrun \\"
  },
  {
    "id" : "eb85fa6c-346c-41a8-89ad-6fa32e2eb3c2",
    "prId" : 1568,
    "comments" : [
      {
        "id" : "e6a566d9-34d6-466e-98c8-12abf5f8dec9",
        "parentId" : null,
        "author" : {
          "login" : "bolek-wisniewski",
          "name" : "Bolek@DigitalAsset",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/25302921?u=0ebe382413a7e394adf0aa30927d2c94e4882778&v=4"
        },
        "body" : "will add back after testing",
        "createdAt" : "2019-06-07T18:51:49Z",
        "updatedAt" : "2019-06-11T18:23:19Z",
        "lastEditedBy" : {
          "login" : "bolek-wisniewski",
          "name" : "Bolek@DigitalAsset",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/25302921?u=0ebe382413a7e394adf0aa30927d2c94e4882778&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "33957a6d478ba3815e81a67c338bbe4c3a486f19",
    "line" : null,
    "diffHunk" : "@@ -6,96 +6,106 @@ trigger: none\n pr: none\n \n jobs:\n-  - job: docs\n-    timeoutInMinutes: 50\n+  - job: latest_webide\n+    timeoutInMinutes: 20\n     pool:\n       name: 'linux-pool'\n     steps:\n       - checkout: self\n-      - bash: ci/dev-env-install.sh\n-        displayName: 'Build/Install the Developer Environment'\n-      - bash: ci/configure-bazel.sh\n-        displayName: 'Configure Bazel'\n+      - bash: ci/check-update-build-webide.sh\n+        displayName: 'Check for updated SDK and build webide with latest version'\n         env:\n-          IS_FORK: $(System.PullRequest.IsFork)\n           GOOGLE_APPLICATION_CREDENTIALS_CONTENT: $(GOOGLE_APPLICATION_CREDENTIALS_CONTENT)\n-      - bash: |\n-          set -euo pipefail\n+  # - job: docs"
  },
  {
    "id" : "4a95b6e0-f59b-414a-bce0-7d1e63be9784",
    "prId" : 1287,
    "comments" : [
      {
        "id" : "54368d6d-4820-4b4e-bcc5-9ddc5533c685",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Does AWS maintain the 404 page for us or why is this step no longer necessary?",
        "createdAt" : "2019-05-21T14:26:58Z",
        "updatedAt" : "2019-05-21T21:38:46Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "0a462768-be00-4cd2-9469-8b464e757e13",
        "parentId" : "54368d6d-4820-4b4e-bcc5-9ddc5533c685",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "I assume it does, at it is not mentioned anywhere in [the current deployment script](https://github.com/digital-asset/daml/blob/d9b35ad1abe9d324a3860f8d1542fd4a48c5d458/docs/scripts/publish.sh), even though it does delete all extraneous files from the bucket (`--delete` flag). Either way, the point of that file was that the GCS bucket had a special rule to redirect all missing requests to the bucket object named `/not-found.html`; without that rule that object has very little use at it would require people to explicitly visit https://docs.daml.com/not-found.html to see it.",
        "createdAt" : "2019-05-21T14:41:25Z",
        "updatedAt" : "2019-05-21T21:38:46Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "9e553e32-c419-4fa0-b614-0a7fe02036ae",
        "parentId" : "54368d6d-4820-4b4e-bcc5-9ddc5533c685",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Sounds good, thanks for the explanation!",
        "createdAt" : "2019-05-21T14:42:29Z",
        "updatedAt" : "2019-05-21T21:38:46Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "dff30da77abc117ebe3d9849c394da374f6fde9d",
    "line" : 13,
    "diffHunk" : "@@ -66,16 +66,15 @@ jobs:\n             mkdir -p $DOCDIR/${version#v}\n             tar xzf bazel-genfiles/docs/html.tar.gz --strip-components=1 -C $DOCDIR/${version#v} >$LOG 2>&1\n           done\n-          echo \"Maintain proper 404 page\""
  }
]