[
  {
    "id" : "a07e4277-bf80-4726-9aba-5349fe9ec588",
    "prId" : 6105,
    "comments" : [
      {
        "id" : "7440352f-a425-40f7-bc9f-8290c2af4f82",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "To make it a bit more apparent that we convert the LF module name to a GHC module name the same way both times:\r\n```suggestion\r\n            [ ( Ghc.mkModuleName s\r\n              , Ghc.mkModuleName (Ghc.moduleNameString prefix ++ \".\" ++ s))\r\n            | m <- modules\r\n            , s = T.unpack (LF.moduleNameString m)\r\n            ]\r\n```",
        "createdAt" : "2020-05-28T09:50:26Z",
        "updatedAt" : "2020-05-28T10:13:30Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "79647101f49fbd42145e2372c71626b259193f63",
    "line" : null,
    "diffHunk" : "@@ -27,18 +36,30 @@ import System.FilePath\n data PackageDbMetadata = PackageDbMetadata\n   { directDependencies :: [Ghc.UnitId]\n   -- ^ Unit ids of direct dependencies. These are exposed by default\n+  , moduleRenamings :: Map Ghc.UnitId (Ghc.ModuleName, [LF.ModuleName])\n+  -- ^ Map frm GHC unit id to the prefix and a list of all modules in this package.\n+  -- We do not bother differentiating between exposed and unexposed modules\n+  -- since we already warn on non-exposed modules anyway and this\n+  -- is intended for data-dependencies where everything is exposed.\n   } deriving Generic\n \n+renamingToFlag :: Ghc.UnitId -> Ghc.ModuleName -> [LF.ModuleName] -> PackageFlag\n+renamingToFlag unitId prefix modules =\n+    ExposePackage\n+        (\"Prefix \" <> Ghc.unitIdString unitId <> \" with \" <> Ghc.moduleNameString prefix)\n+        (UnitIdArg unitId)\n+        ModRenaming\n+          { modRenamingWithImplicit = False\n+          , modRenamings =\n+            [ ( Ghc.mkModuleName (T.unpack $ LF.moduleNameString m)\n+              , Ghc.mkModuleName (intercalate \".\" (Ghc.moduleNameString prefix : map T.unpack (LF.unModuleName m))))\n+            | m <- modules\n+            ]"
  }
]