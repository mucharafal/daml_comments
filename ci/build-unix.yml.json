[
  {
    "id" : "6f59d99a-ec3a-4522-b335-bde55212bec9",
    "prId" : 7196,
    "comments" : [
      {
        "id" : "1ecbfe07-0944-45ce-aa9b-f15891b9e659",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "How do you feel about just calling this `daml-script-*.jar`? Matches the CLI command and the name of the feature. (The former also applies to the JSON API but the latter doesn’t so I think this doesn’t invalidate the point)",
        "createdAt" : "2020-08-20T15:11:25Z",
        "updatedAt" : "2020-08-20T16:46:15Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "e69210dd-08dc-42bb-92a9-8aa8b7699f28",
        "parentId" : "1ecbfe07-0944-45ce-aa9b-f15891b9e659",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "No feeling on that, I'll make the change.",
        "createdAt" : "2020-08-20T16:41:00Z",
        "updatedAt" : "2020-08-20T16:46:15Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "3276d4bfcefbbc169fdeca9d78ca07bbdd207e2d",
    "line" : null,
    "diffHunk" : "@@ -92,6 +92,16 @@ steps:\n       bazel build //ledger-service/http-json:http-json-binary_deploy.jar\n       cp bazel-bin/ledger-service/http-json/http-json-binary_deploy.jar $(Build.StagingDirectory)/$JSON_API\n       echo \"##vso[task.setvariable variable=json-api;isOutput=true]$JSON_API\"\n+\n+      TRIGGER=trigger-runner-${{parameters.release_tag}}.jar\n+      bazel build //triggers/runner:trigger-runner_deploy.jar\n+      cp bazel-bin/triggers/runner/trigger-runner_deploy.jar $(Build.StagingDirectory)/$TRIGGER\n+      echo \"##vso[task.setvariable variable=trigger-runner;isOutput=true]$TRIGGER\"\n+\n+      SCRIPT=script-runner-${{parameters.release_tag}}.jar"
  },
  {
    "id" : "9f6f784e-78da-411b-9f2f-d013d32e1284",
    "prId" : 7196,
    "comments" : [
      {
        "id" : "f16594e4-b59d-4dd0-82d3-69df201899d1",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Similar question here, how about `daml-trigger-*.jar` or `daml-trigger-runner-*.jar` if we want to reserve the former for the trigger service.",
        "createdAt" : "2020-08-20T15:11:57Z",
        "updatedAt" : "2020-08-20T16:46:15Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "e7080c1d-3aa0-4b98-a28a-1eae2c0a82b9",
        "parentId" : "f16594e4-b59d-4dd0-82d3-69df201899d1",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "I have a slight preference for keeping our options open with the service, as that is the long-term one, but ultimately your call. I'll change to `daml-trigger-runner` for now.",
        "createdAt" : "2020-08-20T16:41:53Z",
        "updatedAt" : "2020-08-20T16:46:15Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "3400f9dc-5551-4048-9078-0e48341debde",
        "parentId" : "f16594e4-b59d-4dd0-82d3-69df201899d1",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "yeah I also prefer the `daml-trigger-runner` option, thanks!",
        "createdAt" : "2020-08-20T16:43:54Z",
        "updatedAt" : "2020-08-20T16:46:15Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "3276d4bfcefbbc169fdeca9d78ca07bbdd207e2d",
    "line" : null,
    "diffHunk" : "@@ -92,6 +92,16 @@ steps:\n       bazel build //ledger-service/http-json:http-json-binary_deploy.jar\n       cp bazel-bin/ledger-service/http-json/http-json-binary_deploy.jar $(Build.StagingDirectory)/$JSON_API\n       echo \"##vso[task.setvariable variable=json-api;isOutput=true]$JSON_API\"\n+\n+      TRIGGER=trigger-runner-${{parameters.release_tag}}.jar"
  },
  {
    "id" : "ef88a6aa-b97a-4235-b491-d9779a46a54f",
    "prId" : 5477,
    "comments" : [
      {
        "id" : "389c750d-53df-4863-9a02-b17fd1994c04",
        "parentId" : null,
        "author" : {
          "login" : "gerolf-da",
          "name" : "Gerolf Seitz",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/29121423?u=f683aa614e742c653ae8c01b194905dcdef6e974&v=4"
        },
        "body" : "I'm not going to ask why `eq(variables['Agent.OS'], 'Linux')` alone is not sufficient.",
        "createdAt" : "2020-04-07T19:49:11Z",
        "updatedAt" : "2020-04-07T19:49:15Z",
        "lastEditedBy" : {
          "login" : "gerolf-da",
          "name" : "Gerolf Seitz",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/29121423?u=f683aa614e742c653ae8c01b194905dcdef6e974&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "8e9c681f-0f00-4220-9556-614c1e4fe5cc",
        "parentId" : "389c750d-53df-4863-9a02-b17fd1994c04",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "That will still run it if the step before fails afaik.",
        "createdAt" : "2020-04-07T19:51:38Z",
        "updatedAt" : "2020-04-07T19:51:39Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "820b9e83-f0e6-4fed-8c2f-0cca90983b21",
        "parentId" : "389c750d-53df-4863-9a02-b17fd1994c04",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "Yes: the default implicit condition if you don't specify one is `succeeded()`, but if you do specify one it replaces that.",
        "createdAt" : "2020-04-08T09:07:57Z",
        "updatedAt" : "2020-04-08T09:07:58Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "772d15392a133c713ebcfd1e6c6306acf46426fa",
    "line" : 4,
    "diffHunk" : "@@ -22,6 +22,7 @@ steps:\n \n   - bash: ./fmt.sh --test\n     displayName: 'Platform-agnostic lints and checks'\n+    condition: and(succeeded(), eq(variables['Agent.OS'], 'Linux'))"
  },
  {
    "id" : "3880d753-944d-4ee4-b8db-56c61caffe65",
    "prId" : 5012,
    "comments" : [
      {
        "id" : "0b2c7be9-7fce-4f02-959c-485a611afeed",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "In the example at https://docs.microsoft.com/en-us/azure/devops/pipelines/process/conditions?view=azure-devops&tabs=yaml#use-a-template-parameter-as-part-of-a-condition the parameter is quoted. I guess that doesn’t matter?",
        "createdAt" : "2020-03-16T10:47:31Z",
        "updatedAt" : "2020-03-16T10:48:35Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "5d311e08-7d0f-439e-9f47-0d21ee685c55",
        "parentId" : "0b2c7be9-7fce-4f02-959c-485a611afeed",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "It's a trap! See #4745.",
        "createdAt" : "2020-03-16T10:50:22Z",
        "updatedAt" : "2020-03-16T10:50:22Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "e5c4a30e-d7b1-4cf8-8e13-c18f5714c581",
        "parentId" : "0b2c7be9-7fce-4f02-959c-485a611afeed",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : ":man_facepalming: ",
        "createdAt" : "2020-03-16T10:54:45Z",
        "updatedAt" : "2020-03-16T10:54:45Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "877a403dca2944b4647f6514e9457722afe3aa92",
    "line" : 7,
    "diffHunk" : "@@ -22,7 +22,9 @@ steps:\n \n   - bash: ./fmt.sh --test\n     displayName: 'Platform-agnostic lints and checks'\n-    condition: and(succeeded(), eq(variables['Agent.OS'], 'Linux'))\n+    # Temporary hack for 0.13.55. Should be removed once published.\n+    condition: and(succeeded(), eq(variables['Agent.OS'], 'Linux'),\n+                   ne(${{parameters.is_release}}, 'true'))"
  },
  {
    "id" : "e7d76c03-6236-4e48-856c-66457691afd6",
    "prId" : 413,
    "comments" : [
      {
        "id" : "1ed9d012-429c-4de0-a2b5-955d592cb91d",
        "parentId" : null,
        "author" : {
          "login" : "moritzkiefer-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/45630097?u=88b1986f5b2d192d97f54101aaa165147493ebdc&v=4"
        },
        "body" : "Is there a reason to make a lightweight tag here rather than an annotated tag? Quoting `man git-tag`:\r\n```\r\n       Annotated tags are meant for release while lightweight tags are meant\r\n       for private or temporary object labels.\r\n```\r\n\r\nAlso please update the release instructions in `release/RELEASE.md` and remove the tagging step.",
        "createdAt" : "2019-04-11T18:37:23Z",
        "updatedAt" : "2019-04-12T09:46:26Z",
        "lastEditedBy" : {
          "login" : "moritzkiefer-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/45630097?u=88b1986f5b2d192d97f54101aaa165147493ebdc&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "7edd1b9b-1aa2-4ed3-933c-08cd40acf5c2",
        "parentId" : "1ed9d012-429c-4de0-a2b5-955d592cb91d",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "Main reason was I did not have any useful additional information to put in the tag, so I did not see the benefit. I'll mirror the instructions in RELEASE.md.",
        "createdAt" : "2019-04-12T09:29:02Z",
        "updatedAt" : "2019-04-12T09:46:26Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "7aabefc4b888827c86900ea64a0ab34ec216c421",
    "line" : null,
    "diffHunk" : "@@ -40,3 +44,20 @@ steps:\n     env:\n       # to connect to bintray\n       JFROG_CONFIG_CONTENT: $(JFROG_CONFIG_CONTENT)\n+  - bash: |\n+      set -euxo pipefail\n+      git tag v$(release_tag)"
  },
  {
    "id" : "42feb0c1-de64-48f3-8d22-f0dde7832f26",
    "prId" : 413,
    "comments" : [
      {
        "id" : "463cf581-1e7d-43b0-a30b-cf6cdb3ff333",
        "parentId" : null,
        "author" : {
          "login" : "moritzkiefer-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/45630097?u=88b1986f5b2d192d97f54101aaa165147493ebdc&v=4"
        },
        "body" : "I think our builders are no longer completely ephemeral right? So maybe a `cp` would be better?",
        "createdAt" : "2019-04-11T18:38:25Z",
        "updatedAt" : "2019-04-12T09:46:26Z",
        "lastEditedBy" : {
          "login" : "moritzkiefer-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/45630097?u=88b1986f5b2d192d97f54101aaa165147493ebdc&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "c1461654-70ec-41a4-a9b1-32dcf26b5665",
        "parentId" : "463cf581-1e7d-43b0-a30b-cf6cdb3ff333",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "Good point. Also, probably a good idea to `rm` afterwards. I'll add a cleanup step.",
        "createdAt" : "2019-04-12T09:26:21Z",
        "updatedAt" : "2019-04-12T09:46:26Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "7aabefc4b888827c86900ea64a0ab34ec216c421",
    "line" : null,
    "diffHunk" : "@@ -40,3 +44,20 @@ steps:\n     env:\n       # to connect to bintray\n       JFROG_CONFIG_CONTENT: $(JFROG_CONFIG_CONTENT)\n+  - bash: |\n+      set -euxo pipefail\n+      git tag v$(release_tag)\n+      git push origin v$(release_tag)\n+      mv bazel-genfiles/release/sdk-release-tarball.tar.gz ./daml-sdk-$(release_tag)-${{ parameters.name }}.tar.gz"
  },
  {
    "id" : "495ff69c-6bf9-45a1-a085-3c6e7e535a1e",
    "prId" : 413,
    "comments" : [
      {
        "id" : "652e85ad-fd87-4475-b31a-3aa8ce064ad6",
        "parentId" : null,
        "author" : {
          "login" : "moritzkiefer-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/45630097?u=88b1986f5b2d192d97f54101aaa165147493ebdc&v=4"
        },
        "body" : "What exactly are the implications on the user name here?",
        "createdAt" : "2019-04-11T18:39:25Z",
        "updatedAt" : "2019-04-12T09:46:26Z",
        "lastEditedBy" : {
          "login" : "moritzkiefer-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/45630097?u=88b1986f5b2d192d97f54101aaa165147493ebdc&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "62206b66-d1b1-493e-a866-78593aa80a01",
        "parentId" : "652e85ad-fd87-4475-b31a-3aa8ce064ad6",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "I know it looks like one, but this is not a username, this is the name of an Azure \"connection service\" to github. It has my name because I created it; it's not entirely clear to me how much it depends on my account and what happens the day my account disappears.\r\n\r\nI could create another connection service in Azure with a more opaque name. However, despite having spent significant time looking into it, I have not found any way to create an Azure connection that is not linked to my account, so I figured we may as well have that explicitly in the name.",
        "createdAt" : "2019-04-12T09:25:42Z",
        "updatedAt" : "2019-04-12T09:46:26Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "7aabefc4b888827c86900ea64a0ab34ec216c421",
    "line" : 23,
    "diffHunk" : "@@ -40,3 +44,20 @@ steps:\n     env:\n       # to connect to bintray\n       JFROG_CONFIG_CONTENT: $(JFROG_CONFIG_CONTENT)\n+  - bash: |\n+      set -euxo pipefail\n+      git tag v$(release_tag)\n+      git push origin v$(release_tag)\n+      mv bazel-genfiles/release/sdk-release-tarball.tar.gz ./daml-sdk-$(release_tag)-${{ parameters.name }}.tar.gz\n+    condition: eq(variables['has_released'], 'true')\n+  - task: GitHubRelease@0\n+    condition: eq(variables['has_released'], 'true')\n+    inputs:\n+      gitHubConnection: 'garyverhaegen-da'"
  },
  {
    "id" : "23aad738-a14e-45b3-96a8-fd04ec635cae",
    "prId" : 192,
    "comments" : [
      {
        "id" : "99833d4a-de3b-41a1-a73a-4acb8b6cf41c",
        "parentId" : null,
        "author" : {
          "login" : "flokli",
          "name" : "Florian Klink",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/183879?u=41f435d31792cbf91592f78757b981eb8e821fc6&v=4"
        },
        "body" : "```suggestion\r\n    displayName: 'Build/Install the Developer Environment'\r\n```",
        "createdAt" : "2019-04-04T12:46:37Z",
        "updatedAt" : "2019-04-04T12:48:53Z",
        "lastEditedBy" : {
          "login" : "flokli",
          "name" : "Florian Klink",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/183879?u=41f435d31792cbf91592f78757b981eb8e821fc6&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "9c53813123703f17730b56639ec081f0da211afe",
    "line" : null,
    "diffHunk" : "@@ -2,13 +2,14 @@ steps:\n   - checkout: self\n     fetchDepth: 2 # speed up checkout from 30sec to 7sec\n \n-  - bash: ci/install-nix.sh\n-    displayName: 'Install Nix'\n+  - bash: ci/dev-env-install.sh\n+    displayName: 'Install the Developer Environment'"
  }
]