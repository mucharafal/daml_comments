[
  {
    "id" : "fd413b86-1979-4573-909e-c6683d6b1e22",
    "prId" : 7731,
    "comments" : [
      {
        "id" : "99bf8738-04e5-4526-ae9e-69a7836ebdde",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "You are basically reimplementing what `http-conduit` gives you. With that, you would end up with something like\r\n```\r\nrunResourceT $ HTTP.responseBody resp  $$ sinkFile (tmp </> …)`\r\n```\r\n\r\nI don’t particularly mind that so feel free to ignore that suggestion or to address it separately.",
        "createdAt" : "2020-10-19T11:17:03Z",
        "updatedAt" : "2020-10-19T16:41:05Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "c8504939-b9bb-4c24-a95c-cc5aaa6a6313",
        "parentId" : "99bf8738-04e5-4526-ae9e-69a7836ebdde",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "I did come upon references to `conduit`, but it seemed to add a lot of concepts I do not know yet. I imagine it's not a lot of complexity once you know them, but this is also not very complex as it stands. I tend to be a bit reluctant to add dependencies for a single function. I'll take a closer look at conduit if it comes up again.",
        "createdAt" : "2020-10-19T16:36:12Z",
        "updatedAt" : "2020-10-19T16:41:05Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "18539687c40b5073ad751c690161bd6403d5927e",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +283,287 @@              let req = req' { HTTP.requestHeaders = [(\"User-Agent\", \"DAML cron (team-daml-language@digitalasset.com)\")] }\n              HTTP.withResponse req manager (\\resp -> do\n                  let body = HTTP.responseBody resp\n                  IO.withBinaryFile (tmp </> (last $ Network.URI.pathSegments url)) IO.AppendMode (\\handle -> do\n                      let loop = do"
  },
  {
    "id" : "b49d0d42-7d23-4781-9b98-9625924de929",
    "prId" : 7731,
    "comments" : [
      {
        "id" : "c4d90941-197a-4731-89ce-fec0c77548ce",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Maybe worth updating that email address but I guess it also doesn’t matter.",
        "createdAt" : "2020-10-19T11:17:21Z",
        "updatedAt" : "2020-10-19T16:41:05Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "06bb89d2-6430-48e3-be4d-b9124154a78d",
        "parentId" : "c4d90941-197a-4731-89ce-fec0c77548ce",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "What would you suggest instead? AFAIK this one still works and will still reach the relevant people.",
        "createdAt" : "2020-10-19T16:36:28Z",
        "updatedAt" : "2020-10-19T16:41:05Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "ef086068-0d41-4e26-8c5b-56f2eea0d879",
        "parentId" : "c4d90941-197a-4731-89ce-fec0c77548ce",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "afaik we are both not on this one `team-daml-app-runtime@digitalasset.com` should have everyone in the team.",
        "createdAt" : "2020-10-19T16:41:08Z",
        "updatedAt" : "2020-10-19T16:41:08Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "18539687c40b5073ad751c690161bd6403d5927e",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +281,285 @@          (do\n              req' <- HTTP.parseRequest (show url)\n              let req = req' { HTTP.requestHeaders = [(\"User-Agent\", \"DAML cron (team-daml-language@digitalasset.com)\")] }\n              HTTP.withResponse req manager (\\resp -> do\n                  let body = HTTP.responseBody resp"
  },
  {
    "id" : "bc04a463-7b65-49b3-90ed-6c51cf5a8277",
    "prId" : 7696,
    "comments" : [
      {
        "id" : "bf16d857-3739-4c8c-9958-f8f68d32222f",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "`forConcurrently_` will spawn an unbounded number of threads. I guess we don’t care since the number of assets is small? If we do care, the easiest solution is usually just to throw a semaphore around the map function you pass to `forConcurrently_`.",
        "createdAt" : "2020-10-15T10:55:00Z",
        "updatedAt" : "2020-10-15T10:56:30Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "abd02cc8-9071-4424-aeba-75e678ecd430",
        "parentId" : "bf16d857-3739-4c8c-9958-f8f68d32222f",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "The Bash code this replaces was also unbounded, so at least this is not getting worse. 🙂\r\n\r\nI'm not concerned; we're not going to have a very big number of files anyway. If you are concerned, I can add a semaphore with, say, 30 slots, so it won't change anything for the happy path (16 assets atm) but will shield against future issues. I'd prefer to do that in a future PR, though.",
        "createdAt" : "2020-10-15T11:56:07Z",
        "updatedAt" : "2020-10-15T11:56:07Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "5e49ccf685fe01d47ba85c7cc5215c6dc3607d86",
    "line" : 27,
    "diffHunk" : "@@ -1,1 +271,275 @@download_assets :: FilePath -> GitHubRelease -> IO ()\ndownload_assets tmp release = do\n    Control.Concurrent.Async.forConcurrently_ (map uri $ assets release) (\\url -> do\n        shell_ $ unlines [\"bash -c '\",\n            \"set -euo pipefail\","
  },
  {
    "id" : "3fe4dc63-194e-4831-bab3-5efee000b845",
    "prId" : 7696,
    "comments" : [
      {
        "id" : "f9042c24-87fb-404c-9f0e-bbfca15f5465",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Seems like we could just call `wget` directly and  `-o` to avoid the `cd` but I’ll leave that up to you.",
        "createdAt" : "2020-10-15T10:56:21Z",
        "updatedAt" : "2020-10-15T10:56:30Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "f5520ac8-9999-45fc-ac8b-80f454f3418b",
        "parentId" : "f9042c24-87fb-404c-9f0e-bbfca15f5465",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "ì'm planning to remove wget in my next PR (perhaps next-next now, if the next one is the semaphore), so I don't see much point in trying to make the Bash code nicer. I would point though that we are not in the tmpdir in terms of Haskell process cwd as far as I can tell, so the `cd` there is not superfluous as it stands.",
        "createdAt" : "2020-10-15T11:57:35Z",
        "updatedAt" : "2020-10-15T11:57:35Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "5e49ccf685fe01d47ba85c7cc5215c6dc3607d86",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +276,280 @@            \"eval \\\"$(dev-env/bin/dade assist)\\\"\",\n            \"cd \\\"\" <> tmp <> \"\\\"\",\n            \"wget --quiet \\\"\" <> show url <> \"\\\"\",\n            \"'\"])\n"
  },
  {
    "id" : "367f043d-fd17-4ab5-a6cf-f1b48ed5c8ea",
    "prId" : 7690,
    "comments" : [
      {
        "id" : "234efbf0-45c1-4a21-8ce3-e925d200b31d",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "I guess cutting of within the pagination already is not worth the complexity since it’s fast enough?",
        "createdAt" : "2020-10-15T07:20:16Z",
        "updatedAt" : "2020-10-15T10:12:57Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "0fb688e1-fcda-4d79-916a-c94e0fa8b284",
        "parentId" : "234efbf0-45c1-4a21-8ce3-e925d200b31d",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "Exactly.",
        "createdAt" : "2020-10-15T09:44:50Z",
        "updatedAt" : "2020-10-15T10:12:57Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "f67fe7b38bbe4aa91647520f20da0e3e6e55ed69",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +346,350 @@check_releases gcp_credentials bash_lib max_releases = do\n    releases' <- fetch_gh_paginated \"https://api.github.com/repos/digital-asset/daml/releases\"\n    let releases = case max_releases of\n                     Nothing -> releases'\n                     Just n -> take n releases'"
  },
  {
    "id" : "28e6c8a9-8cda-4043-9ef3-ae55328f04ef",
    "prId" : 7616,
    "comments" : [
      {
        "id" : "ff26acbe-bab2-4ffe-8ad2-dabc9ac704d2",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Seems pretty close to the point where you can just kill the bash script and call `gcs` directly (assuming you are running this in dev-env which seems like a reasonable assumption and is one that we make for lots of other tools). Doesn’t have to be in this PR.",
        "createdAt" : "2020-10-09T06:56:25Z",
        "updatedAt" : "2020-10-09T07:33:16Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "b9f0a4fb-f887-4c5c-ae67-9a5963622a8f",
        "parentId" : "ff26acbe-bab2-4ffe-8ad2-dabc9ac704d2",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "`gcs` is a [Bash function](https://github.com/digital-asset/daml/blob/master/ci/bash-lib.yml#L32-L51) so unless I'm missing something this is as close as I can get to calling it directly from Haskell.\r\n\r\nThis Bash function is needed by other Bash scripts so I don't think I could easily replace it with a Haskell version, and while I do believe its implementation is quite final at this point, I've been wrong about that before so not too keen on replicating the logic. I'll think about it a bit.",
        "createdAt" : "2020-10-09T10:00:14Z",
        "updatedAt" : "2020-10-09T10:00:14Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "211cd206-cd5d-43b9-be9b-2dfb112f0a96",
        "parentId" : "ff26acbe-bab2-4ffe-8ad2-dabc9ac704d2",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Oh I see, I missed the fact that this was a bash function. Make sense to keep it then.",
        "createdAt" : "2020-10-09T10:04:50Z",
        "updatedAt" : "2020-10-09T10:04:51Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "8991e6162889215df657db95e18f35a5a660ce3e",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +315,319 @@does_backup_exist :: String -> FilePath -> FilePath -> IO Bool\ndoes_backup_exist gcp_credentials bash_lib path = do\n    out <- shell $ unlines [\"bash -c '\",\n        \"set -euo pipefail\",\n        \"eval \\\"$(dev-env/bin/dade assist)\\\"\","
  },
  {
    "id" : "7ca30726-9892-4041-928d-5a436b54f8a4",
    "prId" : 7616,
    "comments" : [
      {
        "id" : "112f37f5-d38d-4f7e-bd4c-fa88d729d2fa",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Same here, the bash script doesn’t really do anyhing.",
        "createdAt" : "2020-10-09T06:56:37Z",
        "updatedAt" : "2020-10-09T07:33:16Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "8991e6162889215df657db95e18f35a5a660ce3e",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +333,337 @@        \"eval \\\"$(dev-env/bin/dade assist)\\\"\",\n        \"source \\\"\" <> bash_lib <> \"\\\"\",\n        \"gcs \\\"\" <> gcp_credentials <> \"\\\" cp \\\"\" <> local_path <> \"\\\" \\\"\" <> remote_path <> \"\\\"\",\n        \"'\"]\n"
  },
  {
    "id" : "e6dfaca9-bffa-4eea-9935-11be90bfa1bf",
    "prId" : 7586,
    "comments" : [
      {
        "id" : "bae32554-239a-4c3d-b99a-532074fdbd67",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Nice!",
        "createdAt" : "2020-10-07T08:49:11Z",
        "updatedAt" : "2020-10-07T09:49:02Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "8ff0427fc5bfa77ffc7bddd4d68161481ec41107",
    "line" : 75,
    "diffHunk" : "@@ -1,1 +197,201 @@        <$> (v JSON..: \"prerelease\")\n        <*> (version . Text.tail <$> v JSON..: \"tag_name\")\n        <*> (v JSON..: \"assets\")\n\ndata Version = Version Data.SemVer.Version"
  },
  {
    "id" : "629a1177-1460-4342-a64f-4d4eaad322b8",
    "prId" : 7585,
    "comments" : [
      {
        "id" : "8d5e76ed-901a-4b15-90fd-71c535339e4f",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Seems like there is an extra level of shells here. If you are calling `bash`, you don’t need `shell`.",
        "createdAt" : "2020-10-06T15:35:37Z",
        "updatedAt" : "2020-10-06T16:04:33Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "4ac57cdb-b0fb-4b6e-8154-2bb1be383918",
        "parentId" : "8d5e76ed-901a-4b15-90fd-71c535339e4f",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "I'm aware of the inefficiency here. `shell` is my own wrapper over `System.shell` (see lines 53 & 34), which happens to run `sh`, which would not run this script. I suppose it could be more efficient to just call `System.createProcess` here (and would allow me to pass in the current stdout directly, avoiding the buffering issue), but I don't think it's worth doing at this point.",
        "createdAt" : "2020-10-06T15:48:51Z",
        "updatedAt" : "2020-10-06T16:04:33Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "25e95d944350dcda6a806063ff63aae07e5647bc",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +263,267 @@check_releases :: String -> IO ()\ncheck_releases bash_lib = do\n    out <- shell $ unlines [\"bash -c '\",\n              \"set -euo pipefail\",\n              \"eval \\\"$(dev-env/bin/dade assist)\\\"\","
  },
  {
    "id" : "4083ab8a-29e9-48e8-856a-7b3e75648034",
    "prId" : 7569,
    "comments" : [
      {
        "id" : "a7ac97e7-4f30-45aa-961f-d5b47f7c1bd1",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Any reason not to use `optparse-applicative` here? IME it’s pretty cheap in terms of the extra effort it requires even for very simple things and it’s much more maintainable as things get more complex.",
        "createdAt" : "2020-10-05T16:43:43Z",
        "updatedAt" : "2020-10-05T16:44:01Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "28d404b4-8e4f-43d3-91cb-fde4b7f07bf8",
        "parentId" : "a7ac97e7-4f30-45aa-961f-d5b47f7c1bd1",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "I honestly don't expect this to get any more complex than this 2-way dispatch for a very long time, but I'll look at optparse next time I need to make any change there.",
        "createdAt" : "2020-10-05T17:34:59Z",
        "updatedAt" : "2020-10-05T17:34:59Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "574d1ae7672f0d8dffb77ae7c48a6a695f161c59",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +268,272 @@    putStrLn \"FIXME\"\n\nmain :: IO ()\nmain = System.Environment.getArgs >>= parse\n  where parse [\"docs\"] = docs"
  },
  {
    "id" : "5704a922-f642-42d6-8946-2049f567fe48",
    "prId" : 6285,
    "comments" : [
      {
        "id" : "26b9af4f-68b7-43fc-a8e5-d78ea3b79e12",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "```suggestion\r\n      _ -> fail $ \"Expected single commit to match release \" <> version <> \", but instead found: \" <> show matching\r\n```\r\nThat one crashes during execution rather than evaluation which is a bit more predictable (here `error` should be fine but I prefer going for the safe option).",
        "createdAt" : "2020-06-10T12:18:16Z",
        "updatedAt" : "2020-06-10T12:24:06Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "a5d8055ebdf950bbd27912a1c68d1c7b4f074262",
    "line" : 37,
    "diffHunk" : "@@ -1,1 +266,270 @@    case matching of\n      [sha] -> return sha\n      _ -> error $ \"Expected single commit to match release \" <> version <> \", but instead found: \" <> show matching\n\nfetch_s3_versions :: IO (Set.Set Version, Set.Set Version)"
  },
  {
    "id" : "7b371f9d-ef4e-4445-8faa-daeb9e34e7a9",
    "prId" : 6285,
    "comments" : [
      {
        "id" : "9f22314f-614e-4c47-a4ba-70b6fc0e0877",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Answering my own question: Even if we switch to a stable release without modifying the commit, we only get a single hit since we look for the exact line which includes both the version number and the hash not just the hash :+1:",
        "createdAt" : "2020-06-10T12:23:54Z",
        "updatedAt" : "2020-06-10T12:24:06Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "94bd9acb-e856-4802-9ce9-7c402cf80e7d",
        "parentId" : "9f22314f-614e-4c47-a4ba-70b6fc0e0877",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "Spurious commits we would get in the `matching_commits` list include commits that remove that version line (whether by removing entirely or by changing the tag without changing the hash) and the one commit where LATEST suddenly became multi-line. As far as I'm aware that's all, and both cases will be filtered out by the set difference logic below.",
        "createdAt" : "2020-06-10T12:38:30Z",
        "updatedAt" : "2020-06-10T12:38:30Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "a5d8055ebdf950bbd27912a1c68d1c7b4f074262",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +257,261 @@    -- we want is a commit that added a single line, which matches the version\n    -- we are checking for.\n    matching_commits <- lines <$> (shell $ \"git log --format=%H --all -G '\" <> ver_sha <> \"' -- LATEST\")\n    matching <- Maybe.catMaybes <$> Traversable.for matching_commits (\\sha -> do\n        after <- Set.fromList . lines <$> (shell $ \"git show \" <> sha <> \":LATEST\")"
  },
  {
    "id" : "09e91c41-e1eb-45b3-b91a-c53af08d6c9e",
    "prId" : 6128,
    "comments" : [
      {
        "id" : "9e52bc7f-9873-4d45-babf-177e9fac5864",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "CI is failing because `latest_sha` is now unusued.",
        "createdAt" : "2020-05-27T17:02:30Z",
        "updatedAt" : "2020-05-27T21:49:40Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "179ed0ec-d431-4cdf-9ed5-4f912b348b72",
        "parentId" : "9e52bc7f-9873-4d45-babf-177e9fac5864",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "🤦 ",
        "createdAt" : "2020-05-27T21:35:33Z",
        "updatedAt" : "2020-05-27T21:49:40Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "d4ce486d8f73768357213dc68f06e08efa068dea",
    "line" : 35,
    "diffHunk" : "@@ -1,1 +176,180 @@        create_versions_json (map fst releases) (new </> \"versions.json\")\n        create_versions_json (map fst snapshots) (new </> \"snapshots.json\")\n        -- Starting after 0.13.54, we have changed the way in which we trigger\n        -- releases. Rather than releasing the current commit by changing the\n        -- VERSION file, we now mark an existing commit as the source code for"
  },
  {
    "id" : "1b6b51d8-8afd-43e3-b67e-abb4dea77bdc",
    "prId" : 6016,
    "comments" : [
      {
        "id" : "b661ba85-3e1b-4be0-860a-36bf4987b65c",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "the meaning of latest hasn’t changed right? it’s still the latest release on github releases that is not a prerelease according to semver?",
        "createdAt" : "2020-05-19T07:57:44Z",
        "updatedAt" : "2020-05-19T16:49:55Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "87388298-6843-4c66-975b-ce7f440ed478",
        "parentId" : "b661ba85-3e1b-4be0-860a-36bf4987b65c",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "The meaning has actually changed, not as of this PR, but as of #5584, despite that variable not being touched in there. What we want here is not the latest version, but the highest-numbered one, i.e. if 1.0.1 is released after 1.1.0, we still want the top-level documentation to show 1.1.0. So I thought calling it `latest` here would be confusing, especially now that I added references to the \"latest\" release notes (which really are intended to be the latest, as in most recent).",
        "createdAt" : "2020-05-19T09:47:30Z",
        "updatedAt" : "2020-05-19T16:49:55Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "5f991d71059dcd0bad10906e5ddf2f510803c993",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +109,113 @@\nbuild_docs_folder :: String -> [GitHubVersion] -> String -> IO String\nbuild_docs_folder path versions current = do\n    restore_sha $ do\n        let old = path </> \"old\""
  },
  {
    "id" : "30cd9d6f-6f5f-4953-ae0e-0a2afe1e5fbd",
    "prId" : 6016,
    "comments" : [
      {
        "id" : "6124a25c-e4ed-4b2d-8799-b63a9e583c3c",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "“from the most recent release” isn’t quite right as far as I can tell. You take it from the state of `master` and then build the `.html` file of the release for which you do not have docs (in theory there could be more than one and then you’ll end up with a somewhat random one but there shouldn’t be a meaningful difference since the state of `master` is the same). Any reason why we are not using the release commit?",
        "createdAt" : "2020-05-19T08:03:01Z",
        "updatedAt" : "2020-05-19T16:49:55Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "a5cb8ad5-769e-42a1-bc3b-b4b7ff529a1d",
        "parentId" : "6124a25c-e4ed-4b2d-8799-b63a9e583c3c",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "Under the (unverified, but so far true) assumption that we do not change the release notes file outside of a release cycle (and that if we do, then there is no release so this script will not run until there actually is a release), the latest commit that changes the release notes on master _is_ the release commit of the latest release. This could only be a different commit if we committed changes to the release notes file in-between merging a release commit to master and the cron job running. This could be actually useful for last-minute typo corrections I suppose.\r\n\r\nThis could be made slightly safer by pinning it to the LATEST file instead of the release notes one.",
        "createdAt" : "2020-05-19T10:04:55Z",
        "updatedAt" : "2020-05-19T16:49:55Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "dcfed9ef-fce7-457b-bd00-bb03e317e106",
        "parentId" : "6124a25c-e4ed-4b2d-8799-b63a9e583c3c",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "It’s not true if you look at https://github.com/digital-asset/daml/commits/master/docs/source/support/release-notes.rst. I don’t think we’ve changed it sufficiently quickly that it would matter but it can change.",
        "createdAt" : "2020-05-19T10:18:54Z",
        "updatedAt" : "2020-05-19T16:49:55Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "d3c2b2f3-f24e-48ce-b86d-0a977e5dd8e4",
        "parentId" : "6124a25c-e4ed-4b2d-8799-b63a9e583c3c",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "Changed to check LATEST, which should be closer to the last release. I don't really want to duplicate the entire logic of determining whether that commit was a release commit, especially given that this only runs if a version was actually added to GitHub.",
        "createdAt" : "2020-05-19T16:44:19Z",
        "updatedAt" : "2020-05-19T16:49:55Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "5f991d71059dcd0bad10906e5ddf2f510803c993",
    "line" : 119,
    "diffHunk" : "@@ -1,1 +224,228 @@            -- from the past, and keep the changelog outside of the worktree\n            -- (in commit messages), that means that commit cannot contain its\n            -- own release notes. We have decided to resolve that conundrum by\n            -- always including the release notes from the most recent release\n            -- in all releases."
  },
  {
    "id" : "7ddf9db5-48ce-43b2-ad7e-29303f197bb6",
    "prId" : 5584,
    "comments" : [
      {
        "id" : "83475dff-d545-48fd-8b68-2f6f036dbf5b",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Applying this to master as well doesn’t do any harm or at least not more harm than only applying it here right? It seems nicer to not have those go needlessly out of sync.",
        "createdAt" : "2020-04-16T15:18:13Z",
        "updatedAt" : "2020-04-16T15:18:25Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "4d631856-841e-4615-a659-145a219e1ba6",
        "parentId" : "83475dff-d545-48fd-8b68-2f6f036dbf5b",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "This one is the master one.",
        "createdAt" : "2020-04-16T15:20:28Z",
        "updatedAt" : "2020-04-16T15:20:28Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "174a36fb-52b6-42fe-8367-3808d74de7ea",
        "parentId" : "83475dff-d545-48fd-8b68-2f6f036dbf5b",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "branches are confusing :facepalm: my question still stands: can we apply this to both? if not, maybe worth adding a comment in the code?",
        "createdAt" : "2020-04-16T15:24:16Z",
        "updatedAt" : "2020-04-16T15:24:16Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "08c91257-186f-4f80-81e2-afdbd6826d50",
        "parentId" : "83475dff-d545-48fd-8b68-2f6f036dbf5b",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "The Azure cron only runs the latest master commit, so there is little point in changing this code on the 1.0 release branch.\r\n\r\nThe whole point of release branches being that they get the absolute minimum amount of changes to fix bugs, I'm somewhat reluctant to change anything I don't absolutely have to over there.",
        "createdAt" : "2020-04-16T15:30:37Z",
        "updatedAt" : "2020-04-16T15:30:37Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "233fe551-1f32-4a06-ac0a-b188ab970e04",
        "parentId" : "83475dff-d545-48fd-8b68-2f6f036dbf5b",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Oh makes sense, forgot that the cron job will always be based on master.",
        "createdAt" : "2020-04-16T15:48:01Z",
        "updatedAt" : "2020-04-16T15:48:01Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "5826d207fd2b3d9ba9c0f704e80c487466f1116e",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +241,245 @@find_commit_for_version :: String -> IO String\nfind_commit_for_version version = do\n    release_commits <- lines <$> shell \"git log --format=%H --branches='*' -- LATEST\"\n    ver_sha <- init <$> (shell $ \"git rev-parse v\" <> version)\n    let expected = ver_sha <> \" \" <> version"
  },
  {
    "id" : "26a47c03-e952-4ccb-8ad5-996752a76d83",
    "prId" : 4976,
    "comments" : [
      {
        "id" : "d2bbc86a-788f-4176-a522-ba1205480721",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "I’m struggling to understand what changed to require this now. Can you help me out?",
        "createdAt" : "2020-03-12T18:23:10Z",
        "updatedAt" : "2020-03-12T18:29:29Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "46498128-5042-4567-8390-cbf20f2181c3",
        "parentId" : "d2bbc86a-788f-4176-a522-ba1205480721",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "The \"main loop\" is now returning `[GitHubVersion]` instead of `[String]` because we need to track which ones are prereleases.",
        "createdAt" : "2020-03-12T18:35:29Z",
        "updatedAt" : "2020-03-12T18:36:59Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "e897553b-236c-45b5-b45c-0e977adb653f",
        "parentId" : "d2bbc86a-788f-4176-a522-ba1205480721",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : ":man_facepalming: Thanks for the explanation!",
        "createdAt" : "2020-03-12T18:36:58Z",
        "updatedAt" : "2020-03-12T18:36:58Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "1c81629b-dc3b-4414-bc9b-13370cbacbc1",
        "parentId" : "d2bbc86a-788f-4176-a522-ba1205480721",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "I should probably type my subfunctions. It would have made the change much clearer, and @nickchapman-da would stop telling me to do it. I'll add type annotations next time I need to touch this script.",
        "createdAt" : "2020-03-12T18:38:21Z",
        "updatedAt" : "2020-03-12T18:38:22Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "43aed40b-04a1-452a-b8dd-3e52f5293ed9",
        "parentId" : "d2bbc86a-788f-4176-a522-ba1205480721",
        "author" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "body" : "Yeah. More types!",
        "createdAt" : "2020-03-16T09:12:51Z",
        "updatedAt" : "2020-03-16T09:12:51Z",
        "lastEditedBy" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "3fafcb2de8ca9728165057297c6cf92ba2b71489",
    "line" : 121,
    "diffHunk" : "@@ -1,1 +232,236 @@            -- unordered maps, and here order matters.\n            let versions_json = versions\n                                & map name\n                                & List.sortOn (Data.Ord.Down . to_v)\n                                & map (\\s -> \"\\\"\" <> s <> \"\\\": \\\"\" <> s <> \"\\\"\")"
  },
  {
    "id" : "992cc634-9849-43fa-9e2b-2dd2d879427e",
    "prId" : 3944,
    "comments" : [
      {
        "id" : "2e29a038-7740-4f51-a96f-f5c61bc1789f",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Order-sensitive JSON maps seem quite unintuitive to me. Can we use an array of key-value pairs instead?",
        "createdAt" : "2020-01-03T15:36:20Z",
        "updatedAt" : "2020-01-08T11:38:26Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "b9e2f12d-01ce-4825-abda-324218163730",
        "parentId" : "2e29a038-7740-4f51-a96f-f5c61bc1789f",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "It's the js bit on the website that is order-sensitive in its JSON parsing. I'm not a big fan either, but I don't have a viable plan for changing that without breaking all the past docs.\r\n\r\nFun fact: we only need an ordered list of versions, so a list of strings would work here, we don't even need it to be pairs.",
        "createdAt" : "2020-01-03T17:32:54Z",
        "updatedAt" : "2020-01-08T11:38:26Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "bf786c0d63f033042cf2f5196bb5ac6f5b24d5d1",
    "line" : 121,
    "diffHunk" : "@@ -1,1 +179,183 @@            -- Not going through Aeson because it represents JSON objects as\n            -- unordered maps, and here order matters.\n            let versions_json = versions\n                                & map (\\s -> \"\\\"\" <> s <> \"\\\": \\\"\" <> s <> \"\\\"\")\n                                & List.intercalate \", \""
  },
  {
    "id" : "2cb96fd3-3cfa-47b8-aaab-53d707370b0b",
    "prId" : 3943,
    "comments" : [
      {
        "id" : "4bc8f3a1-ea62-4ef9-81c5-a952e3a8c724",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "I removed the dependency on `MissingH` since we already depend on enough other kitchen sink libraries and it doesn’t buy us anything.",
        "createdAt" : "2020-01-03T16:27:26Z",
        "updatedAt" : "2020-01-04T00:29:01Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "2ee4b31ae031ed1c21e1110225732a5c520aa53c",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +128,132 @@    let versions_json = versions\n                        & map (\\s -> \"\\\"\" <> s <> \"\\\": \\\"\" <> s <> \"\\\"\")\n                        & List.intercalate \", \"\n                        & \\s -> \"{\" <> s <> \"}\"\n    writeFile (path <> \"/versions.json\") versions_json"
  },
  {
    "id" : "f420030f-4d87-4a55-9adf-72ba6eabc759",
    "prId" : 3266,
    "comments" : [
      {
        "id" : "83bfed50-39a4-4084-a2f2-f84f86c1d747",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Newtypes around tuples are usually not very useful. Either just make it a proper datatype, i..e, `data Version = Version Int Int Int` or use the tuple.",
        "createdAt" : "2019-10-28T19:05:22Z",
        "updatedAt" : "2019-10-29T12:49:26Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "3d8004236e212354b2410fbd307d630888aa266e",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +109,113 @@    Set.fromList $ H.keys json\n\nnewtype Version = Version (Int, Int, Int)\n  deriving (Eq, Ord)\n"
  },
  {
    "id" : "6bb406ea-b722-446d-93c1-93a2327dc68c",
    "prId" : 3235,
    "comments" : [
      {
        "id" : "45797203-43b4-472a-9dd7-9fc7174176e0",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "for better or for worse, we use camelcase as the naming convention for all other Haskell code so I think it would be better to be consistent here.",
        "createdAt" : "2019-10-21T18:49:12Z",
        "updatedAt" : "2019-10-28T16:38:32Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "e702a900-70be-4c21-ae05-b3613dac9b91",
        "parentId" : "45797203-43b4-472a-9dd7-9fc7174176e0",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "I disagree. I do believe snake case is better, and I do not think consistency within a monorepo matters much for a top-level application file (i.e. not a library that would \"pollute\" modules that import it), so I would rather keep those.",
        "createdAt" : "2019-10-25T19:32:35Z",
        "updatedAt" : "2019-10-28T16:38:32Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "d09f368d-7028-4cc8-8a7c-6fe8b58a80a0",
        "parentId" : "45797203-43b4-472a-9dd7-9fc7174176e0",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Given that basically all Haskell libraries use camelCase this isn’t just about consistency within a repo but also about consistency with the names used by your dependencies.",
        "createdAt" : "2019-10-25T19:35:52Z",
        "updatedAt" : "2019-10-28T16:38:32Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "5e7b4d98-34a6-44b4-9c2a-b3adfc1f1a23",
        "parentId" : "45797203-43b4-472a-9dd7-9fc7174176e0",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "I actually like that inconsistency, as it tells me at a glance where an identifier comes from. We all have our quirks, I suppose.",
        "createdAt" : "2019-10-27T18:56:40Z",
        "updatedAt" : "2019-10-28T16:38:32Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "dae75011a452f0dfe7fecf83ff973bc5c6dbdfbb",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +26,30 @@import qualified System.Process as System\n\nshell_exit_code :: String -> IO (Exit.ExitCode, String, String)\nshell_exit_code cmd = do\n    System.readCreateProcessWithExitCode (System.shell cmd) \"\""
  },
  {
    "id" : "85098c56-34b4-44f1-bb4e-ee2f67314b97",
    "prId" : 3235,
    "comments" : [
      {
        "id" : "4a1cc77b-14d1-45fd-9048-3a42c9572bd0",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "same comment about camelCase.",
        "createdAt" : "2019-10-21T18:49:36Z",
        "updatedAt" : "2019-10-28T16:38:32Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "dae75011a452f0dfe7fecf83ff973bc5c6dbdfbb",
    "line" : 58,
    "diffHunk" : "@@ -1,1 +56,60 @@    Control.void $ shell cmd\n\nrobustly_download_nix_packages :: IO ()\nrobustly_download_nix_packages = do\n    h (10 :: Integer)"
  },
  {
    "id" : "4ccc47ef-e6b7-41d3-a7ed-2a521646f0bc",
    "prId" : 3235,
    "comments" : [
      {
        "id" : "c352d8be-973a-4d5d-aa31-c23159faad0c",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "```suggestion\r\n    case (statusCode $ responseStatus response, body) of\r\n```",
        "createdAt" : "2019-10-21T19:00:00Z",
        "updatedAt" : "2019-10-28T16:38:32Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "f3d9ba14-d531-4175-9354-249a2fa0491b",
        "parentId" : "c352d8be-973a-4d5d-aa31-c23159faad0c",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "👍 ",
        "createdAt" : "2019-10-25T19:41:47Z",
        "updatedAt" : "2019-10-28T16:38:32Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "dae75011a452f0dfe7fecf83ff973bc5c6dbdfbb",
    "line" : 80,
    "diffHunk" : "@@ -1,1 +78,82 @@    let body = JSON.decode $ HTTP.responseBody response\n    let status = Status.statusCode $ HTTP.responseStatus response\n    case (status, body) of\n      (200, Just body) -> return body\n      _ -> Exit.die $ unlines [\"GET \\\"\" <> url <> \"\\\" returned status code \" <> show status <> \".\","
  },
  {
    "id" : "a7915d9a-f72e-4449-bee4-621b6c529139",
    "prId" : 3235,
    "comments" : [
      {
        "id" : "fdfa34d5-11d6-4835-940c-0feb3a1177a6",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Can we just accept a `[Text]` here and rely on the `FromJSON` instance to implement `to_list` at the callsite?",
        "createdAt" : "2019-10-21T20:15:15Z",
        "updatedAt" : "2019-10-28T16:38:32Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "c24644c0-56a8-4d74-8a4a-089b3fd5107a",
        "parentId" : "fdfa34d5-11d6-4835-940c-0feb3a1177a6",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "I don't understand what you mean here.",
        "createdAt" : "2019-10-25T19:49:59Z",
        "updatedAt" : "2019-10-28T16:38:32Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "dae75011a452f0dfe7fecf83ff973bc5c6dbdfbb",
    "line" : 106,
    "diffHunk" : "@@ -1,1 +104,108 @@\ndocs_versions :: H.HashMap String String -> Set.Set String\ndocs_versions json =\n    Set.fromList $ H.keys json\n"
  },
  {
    "id" : "dc30e987-d133-4437-b58f-832dd7578276",
    "prId" : 3235,
    "comments" : [
      {
        "id" : "fb426718-a7c5-4afb-9715-701782d7b9f2",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "I would import `.=` unqualified. It’s sufficiently common that the costs of not littering the code with qualified imports are lower than the costs of learning the operator imho.",
        "createdAt" : "2019-10-21T20:17:05Z",
        "updatedAt" : "2019-10-28T16:38:32Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "a285060d-4ddc-470b-bbe4-1a6de4801bf0",
        "parentId" : "fb426718-a7c5-4afb-9715-701782d7b9f2",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "I personally think the cost of having import qualifiers is way lower than the cost of not having them. (You have to learn the operator either way.)",
        "createdAt" : "2019-10-25T19:50:45Z",
        "updatedAt" : "2019-10-28T16:38:32Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "dae75011a452f0dfe7fecf83ff973bc5c6dbdfbb",
    "line" : 183,
    "diffHunk" : "@@ -1,1 +181,185 @@    toJSON SubmitBlog{body, date, summary, version} =\n    -- content_group_id and blog_author_id reference existing items in HubSpot\n        JSON.object [\"name\" JSON..= (\"Release of DAML SDK \" <> version),\n                     \"post_body\" JSON..= body,\n                     \"content_group_id\" JSON..= (11411412838 :: Integer),"
  }
]