[
  {
    "id" : "f9b762b0-4617-440f-8a2c-20182de0ff61",
    "prId" : 5569,
    "comments" : [
      {
        "id" : "f600fc21-3965-4ff6-9e9d-01857bb51f18",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "More of a general question rather than something for this PR: Azure doesn’t have any concept of functions or macros does it? It seems very fragile to keep replicating this kind of stuff everywhere.",
        "createdAt" : "2020-04-15T15:52:59Z",
        "updatedAt" : "2020-04-16T15:01:31Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "7b9a4806-de38-4563-b301-c05c7e093371",
        "parentId" : "f600fc21-3965-4ff6-9e9d-01857bb51f18",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "Actually, I've recently seen something in the documentation that makes me believe there may be a way to emulate functions in Azure, to some extent. I'll spend a bit of time investigating that tomorrow.",
        "createdAt" : "2020-04-15T20:58:54Z",
        "updatedAt" : "2020-04-16T15:01:31Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "9fbe3ba4-9fbe-4c5c-8f63-8ba98d2baf10",
        "parentId" : "f600fc21-3965-4ff6-9e9d-01857bb51f18",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "Thinking more about it, actually, all of those changes are unnecessary. Assuming releases of patch versions are still triggered by a PR changing LATEST in `master` (as I think they should, if only for ease of audit), the SourceBranchName will still be `master`.",
        "createdAt" : "2020-04-16T14:00:30Z",
        "updatedAt" : "2020-04-16T15:01:31Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "2f9f72d3-541c-49a8-aefc-771e2c5154d1",
        "parentId" : "f600fc21-3965-4ff6-9e9d-01857bb51f18",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "That’s what I was initially thinking off but I thought you intentionally chose this approach. The main issue there seems to around the `release_notes.rst` which will turn into a mess if releases start overlapping which will probably happen at some point (e.g. you need a 1.0.2 after 2.0) and the `LATEST` file might be a bit confusing. I think both of those are perfectly acceptable for now. We just should make it a conscious decision.",
        "createdAt" : "2020-04-16T14:09:46Z",
        "updatedAt" : "2020-04-16T15:01:31Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "2d017580-0a45-4876-b1f2-8cae37077f8f",
        "parentId" : "f600fc21-3965-4ff6-9e9d-01857bb51f18",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "Ah, right. Release notes and documentation. The more I think about this the more I like trunk-based.",
        "createdAt" : "2020-04-16T14:44:01Z",
        "updatedAt" : "2020-04-16T15:01:31Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "44965e2c-8c6f-432b-a533-7a95a3f23ec9",
        "parentId" : "f600fc21-3965-4ff6-9e9d-01857bb51f18",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "After thinking more about it, I think releasing from the release branch makes more sense. I'll revert this to yesterday's version.",
        "createdAt" : "2020-04-16T14:54:01Z",
        "updatedAt" : "2020-04-16T15:01:31Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "cc69746e-8b3b-45c5-818c-12dc7d78b77b",
        "parentId" : "f600fc21-3965-4ff6-9e9d-01857bb51f18",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : ":+1: ",
        "createdAt" : "2020-04-16T15:03:39Z",
        "updatedAt" : "2020-04-16T15:03:42Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "459c0ebd3b840b56fc8afa4ce9564a49e01be424",
    "line" : 6,
    "diffHunk" : "@@ -51,18 +51,21 @@ steps:\n       DAML_SDK_RELEASE_VERSION: ${{parameters.release_tag}}\n     condition: and(succeeded(),\n                    eq(${{parameters.is_release}}, 'true'),\n-                   eq(variables['Build.SourceBranchName'], 'master'))\n+                   or(eq(variables['Build.SourceBranchName'], 'master'),\n+                      startsWith(variables['Build.SourceBranchName'], 'release/')))"
  },
  {
    "id" : "05e7930a-bf1e-491f-889b-906bb4d6d7eb",
    "prId" : 1274,
    "comments" : [
      {
        "id" : "6aa3a8fa-e674-4ff3-8d0d-33bad192198a",
        "parentId" : null,
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "Maybe it's just me, but I found this piece of code very confusing. I'd recommend either removing the `WINDOWS_INSTALLER_PATH` variable (as it's only used once) or exporting it instead of the `WINDOWS_INSTALLER` one, as that's what you want to publish and the publish step currently rebuilds that path.",
        "createdAt" : "2019-05-21T16:02:25Z",
        "updatedAt" : "2019-05-22T06:46:38Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "b26a13fe-547f-42ad-bdfc-98dcccb738b6",
        "parentId" : "6aa3a8fa-e674-4ff3-8d0d-33bad192198a",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Agreed, that was leftover from when I still had the signing step included in the regular Windows step for testing purposes. I’ve removed it.",
        "createdAt" : "2019-05-22T06:50:28Z",
        "updatedAt" : "2019-05-22T06:50:29Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "61acee607b0fff6c58ed95a7ec7087a481d863ec",
    "line" : 9,
    "diffHunk" : "@@ -40,9 +40,10 @@ steps:\n       ARTIFACT=daml-sdk-$(release_tag)-windows.tar.gz\n       cp bazel-genfiles/release/sdk-release-tarball.tar.gz '$(Build.StagingDirectory)'/$ARTIFACT\n       echo \"##vso[task.setvariable variable=artifact;isOutput=true]$ARTIFACT\"\n-      WINDOWS_INSTALLER=daml-sdk-$(release_tag)-windows.exe\n-      cp bazel-genfiles/release/windows-installer/daml-sdk-installer.exe '$(Build.StagingDirectory)'/$WINDOWS_INSTALLER\n-      echo \"##vso[task.setvariable variable=artifact-windows-installer;isOutput=true]$WINDOWS_INSTALLER\"\n+      WINDOWS_INSTALLER=daml-sdk-$(release_tag)-windows-unsigned.exe\n+      WINDOWS_INSTALLER_PATH=\"$(Build.StagingDirectory)/$WINDOWS_INSTALLER\"\n+      cp bazel-genfiles/release/windows-installer/daml-sdk-installer.exe \"$WINDOWS_INSTALLER_PATH\"\n+      echo \"##vso[task.setvariable variable=artifact-unsigned-windows-installer;isOutput=true]$WINDOWS_INSTALLER\""
  }
]