[
  {
    "id" : "ec051efa-9f69-480f-abdf-a46ab677dd5c",
    "prId" : 1264,
    "comments" : [
      {
        "id" : "96be39a6-fbff-4cdd-867c-b8e36532911c",
        "parentId" : null,
        "author" : {
          "login" : "da-tanabe",
          "name" : "Davin K. Tanabe",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19478290?u=c4eed11976b50dbaed21ccb17371a74a7e802541&v=4"
        },
        "body" : "If this is supposed to be metadata that is user-supplied, might be better to simply make this a more general key-value mapping than naming a specific field \"uploaded_by\" and not allowing room for other metadata (such as file modified, hash of the DAR), or simply excluding this altogether and let implementations define how they manage packages. This and the \"filename\" field feel somewhat out of place to me.",
        "createdAt" : "2019-05-21T13:14:00Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "da-tanabe",
          "name" : "Davin K. Tanabe",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19478290?u=c4eed11976b50dbaed21ccb17371a74a7e802541&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "20aa4a3c-5ef6-41ea-ab99-4a32dd176a4c",
        "parentId" : "96be39a6-fbff-4cdd-867c-b8e36532911c",
        "author" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "body" : "I don't really think we should allow any user-supplied metadata. The package uploads are ledger-wide and many packages are common across everything (standard library for example). I wouldn't store anything else in the ledger except timestamp (record time of the submission), the submitting party and the daml-lf archive bytes.",
        "createdAt" : "2019-05-21T14:52:55Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "ccf2027a-3e42-482e-867f-48a5a9862100",
        "parentId" : "96be39a6-fbff-4cdd-867c-b8e36532911c",
        "author" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "body" : "The submitting party does not exist on admin API. Remember, this is not a Ledger API which is party-level, but Admin API, which is participant level. In the discussions I have had with various stakeholders on this subject, the recurring theme was to have an indication of who uploaded the package. It could be that we just stay with the participant identifier instead of this field. We need to figure out how do we name the participants in the cluster. It seems like so far name assignment has been implementation specific. We might want to change that though by introducing another call.",
        "createdAt" : "2019-05-21T20:04:39Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "5e5199a3-6f53-4bca-80a6-e34985e79d53",
        "parentId" : "96be39a6-fbff-4cdd-867c-b8e36532911c",
        "author" : {
          "login" : "daravep",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/14316769?u=ecf84cb9190107a561ee4bec759072fdefd73269&v=4"
        },
        "body" : "Who uploaded the package is not a ledger concern but a participant and domain auitability concern. So yes, I agree that any system should store information like this but I don't think that this needs to leak into the API here. ",
        "createdAt" : "2019-05-22T10:50:41Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "daravep",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/14316769?u=ecf84cb9190107a561ee4bec759072fdefd73269&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "949c69703c60436cb3be1de6cb82043c45186fbf",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,100 @@\n+// Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+syntax = \"proto3\";\n+\n+package com.digitalasset.admin.api.v1;\n+\n+option java_outer_classname = \"PackageManagementServiceOuterClass\";\n+option java_package = \"com.digitalasset.amin.api.v1\";\n+\n+// Allows clients to query the DAML-LF packages that are supported by the server.\n+service PackageManagementService {\n+\n+  // Returns the details of all supported packages.\n+  rpc ListPackageDetails (ListPackageDetailsRequest) returns (ListPackageDetailsResponse);\n+\n+  // Uploads a DAR archive.\n+  rpc UploadArchive (UploadArchiveRequest) returns (UploadArchiveResponse);\n+\n+}\n+\n+message ListPackageDetailsRequest {\n+\n+  // Must correspond to the ledger ID reported by the Ledger Identification Service.\n+  // Required\n+  string ledger_id = 1;\n+}\n+\n+message ListPackageDetailsResponse {\n+\n+  // The IDs of all DAML-LF packages supported by the server.\n+  // Required\n+  repeated string PackageDetails = 1;\n+}\n+\n+message PackageDetails {\n+ \n+  // The IDs of all DAML-LF packages supported by the server.\n+  // Required\n+  string package_id = 1;\n+\n+  // Human readable name of the package.\n+  // Optional\n+  string package_name = 2;\n+\n+  // Identifier of the agent that uploaded the package. Depending on the ledger \n+  // implementation, the interpretation of this field may differ. It could be\n+  // the identifier of the uploading application or its user. It could also\n+  // be the unique identifier of the participant node within the cluster.\n+  // Optional\n+  string uploaded_by = 3;\n+\n+  // Microseconds since the UNIX epoch. Can go backwards. Fixed\n+  // since the vast majority of values will be greater than\n+  // 2^28, since currently the number of microseconds since the\n+  // epoch is greater than that. Range: 0001-01-01T00:00:00Z to\n+  // 9999-12-31T23:59:59.999999Z, so that we can convert to/from\n+  // https://www.ietf.org/rfc/rfc3339.txt.\n+  // Required\n+  google.protobuf.Timestamp upload_timestamp = 4;\n+\n+  // Size of the package in bytes.\n+  // Required\n+  uint64 package_size = 5 [jstype = JS_STRING];\n+\n+  // names of the modules contained in the package\n+  // Optional\n+  repeated string module_names = 6;\n+}\n+\n+message UploadDarRequest {\n+\n+  // Must correspond to the ledger ID reported by the Ledger Identification Service.\n+  // Required\n+  string ledger_id = 1;\n+\n+  // Contains a DAML archive DAR file, which in turn is a jar like zipped container\n+  // for ``daml_lf`` archives. See further details in ``daml_lf.proto``.\n+  // Required\n+  bytes dar = 2;\n+\n+  // Name of the DAR file. Implementation is ikely to store it in a local repository.\n+  // This name will be likely used as part of the name in the local file system.\n+  // Please note that on the query side, we no longer deal with DARs, but we deal with\n+  // packages instead. There is a 1 to N relationship between DARs and packages.\n+  // Required\n+  string filename = 3;\n+\n+  // Identifier of the agent that uploaded the package. Depending on the ledger \n+  // implementation, the interpretation of this field may differ. It could be\n+  // the identifier of the uploading application or its user. It could also\n+  // be the unique identifier of the participant node within the cluster.\n+  // Optional\n+  string uploaded_by = 4;"
  },
  {
    "id" : "10d4f326-9089-4a43-8b2c-e80a529735bb",
    "prId" : 1264,
    "comments" : [
      {
        "id" : "37b299ab-e0ef-43d4-99ce-10ed3150cc93",
        "parentId" : null,
        "author" : {
          "login" : "da-tanabe",
          "name" : "Davin K. Tanabe",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19478290?u=c4eed11976b50dbaed21ccb17371a74a7e802541&v=4"
        },
        "body" : "Where is this supposed to come from? The `filename` of the DAR that contained this DALF?",
        "createdAt" : "2019-05-21T13:14:48Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "da-tanabe",
          "name" : "Davin K. Tanabe",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19478290?u=c4eed11976b50dbaed21ccb17371a74a7e802541&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "2734c9d9-67da-4241-ba4e-ecd03182fc47",
        "parentId" : "37b299ab-e0ef-43d4-99ce-10ed3150cc93",
        "author" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "body" : "What is this set to for e.g. the daml-prim.dalf? Does the first uploader get to decide how a package is named? Does not seem right to me.\r\nIf we need human readable names, then that should really be part of the .dalf format and part of the hashing scheme.",
        "createdAt" : "2019-05-21T14:49:49Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "31d406e0-c200-45cd-9878-38ff107d3483",
        "parentId" : "37b299ab-e0ef-43d4-99ce-10ed3150cc93",
        "author" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "body" : "I have put this in here as an afterthought, after having seen it in canton version of the interface. I put it here hear the opinions about ideas floated in this context elsewhere.",
        "createdAt" : "2019-05-21T20:11:53Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "949c69703c60436cb3be1de6cb82043c45186fbf",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,100 @@\n+// Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+syntax = \"proto3\";\n+\n+package com.digitalasset.admin.api.v1;\n+\n+option java_outer_classname = \"PackageManagementServiceOuterClass\";\n+option java_package = \"com.digitalasset.amin.api.v1\";\n+\n+// Allows clients to query the DAML-LF packages that are supported by the server.\n+service PackageManagementService {\n+\n+  // Returns the details of all supported packages.\n+  rpc ListPackageDetails (ListPackageDetailsRequest) returns (ListPackageDetailsResponse);\n+\n+  // Uploads a DAR archive.\n+  rpc UploadArchive (UploadArchiveRequest) returns (UploadArchiveResponse);\n+\n+}\n+\n+message ListPackageDetailsRequest {\n+\n+  // Must correspond to the ledger ID reported by the Ledger Identification Service.\n+  // Required\n+  string ledger_id = 1;\n+}\n+\n+message ListPackageDetailsResponse {\n+\n+  // The IDs of all DAML-LF packages supported by the server.\n+  // Required\n+  repeated string PackageDetails = 1;\n+}\n+\n+message PackageDetails {\n+ \n+  // The IDs of all DAML-LF packages supported by the server.\n+  // Required\n+  string package_id = 1;\n+\n+  // Human readable name of the package.\n+  // Optional\n+  string package_name = 2;"
  },
  {
    "id" : "be327ba9-ae03-4f0d-b5ea-02a8b84e78a4",
    "prId" : 1264,
    "comments" : [
      {
        "id" : "ca8582d2-a1ff-4434-8db5-924ca1508657",
        "parentId" : null,
        "author" : {
          "login" : "da-tanabe",
          "name" : "Davin K. Tanabe",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19478290?u=c4eed11976b50dbaed21ccb17371a74a7e802541&v=4"
        },
        "body" : "Why is this optional?",
        "createdAt" : "2019-05-21T13:15:13Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "da-tanabe",
          "name" : "Davin K. Tanabe",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19478290?u=c4eed11976b50dbaed21ccb17371a74a7e802541&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "7880e6d7-5ecd-4e08-b313-d521e0dde184",
        "parentId" : "ca8582d2-a1ff-4434-8db5-924ca1508657",
        "author" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "body" : "What do we need these for? If we have this, why don't we also have the identifiers within modules?",
        "createdAt" : "2019-05-21T14:55:58Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "d967e935-66b6-4782-864a-69d636bdb3dd",
        "parentId" : "ca8582d2-a1ff-4434-8db5-924ca1508657",
        "author" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "body" : "This was raised in discussions around design of a UX for for this api. Apparently it is rather hard to understand what the package is about at the moment. Forget the lack of human readable name, which we should fix. Knowing what's inside would really help to distinguish between them. But we can punt it and start with less.",
        "createdAt" : "2019-05-21T20:08:38Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "1a4785e0-14a1-4f6b-89cf-ccf5ae42aae4",
        "parentId" : "ca8582d2-a1ff-4434-8db5-924ca1508657",
        "author" : {
          "login" : "daravep",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/14316769?u=ecf84cb9190107a561ee4bec759072fdefd73269&v=4"
        },
        "body" : "Hmm ... not sure if this is a good idea. Modules is \"some\" information, but not necessarily meaningful. The next question will be: how do i get the templates etc?\r\n\r\ni think what we are looking for here is the equivalent of \r\n```\r\naptitude show gcc\r\n```\r\nor for similar packages. and in addition to that, a utility library that allows to inspect DAR files (as library and command line utility). \r\n```\r\n./daml dar-inspect --help\r\n    --modules   (list all modules)\r\n    --functions  (lists all functions)\r\n    --templates  (lists all templates)\r\n    --records  (lists all records)\r\n    --dependencies  (lists all dependencies)\r\n    --description  (gives a package description)\r\n    --verify  (verifies that package hash matches the actual hash)\r\n    --source (dumps the source of the package from which the package was compiled from into a directory)\r\n```\r\netc.",
        "createdAt" : "2019-05-22T10:38:21Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "daravep",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/14316769?u=ecf84cb9190107a561ee4bec759072fdefd73269&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "949c69703c60436cb3be1de6cb82043c45186fbf",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,100 @@\n+// Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+syntax = \"proto3\";\n+\n+package com.digitalasset.admin.api.v1;\n+\n+option java_outer_classname = \"PackageManagementServiceOuterClass\";\n+option java_package = \"com.digitalasset.amin.api.v1\";\n+\n+// Allows clients to query the DAML-LF packages that are supported by the server.\n+service PackageManagementService {\n+\n+  // Returns the details of all supported packages.\n+  rpc ListPackageDetails (ListPackageDetailsRequest) returns (ListPackageDetailsResponse);\n+\n+  // Uploads a DAR archive.\n+  rpc UploadArchive (UploadArchiveRequest) returns (UploadArchiveResponse);\n+\n+}\n+\n+message ListPackageDetailsRequest {\n+\n+  // Must correspond to the ledger ID reported by the Ledger Identification Service.\n+  // Required\n+  string ledger_id = 1;\n+}\n+\n+message ListPackageDetailsResponse {\n+\n+  // The IDs of all DAML-LF packages supported by the server.\n+  // Required\n+  repeated string PackageDetails = 1;\n+}\n+\n+message PackageDetails {\n+ \n+  // The IDs of all DAML-LF packages supported by the server.\n+  // Required\n+  string package_id = 1;\n+\n+  // Human readable name of the package.\n+  // Optional\n+  string package_name = 2;\n+\n+  // Identifier of the agent that uploaded the package. Depending on the ledger \n+  // implementation, the interpretation of this field may differ. It could be\n+  // the identifier of the uploading application or its user. It could also\n+  // be the unique identifier of the participant node within the cluster.\n+  // Optional\n+  string uploaded_by = 3;\n+\n+  // Microseconds since the UNIX epoch. Can go backwards. Fixed\n+  // since the vast majority of values will be greater than\n+  // 2^28, since currently the number of microseconds since the\n+  // epoch is greater than that. Range: 0001-01-01T00:00:00Z to\n+  // 9999-12-31T23:59:59.999999Z, so that we can convert to/from\n+  // https://www.ietf.org/rfc/rfc3339.txt.\n+  // Required\n+  google.protobuf.Timestamp upload_timestamp = 4;\n+\n+  // Size of the package in bytes.\n+  // Required\n+  uint64 package_size = 5 [jstype = JS_STRING];\n+\n+  // names of the modules contained in the package\n+  // Optional\n+  repeated string module_names = 6;"
  },
  {
    "id" : "18f3c100-2331-4c16-ab81-c94398e5a498",
    "prId" : 1264,
    "comments" : [
      {
        "id" : "f8fae5d7-942e-420b-afe9-2866909e9489",
        "parentId" : null,
        "author" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "body" : "where's the requirement coming for this?",
        "createdAt" : "2019-05-21T14:50:48Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "ba1fcb30-1463-4140-a2c7-98ffe68ad093",
        "parentId" : "f8fae5d7-942e-420b-afe9-2866909e9489",
        "author" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "body" : "Canton uses it in their version of the interface. It makes little sense when packages are stored on the ledger. So probably better take it out.",
        "createdAt" : "2019-05-21T20:17:09Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "09a8950b-0076-4f75-9976-11645cca0c73",
        "parentId" : "f8fae5d7-942e-420b-afe9-2866909e9489",
        "author" : {
          "login" : "daravep",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/14316769?u=ecf84cb9190107a561ee4bec759072fdefd73269&v=4"
        },
        "body" : "take the following example:\r\n1) ASX deploys chess-junior dar: chess-junior-v1.2.99.dar\r\n2) broker A shares ASX share contract with Bob.\r\n3) Bob learned ASX dar content. Now Bob wants to write automation, downloading the DAR from the ledger.\r\nBob stores the DAR file as `asx-app-20190512.dar` because he doesn't know the original file name. Now we end up in proliferation of new names for the same content.\r\n\r\nWe can prevent that if we neatly support \"capturing packages\" from the ledger using a specific tool:\r\n```\r\ndaml package grab --target http://path-to-ledger-api --package <package-name> \r\n  Stored package as file chess-junior-v1.2.99.dar\r\n```",
        "createdAt" : "2019-05-22T10:48:33Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "daravep",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/14316769?u=ecf84cb9190107a561ee4bec759072fdefd73269&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "6d9005ab-bd28-4773-a4d2-34a279243d59",
        "parentId" : "f8fae5d7-942e-420b-afe9-2866909e9489",
        "author" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "body" : "I am not sure you can prohibit anyone from uploading their own *asx-app-20190512.dar* for a dar that has already been uploaded before.\r\nI also am missing the information about the unit of storage under Canton't model. Is it dar or daml-lf? A dar contains multiple daml-lfs, so\r\n\r\n- if we store the dars, there will be a lot of duplication in storage of reusable libraries like StdLib; \r\n- if the unit of storage is daml-lf, then it is no function mapping it to a single dar",
        "createdAt" : "2019-05-22T11:51:09Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "874d6b1e-3d95-4935-b77b-5ae1ea4f4ada",
        "parentId" : "f8fae5d7-942e-420b-afe9-2866909e9489",
        "author" : {
          "login" : "danilofaria",
          "name" : "Danilo Faria",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/3002291?u=2aa1c8de058b850d596f6ad5af80aedd4882cdc7&v=4"
        },
        "body" : "if you are grabbing an individual package you should get the daml-lf, not the DAR file though right?",
        "createdAt" : "2019-05-22T12:05:33Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "danilofaria",
          "name" : "Danilo Faria",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/3002291?u=2aa1c8de058b850d596f6ad5af80aedd4882cdc7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "3436cd39-df28-492e-a8e4-36d2bd145369",
        "parentId" : "f8fae5d7-942e-420b-afe9-2866909e9489",
        "author" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "body" : "Sure that works, but then it is not the original fat dar (chess-junior-v1.2.99.dar) that @daravep mentioned earlier.",
        "createdAt" : "2019-05-22T17:25:11Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "949c69703c60436cb3be1de6cb82043c45186fbf",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,100 @@\n+// Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+syntax = \"proto3\";\n+\n+package com.digitalasset.admin.api.v1;\n+\n+option java_outer_classname = \"PackageManagementServiceOuterClass\";\n+option java_package = \"com.digitalasset.amin.api.v1\";\n+\n+// Allows clients to query the DAML-LF packages that are supported by the server.\n+service PackageManagementService {\n+\n+  // Returns the details of all supported packages.\n+  rpc ListPackageDetails (ListPackageDetailsRequest) returns (ListPackageDetailsResponse);\n+\n+  // Uploads a DAR archive.\n+  rpc UploadArchive (UploadArchiveRequest) returns (UploadArchiveResponse);\n+\n+}\n+\n+message ListPackageDetailsRequest {\n+\n+  // Must correspond to the ledger ID reported by the Ledger Identification Service.\n+  // Required\n+  string ledger_id = 1;\n+}\n+\n+message ListPackageDetailsResponse {\n+\n+  // The IDs of all DAML-LF packages supported by the server.\n+  // Required\n+  repeated string PackageDetails = 1;\n+}\n+\n+message PackageDetails {\n+ \n+  // The IDs of all DAML-LF packages supported by the server.\n+  // Required\n+  string package_id = 1;\n+\n+  // Human readable name of the package.\n+  // Optional\n+  string package_name = 2;\n+\n+  // Identifier of the agent that uploaded the package. Depending on the ledger \n+  // implementation, the interpretation of this field may differ. It could be\n+  // the identifier of the uploading application or its user. It could also\n+  // be the unique identifier of the participant node within the cluster.\n+  // Optional\n+  string uploaded_by = 3;\n+\n+  // Microseconds since the UNIX epoch. Can go backwards. Fixed\n+  // since the vast majority of values will be greater than\n+  // 2^28, since currently the number of microseconds since the\n+  // epoch is greater than that. Range: 0001-01-01T00:00:00Z to\n+  // 9999-12-31T23:59:59.999999Z, so that we can convert to/from\n+  // https://www.ietf.org/rfc/rfc3339.txt.\n+  // Required\n+  google.protobuf.Timestamp upload_timestamp = 4;\n+\n+  // Size of the package in bytes.\n+  // Required\n+  uint64 package_size = 5 [jstype = JS_STRING];\n+\n+  // names of the modules contained in the package\n+  // Optional\n+  repeated string module_names = 6;\n+}\n+\n+message UploadDarRequest {\n+\n+  // Must correspond to the ledger ID reported by the Ledger Identification Service.\n+  // Required\n+  string ledger_id = 1;\n+\n+  // Contains a DAML archive DAR file, which in turn is a jar like zipped container\n+  // for ``daml_lf`` archives. See further details in ``daml_lf.proto``.\n+  // Required\n+  bytes dar = 2;\n+\n+  // Name of the DAR file. Implementation is ikely to store it in a local repository.\n+  // This name will be likely used as part of the name in the local file system.\n+  // Please note that on the query side, we no longer deal with DARs, but we deal with\n+  // packages instead. There is a 1 to N relationship between DARs and packages.\n+  // Required\n+  string filename = 3;"
  },
  {
    "id" : "ff897258-bb03-4a5d-b8c4-b647d77c8b96",
    "prId" : 1264,
    "comments" : [
      {
        "id" : "008a90f6-e43f-4871-ade4-44c00aeaaa17",
        "parentId" : null,
        "author" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "body" : "typo.",
        "createdAt" : "2019-05-21T14:53:11Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "c9ab4af1-2753-42b7-978f-2d3b7e006769",
        "parentId" : "008a90f6-e43f-4871-ade4-44c00aeaaa17",
        "author" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "body" : "oops",
        "createdAt" : "2019-05-21T20:15:42Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "949c69703c60436cb3be1de6cb82043c45186fbf",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,100 @@\n+// Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+syntax = \"proto3\";\n+\n+package com.digitalasset.admin.api.v1;\n+\n+option java_outer_classname = \"PackageManagementServiceOuterClass\";\n+option java_package = \"com.digitalasset.amin.api.v1\";"
  },
  {
    "id" : "33a912f7-ec9d-4657-9ea0-a05025763187",
    "prId" : 1264,
    "comments" : [
      {
        "id" : "78c684af-b252-4b60-90fa-aa9dd8a91a84",
        "parentId" : null,
        "author" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "body" : "as discussed it's a bit unclear whether ledger_id belongs to this API (ledger identifier is really just identifies what the participants index database incarnation, that is, it ties the ledger offsets into the concrete incarnation of the database and if it gets rebuilt the ledger identifier has to change).",
        "createdAt" : "2019-05-21T14:55:18Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "dajmaki",
          "name" : "Jussi Mäki",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/19684330?u=abb996187e6b472110abdd8dc3c27c4fc0140b92&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "0256d1db-80f3-4749-9ff3-8b72d077fc6e",
        "parentId" : "78c684af-b252-4b60-90fa-aa9dd8a91a84",
        "author" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "body" : "It is a tough question. It is easier to answer if this api moves into ledger.api.v0.admin package. The effects of this api are visible in the services of the ledger api. In some implementations, the data is stored on the ledger interspersed with the transactions.",
        "createdAt" : "2019-05-21T20:15:34Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "mziolekda",
          "name" : "mziolekda",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/28315767?u=bfa7fd34d88616828ab02abda54fea595b0fde29&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "904bc417-dd5b-4ea7-a608-7195d60e7beb",
        "parentId" : "78c684af-b252-4b60-90fa-aa9dd8a91a84",
        "author" : {
          "login" : "gabor-aranyossy",
          "name" : "Gabor Aranyossy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/29858875?u=03b5eca13ed32e74056ee216f2def12e249bcfed&v=4"
        },
        "body" : "I think it's valid to have it here. The `ledger_id` in GSL was hashed into the genesis block and packages were published and evidenced on the ledger. ",
        "createdAt" : "2019-05-22T06:22:41Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "gabor-aranyossy",
          "name" : "Gabor Aranyossy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/29858875?u=03b5eca13ed32e74056ee216f2def12e249bcfed&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "949c69703c60436cb3be1de6cb82043c45186fbf",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,100 @@\n+// Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+syntax = \"proto3\";\n+\n+package com.digitalasset.admin.api.v1;\n+\n+option java_outer_classname = \"PackageManagementServiceOuterClass\";\n+option java_package = \"com.digitalasset.amin.api.v1\";\n+\n+// Allows clients to query the DAML-LF packages that are supported by the server.\n+service PackageManagementService {\n+\n+  // Returns the details of all supported packages.\n+  rpc ListPackageDetails (ListPackageDetailsRequest) returns (ListPackageDetailsResponse);\n+\n+  // Uploads a DAR archive.\n+  rpc UploadArchive (UploadArchiveRequest) returns (UploadArchiveResponse);\n+\n+}\n+\n+message ListPackageDetailsRequest {\n+\n+  // Must correspond to the ledger ID reported by the Ledger Identification Service.\n+  // Required\n+  string ledger_id = 1;"
  },
  {
    "id" : "2bdf3f53-13f1-4066-aa49-242295d923af",
    "prId" : 1264,
    "comments" : [
      {
        "id" : "57a8b472-2b35-4528-a6f5-07ee7f344e1c",
        "parentId" : null,
        "author" : {
          "login" : "daravep",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/14316769?u=ecf84cb9190107a561ee4bec759072fdefd73269&v=4"
        },
        "body" : "Uploading can not be an operation that either succeeds or fails. In Canton, a package distribution can be requested and it is approved by an unknown admin process. When and why the admin process succeeds is unknown to us. Therefore, you can \"submit\" a DAR and observe the progress of your submission, but there can not be a \"timeout\" or a guaranteed success.\r\n\r\nOr better: in canton, we distinguish uploading a package and activating a package. If a package is uploaded, it doesn't mean that it is activated automatically. Only activated packages show up on the package endpoint and can be used by applications.",
        "createdAt" : "2019-05-22T10:27:17Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "daravep",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/14316769?u=ecf84cb9190107a561ee4bec759072fdefd73269&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "949c69703c60436cb3be1de6cb82043c45186fbf",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,102 @@\n+// Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+syntax = \"proto3\";\n+\n+package com.digitalasset.admin.api.v1;\n+\n+import \"google/protobuf/timestamp.proto\";\n+\n+option java_outer_classname = \"PackageManagementServiceOuterClass\";\n+option java_package = \"com.digitalasset.admin.api.v1\";\n+\n+// Allows clients to query the DAML-LF packages that are supported by the ledger.\n+service PackageManagementService {\n+\n+  // Returns the details of all supported packages.\n+  rpc ListPackageDetails (ListPackageDetailsRequest) returns (ListPackageDetailsResponse);\n+\n+  // Uploads a DAR archive.\n+  rpc UploadDar (UploadDarRequest) returns (UploadDarResponse);"
  },
  {
    "id" : "bea156ac-051c-4fd6-8999-1ed395394b20",
    "prId" : 1264,
    "comments" : [
      {
        "id" : "a0f33635-4df0-453b-907b-9bd16ded4115",
        "parentId" : null,
        "author" : {
          "login" : "daravep",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/14316769?u=ecf84cb9190107a561ee4bec759072fdefd73269&v=4"
        },
        "body" : "string package details or didn't you mean`PackageDetails package_details = 1`?\r\n\r\nif you meant the actual package information, then the response will get very big very quickly. IMHO you need to separate: request / response where you receive \"manageable\" amounts of information / metadata and the actual point-wise download of a package.",
        "createdAt" : "2019-05-22T10:29:39Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "daravep",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/14316769?u=ecf84cb9190107a561ee4bec759072fdefd73269&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "949c69703c60436cb3be1de6cb82043c45186fbf",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,102 @@\n+// Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+syntax = \"proto3\";\n+\n+package com.digitalasset.admin.api.v1;\n+\n+import \"google/protobuf/timestamp.proto\";\n+\n+option java_outer_classname = \"PackageManagementServiceOuterClass\";\n+option java_package = \"com.digitalasset.admin.api.v1\";\n+\n+// Allows clients to query the DAML-LF packages that are supported by the ledger.\n+service PackageManagementService {\n+\n+  // Returns the details of all supported packages.\n+  rpc ListPackageDetails (ListPackageDetailsRequest) returns (ListPackageDetailsResponse);\n+\n+  // Uploads a DAR archive.\n+  rpc UploadDar (UploadDarRequest) returns (UploadDarResponse);\n+\n+}\n+\n+message ListPackageDetailsRequest {\n+\n+  // Must correspond to the ledger ID reported by the Ledger Identification Service.\n+  // Required\n+  string ledger_id = 1;\n+}\n+\n+message ListPackageDetailsResponse {\n+\n+  // The IDs of all DAML-LF packages supported by the ledger.\n+  // Required\n+  repeated string PackageDetails = 1;"
  },
  {
    "id" : "65471a23-e2fd-48ba-85d4-0b94d0a239ba",
    "prId" : 1264,
    "comments" : [
      {
        "id" : "131c4cd0-66d6-4df8-a1db-4dad8353e7ed",
        "parentId" : null,
        "author" : {
          "login" : "daravep",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/14316769?u=ecf84cb9190107a561ee4bec759072fdefd73269&v=4"
        },
        "body" : "danilo should review this and verify, if it is compatible with the Canton API. ",
        "createdAt" : "2019-05-22T10:33:49Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "daravep",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/14316769?u=ecf84cb9190107a561ee4bec759072fdefd73269&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "949c69703c60436cb3be1de6cb82043c45186fbf",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,102 @@\n+// Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+syntax = \"proto3\";\n+\n+package com.digitalasset.admin.api.v1;\n+\n+import \"google/protobuf/timestamp.proto\";\n+\n+option java_outer_classname = \"PackageManagementServiceOuterClass\";\n+option java_package = \"com.digitalasset.admin.api.v1\";\n+\n+// Allows clients to query the DAML-LF packages that are supported by the ledger.\n+service PackageManagementService {\n+\n+  // Returns the details of all supported packages.\n+  rpc ListPackageDetails (ListPackageDetailsRequest) returns (ListPackageDetailsResponse);\n+\n+  // Uploads a DAR archive.\n+  rpc UploadDar (UploadDarRequest) returns (UploadDarResponse);\n+\n+}\n+\n+message ListPackageDetailsRequest {\n+\n+  // Must correspond to the ledger ID reported by the Ledger Identification Service.\n+  // Required\n+  string ledger_id = 1;\n+}\n+\n+message ListPackageDetailsResponse {\n+\n+  // The IDs of all DAML-LF packages supported by the ledger.\n+  // Required\n+  repeated string PackageDetails = 1;\n+}\n+\n+message PackageDetails {"
  },
  {
    "id" : "7c315c59-6577-4542-88f5-2035c5c3c90b",
    "prId" : 1264,
    "comments" : [
      {
        "id" : "874fca92-7cf2-4937-841c-0b4aec845b38",
        "parentId" : null,
        "author" : {
          "login" : "daravep",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/14316769?u=ecf84cb9190107a561ee4bec759072fdefd73269&v=4"
        },
        "body" : "As said, in Canton, an upload is just an upload. It's then at the discretion of the participant operator to decide whether and when the package is going to be activated or not. ",
        "createdAt" : "2019-05-22T10:51:30Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "daravep",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/14316769?u=ecf84cb9190107a561ee4bec759072fdefd73269&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "949c69703c60436cb3be1de6cb82043c45186fbf",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,102 @@\n+// Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+syntax = \"proto3\";\n+\n+package com.digitalasset.admin.api.v1;\n+\n+import \"google/protobuf/timestamp.proto\";\n+\n+option java_outer_classname = \"PackageManagementServiceOuterClass\";\n+option java_package = \"com.digitalasset.admin.api.v1\";\n+\n+// Allows clients to query the DAML-LF packages that are supported by the ledger.\n+service PackageManagementService {\n+\n+  // Returns the details of all supported packages.\n+  rpc ListPackageDetails (ListPackageDetailsRequest) returns (ListPackageDetailsResponse);\n+\n+  // Uploads a DAR archive.\n+  rpc UploadDar (UploadDarRequest) returns (UploadDarResponse);\n+\n+}\n+\n+message ListPackageDetailsRequest {\n+\n+  // Must correspond to the ledger ID reported by the Ledger Identification Service.\n+  // Required\n+  string ledger_id = 1;\n+}\n+\n+message ListPackageDetailsResponse {\n+\n+  // The IDs of all DAML-LF packages supported by the ledger.\n+  // Required\n+  repeated string PackageDetails = 1;\n+}\n+\n+message PackageDetails {\n+ \n+  // The IDs of all DAML-LF packages supported by the ledger.\n+  // Required\n+  string package_id = 1;\n+\n+  // Human readable name of the package.\n+  // Optional\n+  string package_name = 2;\n+\n+  // Identifier of the agent that uploaded the package. Depending on the ledger \n+  // implementation, the interpretation of this field may differ. It could be\n+  // the identifier of the uploading application or its user. It could also\n+  // be the unique identifier of the participant node within the cluster.\n+  // Optional\n+  string uploaded_by = 3;\n+\n+  // Microseconds since the UNIX epoch. Can go backwards. Fixed\n+  // since the vast majority of values will be greater than\n+  // 2^28, since currently the number of microseconds since the\n+  // epoch is greater than that. Range: 0001-01-01T00:00:00Z to\n+  // 9999-12-31T23:59:59.999999Z, so that we can convert to/from\n+  // https://www.ietf.org/rfc/rfc3339.txt.\n+  // Required\n+  google.protobuf.Timestamp upload_timestamp = 4;\n+\n+  // Size of the package in bytes.\n+  // Required\n+  uint64 package_size = 5 [jstype = JS_STRING];\n+\n+  // names of the modules contained in the package\n+  // Optional\n+  repeated string module_names = 6;\n+}\n+\n+message UploadDarRequest {\n+\n+  // Must correspond to the ledger ID reported by the Ledger Identification Service.\n+  // Required\n+  string ledger_id = 1;\n+\n+  // Contains a DAML archive DAR file, which in turn is a jar like zipped container\n+  // for ``daml_lf`` archives. See further details in ``daml_lf.proto``.\n+  // Required\n+  bytes dar = 2;\n+\n+  // Name of the DAR file. Implementation is ikely to store it in a local repository.\n+  // This name will be likely used as part of the name in the local file system.\n+  // Please note that on the query side, we no longer deal with DARs, but we deal with\n+  // packages instead. There is a 1 to N relationship between DARs and packages.\n+  // Required\n+  string filename = 3;\n+\n+  // Identifier of the agent that uploaded the package. Depending on the ledger \n+  // implementation, the interpretation of this field may differ. It could be\n+  // the identifier of the uploading application or its user. It could also\n+  // be the unique identifier of the participant node within the cluster.\n+  // Optional\n+  string uploaded_by = 4;\n+}\n+\n+// An empty message that is received when the upload operation succeeded.\n+message UploadDarResponse {"
  },
  {
    "id" : "6b6cd0aa-9fa4-4c86-a7f0-c482c4d7a28a",
    "prId" : 1264,
    "comments" : [
      {
        "id" : "b042d76b-9b68-4790-9094-8504da752f29",
        "parentId" : null,
        "author" : {
          "login" : "danilofaria",
          "name" : "Danilo Faria",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/3002291?u=2aa1c8de058b850d596f6ad5af80aedd4882cdc7&v=4"
        },
        "body" : "typo in \"ikely\"",
        "createdAt" : "2019-05-22T11:46:27Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "danilofaria",
          "name" : "Danilo Faria",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/3002291?u=2aa1c8de058b850d596f6ad5af80aedd4882cdc7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "949c69703c60436cb3be1de6cb82043c45186fbf",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,102 @@\n+// Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+syntax = \"proto3\";\n+\n+package com.digitalasset.admin.api.v1;\n+\n+import \"google/protobuf/timestamp.proto\";\n+\n+option java_outer_classname = \"PackageManagementServiceOuterClass\";\n+option java_package = \"com.digitalasset.admin.api.v1\";\n+\n+// Allows clients to query the DAML-LF packages that are supported by the ledger.\n+service PackageManagementService {\n+\n+  // Returns the details of all supported packages.\n+  rpc ListPackageDetails (ListPackageDetailsRequest) returns (ListPackageDetailsResponse);\n+\n+  // Uploads a DAR archive.\n+  rpc UploadDar (UploadDarRequest) returns (UploadDarResponse);\n+\n+}\n+\n+message ListPackageDetailsRequest {\n+\n+  // Must correspond to the ledger ID reported by the Ledger Identification Service.\n+  // Required\n+  string ledger_id = 1;\n+}\n+\n+message ListPackageDetailsResponse {\n+\n+  // The IDs of all DAML-LF packages supported by the ledger.\n+  // Required\n+  repeated string PackageDetails = 1;\n+}\n+\n+message PackageDetails {\n+ \n+  // The IDs of all DAML-LF packages supported by the ledger.\n+  // Required\n+  string package_id = 1;\n+\n+  // Human readable name of the package.\n+  // Optional\n+  string package_name = 2;\n+\n+  // Identifier of the agent that uploaded the package. Depending on the ledger \n+  // implementation, the interpretation of this field may differ. It could be\n+  // the identifier of the uploading application or its user. It could also\n+  // be the unique identifier of the participant node within the cluster.\n+  // Optional\n+  string uploaded_by = 3;\n+\n+  // Microseconds since the UNIX epoch. Can go backwards. Fixed\n+  // since the vast majority of values will be greater than\n+  // 2^28, since currently the number of microseconds since the\n+  // epoch is greater than that. Range: 0001-01-01T00:00:00Z to\n+  // 9999-12-31T23:59:59.999999Z, so that we can convert to/from\n+  // https://www.ietf.org/rfc/rfc3339.txt.\n+  // Required\n+  google.protobuf.Timestamp upload_timestamp = 4;\n+\n+  // Size of the package in bytes.\n+  // Required\n+  uint64 package_size = 5 [jstype = JS_STRING];\n+\n+  // names of the modules contained in the package\n+  // Optional\n+  repeated string module_names = 6;\n+}\n+\n+message UploadDarRequest {\n+\n+  // Must correspond to the ledger ID reported by the Ledger Identification Service.\n+  // Required\n+  string ledger_id = 1;\n+\n+  // Contains a DAML archive DAR file, which in turn is a jar like zipped container\n+  // for ``daml_lf`` archives. See further details in ``daml_lf.proto``.\n+  // Required\n+  bytes dar = 2;\n+\n+  // Name of the DAR file. Implementation is ikely to store it in a local repository."
  },
  {
    "id" : "08380977-7dbf-4e81-9aeb-ab4531290109",
    "prId" : 1264,
    "comments" : [
      {
        "id" : "071837e9-a7cd-4f29-81b6-c9fc56887b13",
        "parentId" : null,
        "author" : {
          "login" : "danilofaria",
          "name" : "Danilo Faria",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/3002291?u=2aa1c8de058b850d596f6ad5af80aedd4882cdc7&v=4"
        },
        "body" : "i think this description is out of place. it says \"The IDs of all DAML-LF packages...\" to describe one field.\r\n",
        "createdAt" : "2019-05-22T12:01:58Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "danilofaria",
          "name" : "Danilo Faria",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/3002291?u=2aa1c8de058b850d596f6ad5af80aedd4882cdc7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "949c69703c60436cb3be1de6cb82043c45186fbf",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,102 @@\n+// Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+syntax = \"proto3\";\n+\n+package com.digitalasset.admin.api.v1;\n+\n+import \"google/protobuf/timestamp.proto\";\n+\n+option java_outer_classname = \"PackageManagementServiceOuterClass\";\n+option java_package = \"com.digitalasset.admin.api.v1\";\n+\n+// Allows clients to query the DAML-LF packages that are supported by the ledger.\n+service PackageManagementService {\n+\n+  // Returns the details of all supported packages.\n+  rpc ListPackageDetails (ListPackageDetailsRequest) returns (ListPackageDetailsResponse);\n+\n+  // Uploads a DAR archive.\n+  rpc UploadDar (UploadDarRequest) returns (UploadDarResponse);\n+\n+}\n+\n+message ListPackageDetailsRequest {\n+\n+  // Must correspond to the ledger ID reported by the Ledger Identification Service.\n+  // Required\n+  string ledger_id = 1;\n+}\n+\n+message ListPackageDetailsResponse {\n+\n+  // The IDs of all DAML-LF packages supported by the ledger.\n+  // Required\n+  repeated string PackageDetails = 1;\n+}\n+\n+message PackageDetails {\n+ \n+  // The IDs of all DAML-LF packages supported by the ledger."
  },
  {
    "id" : "ae8512b1-e1a2-42e3-bb73-17518f8f82c4",
    "prId" : 1264,
    "comments" : [
      {
        "id" : "f11c0ba6-bad7-4752-8a62-654c72e9a3a8",
        "parentId" : null,
        "author" : {
          "login" : "danilofaria",
          "name" : "Danilo Faria",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/3002291?u=2aa1c8de058b850d596f6ad5af80aedd4882cdc7&v=4"
        },
        "body" : "should there be an endpoint to retrieve a previously uploaded DAR file?",
        "createdAt" : "2019-05-22T12:03:54Z",
        "updatedAt" : "2019-05-23T20:06:44Z",
        "lastEditedBy" : {
          "login" : "danilofaria",
          "name" : "Danilo Faria",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/3002291?u=2aa1c8de058b850d596f6ad5af80aedd4882cdc7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "949c69703c60436cb3be1de6cb82043c45186fbf",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,102 @@\n+// Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+syntax = \"proto3\";\n+\n+package com.digitalasset.admin.api.v1;\n+\n+import \"google/protobuf/timestamp.proto\";\n+\n+option java_outer_classname = \"PackageManagementServiceOuterClass\";\n+option java_package = \"com.digitalasset.admin.api.v1\";\n+\n+// Allows clients to query the DAML-LF packages that are supported by the ledger.\n+service PackageManagementService {\n+\n+  // Returns the details of all supported packages.\n+  rpc ListPackageDetails (ListPackageDetailsRequest) returns (ListPackageDetailsResponse);\n+\n+  // Uploads a DAR archive.\n+  rpc UploadDar (UploadDarRequest) returns (UploadDarResponse);\n+"
  }
]