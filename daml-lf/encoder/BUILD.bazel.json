[
  {
    "id" : "fde85ac8-5e8e-43eb-93dc-fea5dee92f6a",
    "prId" : 4770,
    "comments" : [
      {
        "id" : "cb8b935e-b8a1-44e9-8e39-eafcc1ded508",
        "parentId" : null,
        "author" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "body" : "This requires also update of some of the file names in  `daml-lf/encoder/src/test/lf` \r\n(I know this is ugly)",
        "createdAt" : "2020-03-02T14:52:34Z",
        "updatedAt" : "2020-03-02T16:28:42Z",
        "lastEditedBy" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "ecd80f92-5a5b-49c8-930f-22f05e8388f4",
        "parentId" : "cb8b935e-b8a1-44e9-8e39-eafcc1ded508",
        "author" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "body" : "Aslo, I would have expect a test for synonyms here.  ",
        "createdAt" : "2020-03-02T14:52:59Z",
        "updatedAt" : "2020-03-02T16:28:42Z",
        "lastEditedBy" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "8e048246-651a-46d3-8f0b-7c1d24549f17",
        "parentId" : "cb8b935e-b8a1-44e9-8e39-eafcc1ded508",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Iâ€™ve updated this and added a test for type synonyms which works (after actually implementing the encoder).",
        "createdAt" : "2020-03-02T15:45:00Z",
        "updatedAt" : "2020-03-02T16:28:42Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "504c2e90-5822-472d-a0c7-71f7e18be02f",
        "parentId" : "cb8b935e-b8a1-44e9-8e39-eafcc1ded508",
        "author" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "body" : ":+1: ",
        "createdAt" : "2020-03-02T15:47:38Z",
        "updatedAt" : "2020-03-02T16:28:42Z",
        "lastEditedBy" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "a34f3f9be76f38c771b8850dc5c608237abc367c",
    "line" : 4,
    "diffHunk" : "@@ -21,6 +21,7 @@ lf_targets = [\n     \"1.3\",\n     \"1.6\",\n     \"1.7\",\n+    \"1.8\","
  },
  {
    "id" : "a78e7470-1104-44c3-84f8-cdcb00d22696",
    "prId" : 1769,
    "comments" : [
      {
        "id" : "bcfd794f-9c05-45e7-979d-79958f652edd",
        "parentId" : null,
        "author" : {
          "login" : "S11001001",
          "name" : "Stephen Compall",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/219186?u=7b27ed58a578fe7d4983d1bab28c2f5608ed8739&v=4"
        },
        "body" : "Can you write these `filegroup` and `genrule` calls with list comprehension[s]? See https://github.com/digital-asset/daml/blob/e0e3ce51c7b22ffc78e8f684ed4c0a413d850659/daml-lf/tests/BUILD.bazel for examples.",
        "createdAt" : "2019-06-21T08:25:26Z",
        "updatedAt" : "2019-06-21T17:55:21Z",
        "lastEditedBy" : {
          "login" : "S11001001",
          "name" : "Stephen Compall",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/219186?u=7b27ed58a578fe7d4983d1bab28c2f5608ed8739&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "1be25f94-8c91-4dae-8cf4-e561794d5d5b",
        "parentId" : "bcfd794f-9c05-45e7-979d-79958f652edd",
        "author" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "body" : "fixed",
        "createdAt" : "2019-06-21T12:14:06Z",
        "updatedAt" : "2019-06-21T17:55:21Z",
        "lastEditedBy" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "dfaa2f49bbbb32a532a8741df05d7270df52bdab",
    "line" : null,
    "diffHunk" : "@@ -72,10 +80,82 @@ da_scala_binary(\n     ],\n )\n \n+filegroup(\n+    name = \"lf_since_1.0\",\n+    srcs = glob([\"src/test/lf/since_1_0/**/*.lf\"]),\n+)\n+\n+filegroup(\n+    name = \"lf_since_1.1\",\n+    srcs = glob([\"src/test/lf/since_1_1/**/*.lf\"]),\n+)\n+\n+filegroup(\n+    name = \"lf_since_1.3\",\n+    srcs = glob([\"src/test/lf/since_1_3/**/*.lf\"]),\n+)\n+\n+filegroup(\n+    name = \"lf_since_1.dev\",\n+    srcs = glob([\"src/test/lf/since_1_dev/**/*.lf\"]),\n+)\n+\n+genrule(\n+    name = \"testing-dar-1.0\",\n+    srcs = [\":lf_since_1.0\"],\n+    outs = [\"test-1.0.dar\"],\n+    cmd = \"$(location :encoder_binary) $(SRCS) -o $@ -v 1.0\",\n+    tools = [\":encoder_binary\"],\n+    visibility = [\n+        \"//daml-lf:__subpackages__\",\n+        \"//language-support:__subpackages__\",\n+    ],\n+)\n+\n+genrule(\n+    name = \"testing-dar-1.1\",\n+    srcs = [\n+        \":lf_since_1.0\",\n+        \":lf_since_1.1\",\n+    ],\n+    outs = [\"test-1.1.dar\"],\n+    cmd = \"$(location :encoder_binary) $(SRCS) -o $@ -v 1.1\",\n+    tools = [\":encoder_binary\"],\n+    visibility = [\n+        \"//daml-lf:__subpackages__\",\n+        \"//language-support:__subpackages__\",\n+    ],\n+)\n+\n genrule(\n-    name = \"assembler-test-dalf\",\n-    srcs = [\"src/test/resource/Test.damllf\"],\n-    outs = [\"Test.dalf\"],\n-    cmd = \"$(location :encoder_binary) $(SRCS) $@ 1.dev\",\n+    name = \"testing-dar-1.3\",\n+    srcs = [\n+        \":lf_since_1.0\",\n+        \":lf_since_1.1\",\n+        \":lf_since_1.3\",\n+    ],\n+    outs = [\"test-1.3.dar\"],\n+    cmd = \"$(location :encoder_binary) $(SRCS) -o $@ -v 1.3\",\n     tools = [\":encoder_binary\"],\n+    visibility = [\n+        \"//daml-lf:__subpackages__\",\n+        \"//language-support:__subpackages__\",\n+    ],\n+)\n+\n+genrule(\n+    name = \"testing-dar-1.dev\",\n+    srcs = [\n+        \":lf_since_1.0\",\n+        \":lf_since_1.1\",\n+        \":lf_since_1.3\",\n+        \":lf_since_1.dev\",\n+    ],\n+    outs = [\"test-1.dev.dar\"],\n+    cmd = \"$(location :encoder_binary) $(SRCS) -o $@ -v 1.dev\",\n+    tools = [\":encoder_binary\"],\n+    visibility = [\n+        \"//daml-lf:__subpackages__\",\n+        \"//language-support:__subpackages__\",\n+    ],"
  },
  {
    "id" : "a7e7b56a-8f42-4d09-a8f5-52b0656eec95",
    "prId" : 1769,
    "comments" : [
      {
        "id" : "4aa33397-ebfe-4530-9596-f823ad28dc4f",
        "parentId" : null,
        "author" : {
          "login" : "S11001001",
          "name" : "Stephen Compall",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/219186?u=7b27ed58a578fe7d4983d1bab28c2f5608ed8739&v=4"
        },
        "body" : "The comprehension should also go here.",
        "createdAt" : "2019-06-21T08:26:22Z",
        "updatedAt" : "2019-06-21T17:55:21Z",
        "lastEditedBy" : {
          "login" : "S11001001",
          "name" : "Stephen Compall",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/219186?u=7b27ed58a578fe7d4983d1bab28c2f5608ed8739&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "dfaa2f49bbbb32a532a8741df05d7270df52bdab",
    "line" : null,
    "diffHunk" : "@@ -32,7 +32,12 @@ da_scala_test_suite(\n     name = \"tests\",\n     size = \"small\",\n     srcs = glob([\"src/test/scala/com/digitalasset/daml/lf/testing/archive/**/*.scala\"]),\n-    data = [\":assembler-test-dalf\"],\n+    data = [\n+        \":testing-dar-1.0\",\n+        \":testing-dar-1.1\",\n+        \":testing-dar-1.3\",\n+        \":testing-dar-1.dev\",\n+    ],"
  },
  {
    "id" : "60f4af44-9d7d-451e-af0d-e10b1d7d1386",
    "prId" : 1769,
    "comments" : [
      {
        "id" : "ffb2972c-31bf-40f3-9fd0-b793eae62ebd",
        "parentId" : null,
        "author" : {
          "login" : "S11001001",
          "name" : "Stephen Compall",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/219186?u=7b27ed58a578fe7d4983d1bab28c2f5608ed8739&v=4"
        },
        "body" : "I suspect you can use the keys of lf_since_deps instead, perhaps moving it up here.",
        "createdAt" : "2019-06-21T12:43:02Z",
        "updatedAt" : "2019-06-21T17:55:21Z",
        "lastEditedBy" : {
          "login" : "S11001001",
          "name" : "Stephen Compall",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/219186?u=7b27ed58a578fe7d4983d1bab28c2f5608ed8739&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "92e2825b-2e06-47bc-bb20-5a2675c3d3cd",
        "parentId" : "ffb2972c-31bf-40f3-9fd0-b793eae62ebd",
        "author" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "body" : "fixed",
        "createdAt" : "2019-06-21T12:58:16Z",
        "updatedAt" : "2019-06-21T17:55:21Z",
        "lastEditedBy" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "dfaa2f49bbbb32a532a8741df05d7270df52bdab",
    "line" : null,
    "diffHunk" : "@@ -10,6 +10,13 @@ load(\n     \"lf_scalacopts\",\n )\n \n+lf_target_versions = ["
  },
  {
    "id" : "18cfc3aa-efb4-432d-9453-481a237648ec",
    "prId" : 1769,
    "comments" : [
      {
        "id" : "d855aaf7-a1f3-4c9e-8a3d-3d97468f8a08",
        "parentId" : null,
        "author" : {
          "login" : "S11001001",
          "name" : "Stephen Compall",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/219186?u=7b27ed58a578fe7d4983d1bab28c2f5608ed8739&v=4"
        },
        "body" : "```suggestion\r\n    filegroup(\r\n```",
        "createdAt" : "2019-06-21T12:43:16Z",
        "updatedAt" : "2019-06-21T17:55:21Z",
        "lastEditedBy" : {
          "login" : "S11001001",
          "name" : "Stephen Compall",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/219186?u=7b27ed58a578fe7d4983d1bab28c2f5608ed8739&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "d436c59a-5169-4098-a696-f816583fac5d",
        "parentId" : "d855aaf7-a1f3-4c9e-8a3d-3d97468f8a08",
        "author" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "body" : "fixed",
        "createdAt" : "2019-06-21T12:57:55Z",
        "updatedAt" : "2019-06-21T17:55:21Z",
        "lastEditedBy" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "dfaa2f49bbbb32a532a8741df05d7270df52bdab",
    "line" : null,
    "diffHunk" : "@@ -72,10 +82,37 @@ da_scala_binary(\n     ],\n )\n \n-genrule(\n-    name = \"assembler-test-dalf\",\n-    srcs = [\"src/test/resource/Test.damllf\"],\n-    outs = [\"Test.dalf\"],\n-    cmd = \"$(location :encoder_binary) $(SRCS) $@ 1.dev\",\n+\n+\n+lf_since_deps = {\n+    \"1.0\": [],\n+    \"1.1\": [\"1.0\"],\n+    \"1.3\": [\"1.0\", \"1.1\"],\n+    \"1.dev\": [\"1.0\", \"1.1\", \"1.3\"]\n+}\n+\n+[\n+    [filegroup("
  },
  {
    "id" : "08e6aaa2-2a45-4ffa-8f7c-fc5cc32862dc",
    "prId" : 1769,
    "comments" : [
      {
        "id" : "fa4ed53f-9fa2-4e58-8963-61131267f643",
        "parentId" : null,
        "author" : {
          "login" : "S11001001",
          "name" : "Stephen Compall",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/219186?u=7b27ed58a578fe7d4983d1bab28c2f5608ed8739&v=4"
        },
        "body" : "```suggestion\r\n  genrule(\r\n```\r\nAlso `bazel run //:buildifier-fix` I'd wager.",
        "createdAt" : "2019-06-21T12:43:26Z",
        "updatedAt" : "2019-06-21T17:55:21Z",
        "lastEditedBy" : {
          "login" : "S11001001",
          "name" : "Stephen Compall",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/219186?u=7b27ed58a578fe7d4983d1bab28c2f5608ed8739&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "3d754a83-eecc-470d-b9a6-d3f5a7fa1d98",
        "parentId" : "fa4ed53f-9fa2-4e58-8963-61131267f643",
        "author" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "body" : "fixed",
        "createdAt" : "2019-06-21T12:57:51Z",
        "updatedAt" : "2019-06-21T17:55:21Z",
        "lastEditedBy" : {
          "login" : "remyhaemmerle-da",
          "name" : "Remy",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/45566104?u=10d0caf8150a686217852f90e91314a4de3239a9&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "dfaa2f49bbbb32a532a8741df05d7270df52bdab",
    "line" : null,
    "diffHunk" : "@@ -72,10 +82,37 @@ da_scala_binary(\n     ],\n )\n \n-genrule(\n-    name = \"assembler-test-dalf\",\n-    srcs = [\"src/test/resource/Test.damllf\"],\n-    outs = [\"Test.dalf\"],\n-    cmd = \"$(location :encoder_binary) $(SRCS) $@ 1.dev\",\n+\n+\n+lf_since_deps = {\n+    \"1.0\": [],\n+    \"1.1\": [\"1.0\"],\n+    \"1.3\": [\"1.0\", \"1.1\"],\n+    \"1.dev\": [\"1.0\", \"1.1\", \"1.3\"]\n+}\n+\n+[\n+    [filegroup(\n+         name = \"lf_since_%s\" % target,\n+         srcs = [\":lf_since_%s\" %dep for dep in lf_since_deps[target]] +\n+           glob([\"src/test/lf/since_%s/**/*.lf\" % target]),\n+    )]\n+    for target in lf_target_versions\n+]\n+\n+\n+[\n+  [genrule("
  }
]