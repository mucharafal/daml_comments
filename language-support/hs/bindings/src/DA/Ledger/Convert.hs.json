[
  {
    "id" : "fa7a51a5-901b-4381-a034-5577daa377c8",
    "prId" : 2440,
    "comments" : [
      {
        "id" : "5ec02cb1-3653-4336-9d8f-d623ca57238f",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "What happens if the string has more than 10 digits after the period?",
        "createdAt" : "2019-08-07T10:56:02Z",
        "updatedAt" : "2019-08-07T10:56:43Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "f8958bb7-f2b0-4dec-9ef3-ac543f288e64",
        "parentId" : "5ec02cb1-3653-4336-9d8f-d623ca57238f",
        "author" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "body" : "I imagine it will fail.\r\nWhat does the Ledger API guarantee?",
        "createdAt" : "2019-08-07T11:05:37Z",
        "updatedAt" : "2019-08-07T11:05:38Z",
        "lastEditedBy" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "07e571e6-f004-4ed7-b9e6-74f6986e0af7",
        "parentId" : "5ec02cb1-3653-4336-9d8f-d623ca57238f",
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "Failing would be good, swallowing digits or rounding would be slightly scary. The current Ledger API never gives you more than 10 digits but this might change in the future. Crashing loudly if it does would be nice.",
        "createdAt" : "2019-08-07T11:39:57Z",
        "updatedAt" : "2019-08-07T11:39:57Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "7bdaa068-3e6d-4404-af06-9ec3dde2537f",
        "parentId" : "5ec02cb1-3653-4336-9d8f-d623ca57238f",
        "author" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "body" : "I did some experiments: -- `read \"123.11223344556677\"`\r\nTurns out that it does silently swallow digits! --> `123.1122334455`\r\nBut it seems this is consistent with Haskell's overall approach to fixed width decimals..\r\nFor example, writing `VDecimal 123.11223344556677`, and so invoking the fractional instance, performs the exact same truncation.",
        "createdAt" : "2019-08-08T07:35:04Z",
        "updatedAt" : "2019-08-08T07:35:04Z",
        "lastEditedBy" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "f6e3c9c9-0986-4ed8-804b-a474a52d5c2c",
        "parentId" : "5ec02cb1-3653-4336-9d8f-d623ca57238f",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "I don’t think being consistent with Haskell’s default approach is useful in any way here. Throwing an error is a much better option.",
        "createdAt" : "2019-08-08T07:48:46Z",
        "updatedAt" : "2019-08-08T07:48:46Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "32c5b358-bb52-4265-8ba1-4c9fbef76872",
        "parentId" : "5ec02cb1-3653-4336-9d8f-d623ca57238f",
        "author" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "body" : "I wasn't suggesting it was, I was just reporting what I discovered.",
        "createdAt" : "2019-08-08T08:00:51Z",
        "updatedAt" : "2019-08-08T08:00:52Z",
        "lastEditedBy" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "89a3021d-6f55-4b6c-919e-1c29732488b9",
        "parentId" : "5ec02cb1-3653-4336-9d8f-d623ca57238f",
        "author" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "body" : "I tried coded something which for any `a` with `Read a` and `Show a` which checks round-tripability: \r\n```\r\nreadCheckRoundTrip :: (Read a,Show a) => String -> a\r\nreadCheckRoundTrip s = if s /= s' then error msg else a\r\n  where\r\n      a = read s\r\n      s' = show a\r\n      msg = \"read does not round-trip correctly: [\" <> s <> \"] --> [\" <> s' <> \"]\"\r\n```\r\n\r\nbut is not right when there are multiple `String` reps for the same `a`, i.e. trailing `0`s when printing a fixed width number.\r\n\r\nSo perhaps we should avoid coding what surely must be a solved problem...\r\n\r\nDo you know if there is any standard support for `Fixed`  which allows checking if `read` is *safe*, i.e. does not loose precision?\r\n",
        "createdAt" : "2019-08-08T08:39:09Z",
        "updatedAt" : "2019-08-08T08:39:09Z",
        "lastEditedBy" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "230c5663-e6d3-4bb4-88ac-69399e6a0534",
        "parentId" : "5ec02cb1-3653-4336-9d8f-d623ca57238f",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Sadly, I don’t know of any package that provides this :disappointed: ",
        "createdAt" : "2019-08-08T09:10:38Z",
        "updatedAt" : "2019-08-08T09:10:38Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "eabad75dbc08b599fb34c3aa1143453e577fd92b",
    "line" : 40,
    "diffHunk" : "@@ -1,1 +356,360 @@        LL.ValueSumList vs -> (fmap VList . raiseList raiseValue . LL.listElements) vs\n        LL.ValueSumInt64 i -> (return . VInt . fromIntegral) i\n        LL.ValueSumDecimal t -> (return . VDecimal . read . Text.unpack) t\n        LL.ValueSumText t -> (return . VText) t\n        LL.ValueSumTimestamp x -> (return . VTime . MicroSecondsSinceEpoch . fromIntegral) x"
  },
  {
    "id" : "0257e914-c15f-420c-a91f-0aad05c74752",
    "prId" : 2368,
    "comments" : [
      {
        "id" : "6f88ea6d-bc8b-4efd-9edc-3c54ce15fd66",
        "parentId" : null,
        "author" : null,
        "body" : "```suggestion\r\n        collapseErrors = either (Left . ThrewException) id\r\n```",
        "createdAt" : "2019-08-01T12:36:34Z",
        "updatedAt" : "2019-08-01T12:37:16Z",
        "lastEditedBy" : null,
        "tags" : [
        ]
      },
      {
        "id" : "faf7a883-9aac-4ea2-9960-df462f6b8305",
        "parentId" : "6f88ea6d-bc8b-4efd-9edc-3c54ce15fd66",
        "author" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "body" : "done, thanks",
        "createdAt" : "2019-08-05T15:36:43Z",
        "updatedAt" : "2019-08-05T15:36:44Z",
        "lastEditedBy" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "f819135b9015a28811f8fa4cb7540952ddb7a3c7",
    "line" : 83,
    "diffHunk" : "@@ -1,1 +177,181 @@    where\n        collapseErrors :: Either SomeException (Perhaps a) -> Perhaps a\n        collapseErrors =  either (Left . ThrewException) id\n\n"
  },
  {
    "id" : "79953e72-980f-41ec-bbcb-b2da9cfc7063",
    "prId" : 2368,
    "comments" : [
      {
        "id" : "96d30b87-4f9d-41ca-a15d-26d690e3d185",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "```suggestion\r\n    VVariant v -> LL.ValueSumVariant (lowerVariant v)\r\n```",
        "createdAt" : "2019-08-05T11:29:14Z",
        "updatedAt" : "2019-08-05T11:51:20Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "f819135b9015a28811f8fa4cb7540952ddb7a3c7",
    "line" : 30,
    "diffHunk" : "@@ -1,1 +118,122 @@lowerValue = LL.Value . Just . \\case\n    VRecord r -> (LL.ValueSumRecord . lowerRecord) r\n    VVariant v -> (LL.ValueSumVariant . lowerVariant) v\n    VContract c -> (LL.ValueSumContractId . unContractId) c\n    VList vs -> (LL.ValueSumList . LL.List . Vector.fromList . map lowerValue) vs"
  },
  {
    "id" : "49470e1a-2deb-450d-8e8a-b6d8ca2fd966",
    "prId" : 2368,
    "comments" : [
      {
        "id" : "820b002e-a33f-48e5-a21f-2c0f199e8995",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "FYI, the idiom we use in (most of) our code base is like:\r\n```suggestion\r\n    VTime x -> LL.ValueSumTimestamp $ fromIntegral $ unMicroSecondsSinceEpoch x\r\n```",
        "createdAt" : "2019-08-05T11:30:45Z",
        "updatedAt" : "2019-08-05T11:51:20Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "f819135b9015a28811f8fa4cb7540952ddb7a3c7",
    "line" : 38,
    "diffHunk" : "@@ -1,1 +124,128 @@    VDecimal t -> LL.ValueSumDecimal t\n    VText t -> LL.ValueSumText t\n    VTime x -> (LL.ValueSumTimestamp . fromIntegral . unMicroSecondsSinceEpoch) x\n    VParty p -> (LL.ValueSumParty . unParty) p\n    VBool b -> LL.ValueSumBool b"
  },
  {
    "id" : "6f4bd8c4-42f8-4295-96c1-857597656177",
    "prId" : 2368,
    "comments" : [
      {
        "id" : "c1ea04ad-2d27-439a-85da-07603c9609ec",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "```suggestion\r\n        LL.ValueSumVariant v -> VVariant <$> raiseVariant v\r\n```",
        "createdAt" : "2019-08-05T11:38:28Z",
        "updatedAt" : "2019-08-05T11:51:20Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "f819135b9015a28811f8fa4cb7540952ddb7a3c7",
    "line" : 102,
    "diffHunk" : "@@ -1,1 +350,354 @@    LL.Value (Just sum) -> case sum of\n        LL.ValueSumRecord r -> (fmap VRecord . raiseRecord) r\n        LL.ValueSumVariant v -> (fmap VVariant . raiseVariant) v\n        LL.ValueSumEnum e -> (fmap VEnum . raiseEnum) e\n        LL.ValueSumContractId c -> (return . VContract . ContractId) c"
  },
  {
    "id" : "cb71037c-2ec5-412e-b622-be23498c7f9d",
    "prId" : 2321,
    "comments" : [
      {
        "id" : "91976753-c5f9-4f59-9b9c-c6b975057cd4",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "I find this incredibly hard to read because it's not clear what variables go into `Completion{..}` and which don't. I only know that both `cid` and `status` must go into the record construction since they would be unused otherwise but I'm usually too slow (or too lazy) to run the check for unused variables in my head.\r\n```suggestion\r\n         return Completion{cid, status}\r\n```\r\nThis might look like I'm contradicting myself but I don't. I can live with record wildcards in _pattern matching_ but I think they are almost always a mistake in record construction.",
        "createdAt" : "2019-07-30T07:15:22Z",
        "updatedAt" : "2019-07-30T07:20:02Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "0c8ea031-80cb-4b4e-bd51-716759647809",
        "parentId" : "91976753-c5f9-4f59-9b9c-c6b975057cd4",
        "author" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "body" : "I'm not really sure I understand the reasoning why one is ok and one is bad...\r\nBut I don't really care that much.\r\nI'll change them all back again in another PR.",
        "createdAt" : "2019-07-30T08:23:08Z",
        "updatedAt" : "2019-07-30T08:23:09Z",
        "lastEditedBy" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "5649c142-9335-4f74-afdd-9b8de06bd350",
        "parentId" : "91976753-c5f9-4f59-9b9c-c6b975057cd4",
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "I'm not a big fan of record wildcards in pattern matching but I can live with them. They implicitly bring names into scope, which is less than optimal. However, if a see a name that has not been brought into scope explicitly and there's a pattern match with a record wildcard, I can at least assume that's where the name is coming from.\r\nIf I see a record construction using a record wildcard, the only way I can figure out what actually going into that construction is to go and look at the type definition. That is something I can hardly live with.\r\nDoes that explanation make at least some sense?",
        "createdAt" : "2019-07-30T12:02:58Z",
        "updatedAt" : "2019-07-30T12:02:59Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "1f2db8aa702af32ed66d9fd525a174268d6fb0f2",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +211,215 @@        cid <- raiseCommandId completionCommandId\n        let status = completionStatus\n        return Completion{..}\n\nraiseCheckpoint :: LL.Checkpoint -> Perhaps Checkpoint"
  },
  {
    "id" : "ed9b0f7f-8a9c-4902-bd41-d0fee02aaa94",
    "prId" : 2067,
    "comments" : [
      {
        "id" : "60bbd28b-39ee-4151-9fa9-e5e939c5c8a4",
        "parentId" : null,
        "author" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "body" : "This is an unrelated bug fix",
        "createdAt" : "2019-07-09T12:43:29Z",
        "updatedAt" : "2019-07-09T12:43:29Z",
        "lastEditedBy" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "db14f1a6e0a6eb3965e0abef2a70c66c0b63aece",
    "line" : 41,
    "diffHunk" : "@@ -1,1 +245,249 @@        cid <- raiseContractId exercisedEventContractId\n        tid <- perhaps \"exercisedEventTemplateId\" exercisedEventTemplateId >>= raiseTemplateId\n        ccEid <- raiseEventId exercisedEventContractCreatingEventId\n        choice <- raiseChoice exercisedEventChoice\n        choiceArg <- perhaps \"exercisedEventChoiceArgument\" exercisedEventChoiceArgument >>= raiseValue"
  },
  {
    "id" : "0749889c-cea6-43f5-8c76-9ed4cd31766c",
    "prId" : 2067,
    "comments" : [
      {
        "id" : "17d62232-8b93-406e-bc69-9c7e3a35d8e9",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "There's no need for a `case` expression here. The pattern can just come after the function name. Record wild cards might also help to make this a bit less verbose.",
        "createdAt" : "2019-07-15T11:34:44Z",
        "updatedAt" : "2019-07-15T11:36:11Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "bd561242-8dc6-47a1-80eb-0beb5e6bd7f2",
        "parentId" : "17d62232-8b93-406e-bc69-9c7e3a35d8e9",
        "author" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "body" : "Are we really happy with the use of `{..}` ?\r\nThe way it implicitly brings unknown names into scope seems rather scary.",
        "createdAt" : "2019-07-15T13:01:53Z",
        "updatedAt" : "2019-07-15T13:01:53Z",
        "lastEditedBy" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "447fb4de-9879-4ba3-ac27-34fed6ce5b38",
        "parentId" : "17d62232-8b93-406e-bc69-9c7e3a35d8e9",
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "I'm not the biggest fan of `{..}` either but we have plenty of it in our code base already. Instead of\r\n```\r\nf C{x, y} = x+y\r\n```\r\nor\r\n```\r\nf C{..} = x+y\r\n```\r\nI usually prefer\r\n```\r\nf x = x c + y c\r\n```\r\nThat avoids the `{..}` and repeating the names at the same time.",
        "createdAt" : "2019-07-15T15:40:48Z",
        "updatedAt" : "2019-07-15T15:40:48Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "db14f1a6e0a6eb3965e0abef2a70c66c0b63aece",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +163,167 @@\nraiseGetActiveContractsResponse :: LL.GetActiveContractsResponse -> Perhaps (AbsOffset,Maybe WorkflowId,[Event])\nraiseGetActiveContractsResponse = \\case\n    LL.GetActiveContractsResponse{getActiveContractsResponseOffset,\n                                  getActiveContractsResponseWorkflowId,"
  },
  {
    "id" : "b2b21ab1-e2fd-4967-ae83-cc87641f0d08",
    "prId" : 2029,
    "comments" : [
      {
        "id" : "b86372db-e7df-40be-8a99-495b8ac3fcc9",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Not sure extracting this to a separate function is helpful. The logic is simple and short so inlining it might be better than introducing an uncommon abstraction.",
        "createdAt" : "2019-07-05T15:53:01Z",
        "updatedAt" : "2019-07-05T16:14:46Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "df821e7a-9b01-45aa-87f7-bedb3fa8044a",
        "parentId" : "b86372db-e7df-40be-8a99-495b8ac3fcc9",
        "author" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "body" : "ok",
        "createdAt" : "2019-07-08T09:49:23Z",
        "updatedAt" : "2019-07-08T09:49:23Z",
        "lastEditedBy" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "ec9c9d014032efd981e4522a47dfb769819d7c4a",
    "line" : 31,
    "diffHunk" : "@@ -1,1 +37,41 @@-- lower\n\nlowerList :: (a -> b) -> [a] -> Vector b\nlowerList lowerElem xs = Vector.fromList $ map lowerElem xs\n"
  },
  {
    "id" : "18f372c6-312d-4400-9e52-6b96f14b3d21",
    "prId" : 2029,
    "comments" : [
      {
        "id" : "b00f8cdb-eb47-4e5d-abf9-c997f0440927",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "This might be clearer if you generalize this a bit:\r\n```haskell\r\nraiseMap\r\n    :: forall f k k' v v'. (Monad f, Ord k')\r\n    => (k -> f k')\r\n    -> (v -> f v')\r\n    -> Map k v\r\n    -> f (Map k' v')\r\nraiseMap raiseK raiseV = fmap Map.fromList . mapM (uncurry raiseKV) . Map.toList\r\n    where raiseKV :: k -> v -> f (k', v')\r\n          raiseKV kLow vLow = (,) <$> raiseK kLow <*> raiseV vLow\r\n```\r\nYou can move the handling of the `Maybe` part into `raiseV`.",
        "createdAt" : "2019-07-05T16:06:33Z",
        "updatedAt" : "2019-07-05T16:14:46Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "62b02c48-b5e5-4cdf-b96b-65ddefe07499",
        "parentId" : "b00f8cdb-eb47-4e5d-abf9-c997f0440927",
        "author" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "body" : "The `Maybe` is important for this abstraction, because it corresponds to the type attributed by `grpc-haskell`  to protobuf Maps. And so the caller line is simply this: \r\n```\r\nevents <- raiseMap raiseEventId raiseTreeEvent transactionTreeEventsById\r\n```\r\n\r\nKeeping the `Maybe` means generalisaion to `Monad f` is not directly possible, because the code as written includes `missing \"mapElem\"`, and `missing` is specific to the `Perhaps` monad.\r\n\r\nBut in any case I don't think generalising to an arbitrary monad here would be particularly helpful to the reader. This whole file is about `lower`ing and `raise`ing types, and all the `raise` functions operate in the `Perhaps` monad.",
        "createdAt" : "2019-07-08T10:08:24Z",
        "updatedAt" : "2019-07-08T10:08:24Z",
        "lastEditedBy" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "b63636bc-460c-46dd-9b96-27bf8fa81d30",
        "parentId" : "b00f8cdb-eb47-4e5d-abf9-c997f0440927",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "I see, you could still generalize while keeping `Maybe` if you let the caller pass in a handler for the `Nothing` case but that’s probably not worth it. Would be nice to capture the fact that `Maybe` comes from `grpc-haskell` in a comment. That said, I would at least generalize the key type. If I see a type that is not polymorphic, I expect that there is a reason for it but here you aren’t making use of the fact that it is `Text`.",
        "createdAt" : "2019-07-08T10:15:11Z",
        "updatedAt" : "2019-07-08T10:15:11Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "227eb626-c7c8-4aab-904b-a72be56fa429",
        "parentId" : "b00f8cdb-eb47-4e5d-abf9-c997f0440927",
        "author" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "body" : "I will generalize from `Text` to any key type. And add a comment about the `Maybe` :)",
        "createdAt" : "2019-07-08T10:46:46Z",
        "updatedAt" : "2019-07-08T10:46:46Z",
        "lastEditedBy" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "ec9c9d014032efd981e4522a47dfb769819d7c4a",
    "line" : 116,
    "diffHunk" : "@@ -1,1 +382,386 @@              x:xs -> do y <- f x; ys <- loop xs; return $ y:ys\n\nraiseMap :: forall a b c. Ord a =>\n                (Text -> Perhaps a) -> (b -> Perhaps c) -> Map Text (Maybe b) -> Perhaps (Map a c)\nraiseMap raiseK raiseV = fmap Map.fromList . mapM raiseKV . Map.toList"
  },
  {
    "id" : "e0ae6320-e0a9-416a-8750-cc1cd326fc77",
    "prId" : 1342,
    "comments" : [
      {
        "id" : "acd99c41-14f8-46c1-a09d-b051bac9d9e2",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "A more idiomatic way to write this is\r\n```haskell\r\nfmap VRecord (raiseRecord r)\r\n```\r\nor\r\n```haskell\r\nfmap VRecord $ raiseRecord r\r\n````\r\nor in this special case\r\n```haskell\r\nVRecord <$> raiseRecord r\r\n```\r\n@neil-da Should we add an hlint rule for the first suggestion?",
        "createdAt" : "2019-05-24T12:44:30Z",
        "updatedAt" : "2019-05-24T12:44:30Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "095183b3-dd16-4a32-befb-fe84baccd328",
        "parentId" : "acd99c41-14f8-46c1-a09d-b051bac9d9e2",
        "author" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "body" : "Are you saying that the fragment `(f . g) x` is not idomatic? And `f (g x)` or `f $ g x` is better?",
        "createdAt" : "2019-05-24T15:18:30Z",
        "updatedAt" : "2019-05-24T15:18:30Z",
        "lastEditedBy" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "6a33b141-3d74-4413-98f9-290830e94d98",
        "parentId" : "acd99c41-14f8-46c1-a09d-b051bac9d9e2",
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "Yes, that is what I meant.",
        "createdAt" : "2019-05-24T16:06:55Z",
        "updatedAt" : "2019-05-24T16:06:56Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "f4126001-0339-4054-a721-c0ecc7e7603b",
        "parentId" : "acd99c41-14f8-46c1-a09d-b051bac9d9e2",
        "author" : {
          "login" : "neil-da",
          "name" : "Neil Mitchell",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/35463327?u=0eb1719958bc6e449ec5e7df3a312fa566f5055d&v=4"
        },
        "body" : "https://github.com/ndmitchell/hlint/issues/644",
        "createdAt" : "2019-05-25T09:02:53Z",
        "updatedAt" : "2019-05-25T09:02:53Z",
        "lastEditedBy" : {
          "login" : "neil-da",
          "name" : "Neil Mitchell",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/35463327?u=0eb1719958bc6e449ec5e7df3a312fa566f5055d&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "b47e2ac0d39770b24721e1dcd04ee7bb4eed8269",
    "line" : 139,
    "diffHunk" : "@@ -1,1 +183,187 @@    LL.Value Nothing -> missing \"Value\"\n    LL.Value (Just sum) -> case sum of\n        LL.ValueSumRecord r -> (fmap VRecord . raiseRecord) r\n        LL.ValueSumVariant _ -> undefined\n        LL.ValueSumContractId c -> (return . VContract . ContractId) c"
  },
  {
    "id" : "7a9059d7-88ab-4bf8-8e69-9ade0ec66a7b",
    "prId" : 879,
    "comments" : [
      {
        "id" : "34a5a670-6bb4-4744-b94b-e4d33dcc8de4",
        "parentId" : null,
        "author" : {
          "login" : "neil-da",
          "name" : "Neil Mitchell",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/35463327?u=0eb1719958bc6e449ec5e7df3a312fa566f5055d&v=4"
        },
        "body" : "I just write undefined - you're also not finished if undefined exists in your code...",
        "createdAt" : "2019-05-03T10:19:47Z",
        "updatedAt" : "2019-05-03T10:20:18Z",
        "lastEditedBy" : {
          "login" : "neil-da",
          "name" : "Neil Mitchell",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/35463327?u=0eb1719958bc6e449ec5e7df3a312fa566f5055d&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "8115afd41b7797436684816ff474f2ce0f10f185",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +13,17 @@import           DA.Ledger.Types\n\nxxx :: a -- TODO: not finished while any instances of \"xxx\" of \"_\" remain in this file\nxxx = undefined\n"
  }
]