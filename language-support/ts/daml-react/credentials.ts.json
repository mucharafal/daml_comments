[
  {
    "id" : "3f9c1535-b7aa-45e1-bec2-ad1f43951998",
    "prId" : 4259,
    "comments" : [
      {
        "id" : "5882655f-fd0c-4d61-8d74-3e2e5c6fad58",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "This should probably go away before we publish this as a library.",
        "createdAt" : "2020-01-29T13:35:53Z",
        "updatedAt" : "2020-01-29T14:14:32Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "b81aeb5c-5f3c-4ad8-b854-70415326dfd7",
        "parentId" : "5882655f-fd0c-4d61-8d74-3e2e5c6fad58",
        "author" : {
          "login" : "robin-da",
          "name" : "Robin Krom",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/14074936?u=1b47fdbdfd82ea534219fc1b94d646873c56a7d7&v=4"
        },
        "body" : "good catch, thanks!",
        "createdAt" : "2020-01-29T13:39:38Z",
        "updatedAt" : "2020-01-29T14:14:32Z",
        "lastEditedBy" : {
          "login" : "robin-da",
          "name" : "Robin Krom",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/14074936?u=1b47fdbdfd82ea534219fc1b94d646873c56a7d7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "3a921ccfb910a49e67cfcd805439324286cd726f",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,28 @@\n+// Copyright (c) 2020 The DAML Authors. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+import { decode } from 'jwt-simple';\n+\n+const LEDGER_ID: string = 'DAVL';"
  },
  {
    "id" : "13968fdd-0ded-46f8-8727-d0f4cca2bcff",
    "prId" : 4259,
    "comments" : [
      {
        "id" : "f69b96e7-3ff1-4dfd-9e9f-ec28ccf69518",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "This also mentions DAVL. If there is more stuff that references DAVL Iâ€™m happy for this to be addressed in a separate PR. probably good to just grep through the codebase before we publish the library.",
        "createdAt" : "2020-01-29T13:49:48Z",
        "updatedAt" : "2020-01-29T14:14:32Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "62b9acd9-dcf9-4858-87bf-9265f85e5b58",
        "parentId" : "f69b96e7-3ff1-4dfd-9e9f-ec28ccf69518",
        "author" : {
          "login" : "robin-da",
          "name" : "Robin Krom",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/14074936?u=1b47fdbdfd82ea534219fc1b94d646873c56a7d7&v=4"
        },
        "body" : "thanks, fixed.",
        "createdAt" : "2020-01-29T13:51:29Z",
        "updatedAt" : "2020-01-29T14:14:32Z",
        "lastEditedBy" : {
          "login" : "robin-da",
          "name" : "Robin Krom",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/14074936?u=1b47fdbdfd82ea534219fc1b94d646873c56a7d7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "3a921ccfb910a49e67cfcd805439324286cd726f",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,27 @@\n+// Copyright (c) 2020 The DAML Authors. All rights reserved.\n+// SPDX-License-Identifier: Apache-2.0\n+\n+import { decode } from 'jwt-simple';\n+\n+export type Credentials = {\n+  party: string;\n+  token: string;\n+  ledgerId: string;\n+}\n+\n+/**\n+ * Check that the party in the token matches the party of the credentials and\n+ * that the ledger ID in the token matches the given ledger id.\n+ */\n+export const preCheckCredentials = ({party, token, ledgerId}: Credentials): string | null => {\n+  const decoded = decode(token, '', true);\n+  if (!decoded.ledgerId || decoded.ledgerId !== ledgerId) {\n+    return 'The password is not valid for DAVL.';"
  }
]