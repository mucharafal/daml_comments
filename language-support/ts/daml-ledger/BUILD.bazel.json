[
  {
    "id" : "69d731f3-137f-4969-9489-8f9c9bc6fb14",
    "prId" : 5180,
    "comments" : [
      {
        "id" : "6e2eb9da-7fb9-42fd-b919-ba3d4a0c5328",
        "parentId" : null,
        "author" : {
          "login" : "robin-da",
          "name" : "Robin Krom",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/14074936?u=1b47fdbdfd82ea534219fc1b94d646873c56a7d7&v=4"
        },
        "body" : "I'm a bit worried that I have to exlude the 'node_modules' directory here. Otherwise eslint decends into it in the runfiles.",
        "createdAt" : "2020-03-31T14:02:47Z",
        "updatedAt" : "2020-03-31T15:39:02Z",
        "lastEditedBy" : {
          "login" : "robin-da",
          "name" : "Robin Krom",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/14074936?u=1b47fdbdfd82ea534219fc1b94d646873c56a7d7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "0250cb37-30a9-472b-9b2a-c8a57037e04e",
        "parentId" : "6e2eb9da-7fb9-42fd-b919-ba3d4a0c5328",
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "The alternative is to list all files explicitly like we do for the `da_ts_library` above. Maybe it's worth to split this out in a `filegroup`. Let's to that in a separate PR though. Here and for `@daml/react` as well.",
        "createdAt" : "2020-03-31T14:57:40Z",
        "updatedAt" : "2020-03-31T15:39:02Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "263cac57-308e-42b9-a444-d7c4aaffb909",
        "parentId" : "6e2eb9da-7fb9-42fd-b919-ba3d4a0c5328",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "I personally feel that `glob` in build systems is an anti-pattern. I would be very happy if we explicitly enumerated the modules that go into a target not just here but in general.",
        "createdAt" : "2020-03-31T15:00:49Z",
        "updatedAt" : "2020-03-31T15:39:02Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "25b76198-040c-4738-bfc6-b6a4fec0ee43",
        "parentId" : "6e2eb9da-7fb9-42fd-b919-ba3d4a0c5328",
        "author" : {
          "login" : "robin-da",
          "name" : "Robin Krom",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/14074936?u=1b47fdbdfd82ea534219fc1b94d646873c56a7d7&v=4"
        },
        "body" : "ok, let's fix this in a followup PR.",
        "createdAt" : "2020-03-31T15:14:18Z",
        "updatedAt" : "2020-03-31T15:39:03Z",
        "lastEditedBy" : {
          "login" : "robin-da",
          "name" : "Robin Krom",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/14074936?u=1b47fdbdfd82ea534219fc1b94d646873c56a7d7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "d1750ad64940421aef165938f3ec54231c3b408e",
    "line" : null,
    "diffHunk" : "@@ -40,7 +39,7 @@ eslint_test(\n     name = \"lint\",\n     srcs = glob(\n         [\"**/*.ts\"],\n-        exclude = [\"lib/**/*\"],\n+        exclude = [\"lib/**/*\", \"node_modules/**/*\"]"
  },
  {
    "id" : "44481c12-13c4-4202-90b6-2f6ec42ba7f8",
    "prId" : 5180,
    "comments" : [
      {
        "id" : "60b93713-22bd-4789-bd93-194e3c90a1e1",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "Let's add `@types/jest` and `jest-mock-console` explicitly instead of including the whole world. :)\r\n```suggestion\r\n        \"@language_support_ts_deps//@mojotech/json-type-validation\",\r\n        \"@language_support_ts_deps//@types/jest\",\r\n        \"@language_support_ts_deps//@types/ws\",\r\n        \"@language_support_ts_deps//cross-fetch\",\r\n        \"@language_support_ts_deps//events\",\r\n        \"@language_support_ts_deps//isomorphic-ws\",\r\n        \"@language_support_ts_deps//jest-mock-console\",\r\n        \"@language_support_ts_deps//ws\",\r\n```",
        "createdAt" : "2020-03-31T15:02:09Z",
        "updatedAt" : "2020-03-31T15:39:02Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "d1750ad64940421aef165938f3ec54231c3b408e",
    "line" : null,
    "diffHunk" : "@@ -8,20 +8,19 @@ load(\"//language-support/ts:defs.bzl\", \"da_ts_library\")\n load(\"//language-support/ts:eslint.bzl\", \"eslint_test\")\n load(\"//language-support/ts:typedoc.bzl\", \"ts_docs\")\n load(\"@build_environment//:configuration.bzl\", \"sdk_version\")\n+load(\"//language-support/ts:jest.bzl\", \"jest_test\")\n \n da_ts_library(\n     name = \"daml-ledger\",\n-    srcs = [\"index.ts\"],\n+    srcs = [\n+        \"index.test.ts\",\n+        \"index.ts\",\n+    ],\n     module_name = \"@daml/ledger\",\n     visibility = [\"//visibility:public\"],\n     deps = [\n         \"//language-support/ts/daml-types\",\n-        \"@language_support_ts_deps//@mojotech/json-type-validation\",\n-        \"@language_support_ts_deps//@types/ws\",\n-        \"@language_support_ts_deps//cross-fetch\",\n-        \"@language_support_ts_deps//events\",\n-        \"@language_support_ts_deps//isomorphic-ws\",\n-        \"@language_support_ts_deps//ws\",\n+        \"@language_support_ts_deps//:node_modules\","
  },
  {
    "id" : "87db738b-a11d-42db-b924-e4ad2a04e5f5",
    "prId" : 4380,
    "comments" : [
      {
        "id" : "7f1590cf-a257-45f8-98fa-40d569466dd8",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Does this name leak into the `package.json` files we publish?",
        "createdAt" : "2020-02-04T15:07:25Z",
        "updatedAt" : "2020-02-04T17:02:14Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "2416795c-d838-4462-af43-8435de112f55",
        "parentId" : "7f1590cf-a257-45f8-98fa-40d569466dd8",
        "author" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "body" : "That name didn't leak. However, I had to restructure things and now it's gone. Will expand in a dedicated comment.",
        "createdAt" : "2020-02-04T17:04:24Z",
        "updatedAt" : "2020-02-04T17:04:25Z",
        "lastEditedBy" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "04bab3bdb7ca0581e7997869e8988cb955668b3a",
    "line" : null,
    "diffHunk" : "@@ -44,6 +45,16 @@ eslint_test(\n     ),\n )\n \n+ts_commonjs_library(\n+    name = \"daml-ledger.commonjs\","
  },
  {
    "id" : "3209f651-6264-49dc-ac19-88d770249f98",
    "prId" : 4380,
    "comments" : [
      {
        "id" : "923ab4cf-f5e5-4f2b-88b4-22c7a1a57f8e",
        "parentId" : null,
        "author" : {
          "login" : "robin-da",
          "name" : "Robin Krom",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/14074936?u=1b47fdbdfd82ea534219fc1b94d646873c56a7d7&v=4"
        },
        "body" : "are these files still included in the package with the new rule?",
        "createdAt" : "2020-02-04T17:51:28Z",
        "updatedAt" : "2020-02-04T17:54:46Z",
        "lastEditedBy" : {
          "login" : "robin-da",
          "name" : "Robin Krom",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/14074936?u=1b47fdbdfd82ea534219fc1b94d646873c56a7d7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "807329f6-1522-47ac-9ac5-306a24ac57d5",
        "parentId" : "923ab4cf-f5e5-4f2b-88b4-22c7a1a57f8e",
        "author" : {
          "login" : "robin-da",
          "name" : "Robin Krom",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/14074936?u=1b47fdbdfd82ea534219fc1b94d646873c56a7d7&v=4"
        },
        "body" : "yes they are, just checked.",
        "createdAt" : "2020-02-04T17:58:57Z",
        "updatedAt" : "2020-02-04T17:58:58Z",
        "lastEditedBy" : {
          "login" : "robin-da",
          "name" : "Robin Krom",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/14074936?u=1b47fdbdfd82ea534219fc1b94d646873c56a7d7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "04bab3bdb7ca0581e7997869e8988cb955668b3a",
    "line" : 17,
    "diffHunk" : "@@ -3,22 +3,15 @@\n \n load(\"@os_info//:os_info.bzl\", \"is_windows\")\n load(\"@build_bazel_rules_nodejs//:index.bzl\", \"pkg_npm\")\n-load(\"@npm_bazel_typescript//:index.bzl\", \"ts_library\")\n load(\"@bazel_tools//tools/build_defs/pkg:pkg.bzl\", \"pkg_tar\")\n+load(\"//language-support/ts:defs.bzl\", \"da_ts_library\")\n load(\"//language-support/ts:eslint.bzl\", \"eslint_test\")\n load(\"@sdk_version//:sdk_version.bzl\", \"sdk_version\")\n \n-ts_library(\n+da_ts_library(\n     name = \"daml-ledger\",\n-    srcs = glob([\"**/*.ts\"]),\n-    data = [\n-        \":LICENSE\",\n-        \":README.md\",\n-        \":package.json\","
  }
]