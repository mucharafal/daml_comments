[
  {
    "id" : "32f94874-e2d8-48cd-a687-2f3a61e7836c",
    "prId" : 5243,
    "comments" : [
      {
        "id" : "747652b9-3700-4ca9-bd06-cd303e788f52",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "We already have `assertInfixOf` in `DA.Test.Util`. Maybe just add a `msg argument to that instead of duplicating it here?",
        "createdAt" : "2020-03-27T10:49:39Z",
        "updatedAt" : "2020-03-27T10:50:09Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "b336a269-18ce-4570-be72-389152fb56fd",
        "parentId" : "747652b9-3700-4ca9-bd06-cd303e788f52",
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "Good catch. Fixed in https://github.com/digital-asset/daml/pull/5245. The actual message is not really important.",
        "createdAt" : "2020-03-27T11:29:35Z",
        "updatedAt" : "2020-03-27T11:29:52Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "a89d638a6d26e87992a2f9238dc3fee338e27ed8",
    "line" : 140,
    "diffHunk" : "@@ -1,1 +294,298 @@      assertEqual (\"The content of file '\" ++ file ++ \"' does not match\") expectedContent actualContent\n\n    assertIsInfixOf :: String -> String -> String -> IO ()\n    assertIsInfixOf msg x y =\n      assertBool (msg ++ \"\\nexpected infix: \" ++ show x ++ \"\\nbut got: \" ++ show y) (x `isInfixOf` y)"
  },
  {
    "id" : "797da98a-52de-4c06-abb4-1d2c9063897d",
    "prId" : 5218,
    "comments" : [
      {
        "id" : "d0e02250-4bd3-4f5a-857c-749aac0723b5",
        "parentId" : null,
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "We write once here in the test and use it for all the packages.",
        "createdAt" : "2020-03-26T16:40:01Z",
        "updatedAt" : "2020-03-26T18:18:26Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "0abe93a6fc31745849983ecd333eea94a1ba62f5",
    "line" : 53,
    "diffHunk" : "@@ -1,1 +220,224 @@            , \"name\" .= (\"daml2ts\" :: T.Text)\n            , \"version\" .= (\"0.0.0\" :: T.Text)\n            ]\n        BSL.writeFile \".eslintrc.json\" $ encode $\n          object"
  },
  {
    "id" : "ca655742-e37a-4016-bf89-3fb144fdbf53",
    "prId" : 5201,
    "comments" : [
      {
        "id" : "948da9a8-a608-41e7-91dc-660d47be4c19",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "I'm surprised this test actually passes. There is no `DAVL.ts` in v5, there's only `DAVL/V5.ts`. Can you please investigate?",
        "createdAt" : "2020-03-26T07:04:55Z",
        "updatedAt" : "2020-03-26T07:06:34Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "156aeee6-1fb0-4c73-91cf-9c06e09e6ed9",
        "parentId" : "948da9a8-a608-41e7-91dc-660d47be4c19",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "Indeed, it's there : https://raw.githubusercontent.com/digital-asset/davl/51d3977be2ab22f7f4434fd4692ca2e17a7cce23/v5/daml/DAVL.daml. I can only suppose that v5 changed in more recent commits?",
        "createdAt" : "2020-03-26T09:12:52Z",
        "updatedAt" : "2020-03-26T09:12:52Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "5679c6d1-77d7-4e47-92b7-587562b4e806",
        "parentId" : "948da9a8-a608-41e7-91dc-660d47be4c19",
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "Oh, that explains it. Thanks. Let's move to a newer version of DAVL in another PR.",
        "createdAt" : "2020-03-26T09:18:26Z",
        "updatedAt" : "2020-03-26T09:18:26Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "91e3b459-59a5-45d0-a2ee-c9ca8bf442f5",
        "parentId" : "948da9a8-a608-41e7-91dc-660d47be4c19",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "You got it. I shall take care of it.",
        "createdAt" : "2020-03-26T09:38:57Z",
        "updatedAt" : "2020-03-26T09:38:57Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "11b735477a2393f77f4bc62c52d05aa4017f59d1",
    "line" : 101,
    "diffHunk" : "@@ -1,1 +207,211 @@          [\"-o\", daml2tsDir]\n        mapM_ (assertTsFileExists (daml2tsDir </> \"davl-0.0.4\")) [ \"index\", \"DAVL\" ]\n        mapM_ (assertTsFileExists (daml2tsDir </> \"davl-0.0.5\")) [ \"index\", \"DAVL\" ]\n        mapM_ (assertTsFileExists (daml2tsDir </> \"davl-upgrade-v4-v5-0.0.5\")) [ \"index\", \"Upgrade\" ]\n      step \"eslint...\""
  },
  {
    "id" : "be869042-854f-4268-b100-adfa39c0a852",
    "prId" : 5201,
    "comments" : [
      {
        "id" : "a6381043-50d0-4ede-bc2f-e30af57d8139",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "```suggestion\r\n      assertFileExists (proj </> \"lib\" </> file <.> \"d.ts\")\r\n```",
        "createdAt" : "2020-03-26T07:05:38Z",
        "updatedAt" : "2020-03-26T07:06:34Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "11b735477a2393f77f4bc62c52d05aa4017f59d1",
    "line" : 147,
    "diffHunk" : "@@ -1,1 +270,274 @@      assertFileExists (proj </> \"src\" </> file <.> \"ts\")\n      assertFileExists (proj </> \"lib\" </> file <.> \"js\")\n      assertFileExists (proj </> \"lib\" </> file <.> \".d.ts\")\n        where\n          assertFileExists :: FilePath -> IO ()"
  },
  {
    "id" : "ac29d625-468d-45b6-9e27-4b0802d34b49",
    "prId" : 5171,
    "comments" : [
      {
        "id" : "0a60d043-7a3f-4a99-b085-3068bb7a1521",
        "parentId" : null,
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "We should probably lift these constants to the type of the file for easy maintenance as we do in `TsCodeGenMain.hs`.",
        "createdAt" : "2020-03-25T16:42:33Z",
        "updatedAt" : "2020-03-25T16:45:52Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "5fea79ce-5791-4c9c-9fe5-25584ed1c6c8",
        "parentId" : "0a60d043-7a3f-4a99-b085-3068bb7a1521",
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "I agree.",
        "createdAt" : "2020-03-25T17:44:38Z",
        "updatedAt" : "2020-03-25T17:50:50Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "7b589a28-01cd-45ac-a400-02e948a7b40c",
        "parentId" : "0a60d043-7a3f-4a99-b085-3068bb7a1521",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "Done.",
        "createdAt" : "2020-03-25T20:08:03Z",
        "updatedAt" : "2020-03-25T20:08:03Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "ede39c0bc7b73401d689c75f3f46feb6f2c5843f",
    "line" : 155,
    "diffHunk" : "@@ -1,1 +207,211 @@      step \"eslint...\"\n      withCurrentDirectory daml2tsDir $ do\n        pkgs <- (\\\\ [\"package.json\", \"node_modules\"]) <$> listDirectory daml2tsDir\n        BSL.writeFile \"package.json\" $ encode (\n          object"
  },
  {
    "id" : "3a7d4706-8bac-41d9-80eb-dc5edc9c2a5a",
    "prId" : 5171,
    "comments" : [
      {
        "id" : "5074fb2e-4070-4fc9-80aa-77fbbf013cce",
        "parentId" : null,
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "Note this.",
        "createdAt" : "2020-03-25T17:09:11Z",
        "updatedAt" : "2020-03-25T17:09:16Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "8abf9503-7bb5-48a0-b88e-05178a3ddb90",
        "parentId" : "5074fb2e-4070-4fc9-80aa-77fbbf013cce",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "Tracking in issue https://github.com/digital-asset/daml/issues/5196",
        "createdAt" : "2020-03-25T19:21:38Z",
        "updatedAt" : "2020-03-25T19:21:39Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "ede39c0bc7b73401d689c75f3f46feb6f2c5843f",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +35,39 @@    davl <- locateRunfiles (\"davl\" </> \"released\")\n    -- TODO (SF,2020-03-24): Factor out 'withEnv' from\n    -- 'DA/DamlAssistant/Tests.hs' into a library function and use it here.\n    oldPath <- getSearchPath\n    setEnv \"PATH\" (intercalate [searchPathSeparator] $ takeDirectory yarn : oldPath) True"
  },
  {
    "id" : "65f33172-28a8-4b2b-adbb-af73293f0d5e",
    "prId" : 5171,
    "comments" : [
      {
        "id" : "1a2c76f1-7a46-4ddd-bb46-3c0dec33f49a",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "Why not make\r\n```haskell\r\nsetupWorkspace = do\r\n  copyDirectory\r\n  writePackageJson\r\n```\r\nMaybe under the name `setupYarnEnvironment` or something similar?",
        "createdAt" : "2020-03-25T17:39:46Z",
        "updatedAt" : "2020-03-25T17:50:50Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "b685cb84-a407-457d-9580-2499ffbad2da",
        "parentId" : "1a2c76f1-7a46-4ddd-bb46-3c0dec33f49a",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "Ok",
        "createdAt" : "2020-03-25T19:27:10Z",
        "updatedAt" : "2020-03-25T19:27:10Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "ede39c0bc7b73401d689c75f3f46feb6f2c5843f",
    "line" : 50,
    "diffHunk" : "@@ -1,1 +145,149 @@        step \"daml2ts...\"\n        copyDirectory damlTypes \"daml-types\"\n        writePackageJson\n        (exitCode, _, err) <- readProcessWithExitCode daml2ts ([groverDar, superGroverDar] ++ [\"-o\", daml2tsDir]) \"\"\n        assertBool \"A different names for same package error was expected.\" (exitCode /= ExitSuccess && isJust (stripInfix \"Different names ('grover-1.0' and 'super-grover-1.0') for the same package detected\" err))"
  },
  {
    "id" : "e38313b5-ed9e-487d-b354-306a517589c7",
    "prId" : 5171,
    "comments" : [
      {
        "id" : "7868a767-177e-4192-98bb-c48087ca995f",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "We should also check for `index.*`. It might make sense to have a function like\r\n```haskell\r\nassertTsFileExists dir file = do\r\n  assertFileExists (dir </> \"src\" </> file <.> \"ts\")\r\n  assertFileExists (dir </> \"lib\" </> file <.> \"js\")\r\n  assertFileExists (dir </> \"lib\" </> file <.> \"d.ts\")\r\n```\r\nand call\r\n```haskell\r\nmapM_ (assertTsFileExists groverTs) [\"index\", \"Grover\", \"packageId\"]\r\n```\r\nThat would be beneficial below as well.",
        "createdAt" : "2020-03-25T17:43:42Z",
        "updatedAt" : "2020-03-25T17:50:50Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "86f6233c-3cb9-4a81-9036-d49ddae0c735",
        "parentId" : "7868a767-177e-4192-98bb-c48087ca995f",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "This is a very nice idea. Done.",
        "createdAt" : "2020-03-25T20:07:42Z",
        "updatedAt" : "2020-03-25T20:07:43Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "ede39c0bc7b73401d689c75f3f46feb6f2c5843f",
    "line" : 109,
    "diffHunk" : "@@ -1,1 +183,187 @@        assertFileExists (groverTsSrc </> \"packageId.ts\")\n        assertFileExists (groverTsLib </> \"packageId.js\")\n        assertFileExists (groverTsLib </> \"packageId.d.ts\")\n\n  , testCaseSteps \"DAVL test\" $ \\step -> withTempDir $ \\here -> do"
  },
  {
    "id" : "beb46da3-aa11-4e94-bf44-442bf046ff33",
    "prId" : 5171,
    "comments" : [
      {
        "id" : "d7b8d244-bb9b-4fef-bfb0-d9d74ac06665",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "We have the functionality of setting up the yarn environment for tests twice now. Here and way further up. We should factor that out, probably in a followup PR.",
        "createdAt" : "2020-03-25T17:47:33Z",
        "updatedAt" : "2020-03-25T17:50:50Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "fb0668ea-ba2f-4e1e-b617-94113ebc5bf1",
        "parentId" : "d7b8d244-bb9b-4fef-bfb0-d9d74ac06665",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "Well yes, we have two occasions to write json:\r\n(1)\r\n```haskell\r\n        BSL.writeFile \"package.json\" $ encode (\r\n          object\r\n            [ \"private\" .= True\r\n            , \"devDependencies\" .= pkgDevDependencies configConsts\r\n            , \"workspaces\" .= pkgs\r\n            , \"name\" .= (\"daml2ts\" :: T.Text)\r\n            , \"version\" .= (\"0.0.0\" :: T.Text)\r\n            ])\r\n```\r\n(2)\r\n```haskell\r\n    writePackageJson :: IO ()\r\n    writePackageJson = BSL.writeFile \"package.json\" $ encode packageJson\r\n      where\r\n        packageJson = object\r\n          [ \"private\" .= True\r\n          , \"workspaces\" .= ([\"daml2ts\"] :: [T.Text])\r\n          , \"resolutions\" .= HMS.fromList ([(\"@daml/types\", \"file:daml-types\")] :: [(T.Text, T.Text)])\r\n          ]\r\n```\r\nAlthough similar, they do have very different contents. Do you still feel this deserves refactoring?",
        "createdAt" : "2020-03-25T20:22:42Z",
        "updatedAt" : "2020-03-25T20:22:42Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "8ae21939-7d0d-4cc9-a87f-de5f5719f5b0",
        "parentId" : "d7b8d244-bb9b-4fef-bfb0-d9d74ac06665",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "Oh wait! I think you mean we do something similar in the DAML assistant too. Yes, we should definitely factor this out then. I'll put it on the stack with the 2 notes below.",
        "createdAt" : "2020-03-25T20:35:35Z",
        "updatedAt" : "2020-03-25T20:35:35Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "ede39c0bc7b73401d689c75f3f46feb6f2c5843f",
    "line" : 221,
    "diffHunk" : "@@ -1,1 +264,268 @@          , \"workspaces\" .= ([\"daml2ts\"] :: [T.Text])\n          , \"resolutions\" .= HMS.fromList ([(\"@daml/types\", \"file:daml-types\")] :: [(T.Text, T.Text)])\n          ]\n\n    assertFileExists :: FilePath -> IO ()"
  },
  {
    "id" : "09a94b7a-575b-40fa-89be-f7d53e6595ce",
    "prId" : 5171,
    "comments" : [
      {
        "id" : "ed9e5878-67ca-4972-8bf7-967e9561078c",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "I have a suspicion that this only works because we write too much in the `package.json` file for every package. I'm fine with keeping it in there for now and remove it in a followup PR.",
        "createdAt" : "2020-03-25T17:48:38Z",
        "updatedAt" : "2020-03-25T17:50:50Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "9886ed70-d189-4d3a-8365-6f3dbbb65efe",
        "parentId" : "ed9e5878-67ca-4972-8bf7-967e9561078c",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "I hope your suspicions are unfounded.\r\n```haskell\r\n\r\n    packageJson :: Value\r\n    packageJson = object\r\n      [ \"name\" .= (\"daml2ts\" :: T.Text)\r\n      , \"version\" .= version\r\n      , \"dependencies\" .= pkgDependencies config\r\n      , \"devDependencies\" .= pkgDevDependencies config\r\n      ]\r\n```\r\nwhere,\r\n```haskell\r\nconfigConsts :: T.Text -> ConfigConsts\r\nconfigConsts sdkVersion = ConfigConsts\r\n  { pkgDependencies = HMS.fromList\r\n      [ (NpmPackageName \"@mojotech/json-type-validation\", NpmPackageVersion \"^3.1.0\")\r\n      , (NpmPackageName \"@daml/types\", NpmPackageVersion sdkVersion)\r\n      ]\r\n  , pkgDevDependencies = HMS.fromList\r\n      [ (NpmPackageName \"typescript\", NpmPackageVersion \"~3.7.3\")\r\n      ]\r\n  , pkgScripts = HMS.fromList\r\n      [ (ScriptName \"build\", Script \"tsc\")\r\n      , (ScriptName \"lint\", Script \"eslint --ext .ts --max-warnings 0 src/\")\r\n      ]\r\n  }\r\n```\r\nLet me know!",
        "createdAt" : "2020-03-25T20:09:57Z",
        "updatedAt" : "2020-03-25T20:09:57Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "d0c1ab36-258e-48de-be24-284b71a78b40",
        "parentId" : "ed9e5878-67ca-4972-8bf7-967e9561078c",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "Related : I do observe that the `pkgDependencies` are not required for the lint test (in `Daml2ts.hs`). Removing those in this PR.",
        "createdAt" : "2020-03-25T20:14:19Z",
        "updatedAt" : "2020-03-25T20:26:14Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "83da95c1-e47a-4982-bf98-a8d8673f3346",
        "parentId" : "ed9e5878-67ca-4972-8bf7-967e9561078c",
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "Does that mean we can delete `pkgScripts`? Let's do that then! 🔥",
        "createdAt" : "2020-03-25T21:11:25Z",
        "updatedAt" : "2020-03-25T21:11:25Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "c58c91e5-6cc4-4a4c-ae76-3c3b6eb5e317",
        "parentId" : "ed9e5878-67ca-4972-8bf7-967e9561078c",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "Done.",
        "createdAt" : "2020-03-25T23:22:35Z",
        "updatedAt" : "2020-03-25T23:22:35Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "ede39c0bc7b73401d689c75f3f46feb6f2c5843f",
    "line" : 175,
    "diffHunk" : "@@ -1,1 +227,231 @@        callProcessSilent yarn [\"install\", \"--pure-lockfile\"]\n        callProcessSilent yarn [\"workspaces\", \"run\", \"lint\"]\n  ]\n  where\n    buildProject :: [String] -> IO ()"
  },
  {
    "id" : "3eeec103-da90-41c7-b5ae-4d5682fd56d5",
    "prId" : 5127,
    "comments" : [
      {
        "id" : "80d43c2c-8dc8-47c0-9d92-5fee446d5dab",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "Wouldn't it make more sense to update the tests to reflect the new package ids?",
        "createdAt" : "2020-03-24T09:56:54Z",
        "updatedAt" : "2020-03-24T09:57:25Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "016b21ab-e523-43af-b93d-84124bd49a2b",
        "parentId" : "80d43c2c-8dc8-47c0-9d92-5fee446d5dab",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "No, this test is verifying the error message you get if you have two packages with different names but the same package id. `daml build` won’t produce such packages anymore with DAML-LF 1.8 since the package name ends up in the metadata  so the package id is actually different. We could manually patch the `MANIFEST.MF` but that doesn’t really solve anything since `daml2ts` should switch to using the package metadata anyway.",
        "createdAt" : "2020-03-24T10:02:09Z",
        "updatedAt" : "2020-03-24T10:02:10Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "b46927e2-7146-469e-9663-98cb109b9725",
        "parentId" : "80d43c2c-8dc8-47c0-9d92-5fee446d5dab",
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "I see. That makes sense. Thanks for the explanation.",
        "createdAt" : "2020-03-24T12:20:32Z",
        "updatedAt" : "2020-03-24T12:20:33Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "90ae2e310abee6cb956a5652e6dfda332a9c5023",
    "line" : 31,
    "diffHunk" : "@@ -1,1 +97,101 @@      createDirectoryIfMissing True groverDaml\n      -- Locked to DAML-LF 1.7 since we get different package ids due to\n      -- package metadata in DAML-LF 1.8.\n      withCurrentDirectory grover $ do\n        writeFileUTF8 (groverDaml </> \"Grover.daml\") $ unlines"
  },
  {
    "id" : "70ece398-43e8-43a4-88ae-f0438f3cb6d2",
    "prId" : 5098,
    "comments" : [
      {
        "id" : "31838a3e-cf0b-4044-be63-637cbf10ebca",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "An integration test seems a bit overkill (as opposed to just testing a library function that parses the JSON) but given that you already wrote it let’s just keep it for now.",
        "createdAt" : "2020-03-19T18:34:37Z",
        "updatedAt" : "2020-03-19T18:34:43Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "89312882f256fc1cc54ac6d03a1692bcf561dfb2",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +135,139 @@        assertBool \"A different names for same package error was expected.\" (exitCode /= ExitSuccess && isJust (stripInfix \"Different names ('grover-1.0' and 'super-grover-1.0') for the same package detected\" err))\n\n  , testCaseSteps \"Bad package.json test\" $ \\step -> withTempDir $ \\here -> do\n      let grover = here </> \"grover\"\n          groverDaml = grover </> \"daml\""
  },
  {
    "id" : "2c678a10-f1d0-4557-be3c-f409e438abf4",
    "prId" : 4799,
    "comments" : [
      {
        "id" : "565bfcc1-6f52-4728-bb17-d20d7b434294",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "This is impossible to review, can we please separate refactorings (e.g. factoring out the creation of `daml.yaml` which really should also go into a library since we want it from other tests) from the actual changes that here?",
        "createdAt" : "2020-03-04T08:08:48Z",
        "updatedAt" : "2020-03-04T19:19:03Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "516a9a33965e2db029a67edd5bcf173e1f360b77",
    "line" : 252,
    "diffHunk" : "@@ -1,1 +68,72 @@          groverDar = grover </> \".daml\" </> \"dist\" </> \"grover-1.0.dar\"\n      createDirectoryIfMissing True groverDaml\n      withCurrentDirectory grover $ do\n        writeFileUTF8 (grover </> \"daml\" </> \"Grover.daml\") $ unlines\n          [ \"module Grover where\""
  },
  {
    "id" : "9356753a-7683-4bba-a302-5009244344b6",
    "prId" : 4799,
    "comments" : [
      {
        "id" : "eff382fe-155d-4aed-bbf5-a5d051b7c5d1",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "This doesn’t look right, you removed the `exitFailure`at the end.",
        "createdAt" : "2020-03-04T08:28:24Z",
        "updatedAt" : "2020-03-04T19:19:03Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "3e71ba88-ab1f-401c-a6e6-275bf9bbd9d2",
        "parentId" : "eff382fe-155d-4aed-bbf5-a5d051b7c5d1",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "genuine bug. thank-you.",
        "createdAt" : "2020-03-04T13:58:52Z",
        "updatedAt" : "2020-03-04T19:19:03Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "516a9a33965e2db029a67edd5bcf173e1f360b77",
    "line" : 673,
    "diffHunk" : "@@ -1,1 +225,229 @@          hPutStrLn stderr $ \"Failure: Command \\\"\" <> cmd <> \" \" <> unwords args <> \"\\\" exited with \" <> show exitCode\n          hPutStrLn stderr $ unlines [\"stdout:\", out]\n          hPutStrLn stderr $ unlines [\"stderr: \", err]\n          exitFailure\n"
  },
  {
    "id" : "fbeb4ce3-b056-4d92-abc1-4bd2812cca1a",
    "prId" : 4688,
    "comments" : [
      {
        "id" : "8c380117-1faf-4ade-b3fc-80f18326afed",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "We already have `copyDirectory` in `DA.Daml.Project.Util` which contrary this function should work properly if the directory structure is nested (presumably that’s not the case now but that’s easy to change accidentally). `daml-project-config` is a bit of a weird place for it to live so feel free to move it to `da-hs-base` or something.",
        "createdAt" : "2020-02-25T13:09:04Z",
        "updatedAt" : "2020-02-25T13:29:12Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "a5f0ce32-7dca-40a6-8dea-e1cf7c13b23c",
        "parentId" : "8c380117-1faf-4ade-b3fc-80f18326afed",
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "@shayne-fletcher Can you please take care of that in a follow-up PR?",
        "createdAt" : "2020-02-25T13:11:14Z",
        "updatedAt" : "2020-02-25T13:29:12Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "715b4910-4859-4d6b-a5ec-b7d4723f456a",
        "parentId" : "8c380117-1faf-4ade-b3fc-80f18326afed",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "@hurryabit Sure thing.",
        "createdAt" : "2020-02-25T13:18:41Z",
        "updatedAt" : "2020-02-25T13:29:12Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "4dca90686a128314706aebbfc49167494289ec4a",
    "line" : 27,
    "diffHunk" : "@@ -1,1 +44,48 @@  withCurrentDirectory rootDir $ yarnProject' yarn [\"install\"]\n  where\n    copyDirectory from to = do\n      createDirectoryIfMissing True to\n      files <- listDirectory from"
  },
  {
    "id" : "a74d8105-5a34-4289-8652-04abf79eaedc",
    "prId" : 4676,
    "comments" : [
      {
        "id" : "0ff70971-2498-4a07-91f5-9d3d6e9f2dbf",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "Ultimately, we need to depend on `0.0.0-SNAPSHOT` here and include the library in a way similar to the `build-and-lint` test.",
        "createdAt" : "2020-02-24T18:01:29Z",
        "updatedAt" : "2020-02-24T18:51:53Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "bacc7a69-fa45-4442-a56f-3eff074d6b30",
        "parentId" : "0ff70971-2498-4a07-91f5-9d3d6e9f2dbf",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "Not sure about this. Let's discuss.",
        "createdAt" : "2020-02-24T18:53:23Z",
        "updatedAt" : "2020-02-24T18:53:23Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "40d5fd9b-6021-4ff4-b0c5-8853a877dbc1",
        "parentId" : "0ff70971-2498-4a07-91f5-9d3d6e9f2dbf",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "If that discussion hasn't happened yet, I'd like to participate.",
        "createdAt" : "2020-02-25T09:09:59Z",
        "updatedAt" : "2020-02-25T09:09:59Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "eeea76cb-54c4-4f64-9e08-ef2626e1526c",
        "parentId" : "0ff70971-2498-4a07-91f5-9d3d6e9f2dbf",
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "I don't there's a lot to discuss. Here's my proposal on how to fix the issue: https://github.com/digital-asset/daml/pull/4688",
        "createdAt" : "2020-02-25T13:09:26Z",
        "updatedAt" : "2020-02-25T13:09:27Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "df2dd894a6a254c34571bf3d97b86e3f39121069",
    "line" : 423,
    "diffHunk" : "@@ -1,1 +477,481 @@            , \"  \\\"license\\\": \\\"Apache-2.0\\\",\"\n            , \"  \\\"dependencies\\\": {\"\n            , \"    \\\"@daml/types\\\": \\\"\" <> sdkVersion <> \"\\\",\"\n            , \"    \\\"@mojotech/json-type-validation\\\": \\\"^3.1.0\\\"\"\n            , \"  },\""
  },
  {
    "id" : "f1e1709d-bbdb-45b5-a83f-f7f7f6c67333",
    "prId" : 4658,
    "comments" : [
      {
        "id" : "f8d24567-280b-45f7-b0ee-20a479d97a1a",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Do we need all of this? I would expect that `devDependencies` don’t matter and probably a lot of the scripts also don’t matter.",
        "createdAt" : "2020-02-21T18:23:41Z",
        "updatedAt" : "2020-02-22T00:57:51Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "ff9e431c-e078-45de-b5d5-bd51ac1cf742",
        "parentId" : "f8d24567-280b-45f7-b0ee-20a479d97a1a",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "I haven't attempted to trim it. I just followed Martin's suggestion and imported it wholesale from davl",
        "createdAt" : "2020-02-21T18:33:47Z",
        "updatedAt" : "2020-02-22T00:57:51Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "22507fdf-b7aa-46b0-b8da-4d7f0e302c94",
        "parentId" : "f8d24567-280b-45f7-b0ee-20a479d97a1a",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Sounds reasonable, then let’s keep it.",
        "createdAt" : "2020-02-21T18:40:22Z",
        "updatedAt" : "2020-02-22T00:57:51Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "81e73f0e-68d1-42a0-9cbb-80295ac8419f",
        "parentId" : "f8d24567-280b-45f7-b0ee-20a479d97a1a",
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "I suggest we run the linter here too. This way we gain some confidence we generate good TS.",
        "createdAt" : "2020-02-24T08:34:43Z",
        "updatedAt" : "2020-02-24T08:42:23Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "ff1af828-2e9c-4cfe-9c72-94e8f1575755",
        "parentId" : "f8d24567-280b-45f7-b0ee-20a479d97a1a",
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "We should also consider moving the linter config in a separate file, I think it's called `.eslintrc.json`.",
        "createdAt" : "2020-02-24T08:38:21Z",
        "updatedAt" : "2020-02-24T08:42:24Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "599bb63d-bd93-49fb-a9b9-d2c6ba3330d0",
        "parentId" : "f8d24567-280b-45f7-b0ee-20a479d97a1a",
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "@shayne-fletcher Here's a PR demoing the target state on DAVL: https://github.com/digital-asset/davl/pull/202",
        "createdAt" : "2020-02-24T11:34:13Z",
        "updatedAt" : "2020-02-24T11:34:25Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "2fe5f13e0244d38e16379868ab482be336171b59",
    "line" : 232,
    "diffHunk" : "@@ -1,1 +428,432 @@        , \"    \\\"lint\\\": \\\"eslint --ext .js,.ts src/ --max-warnings 0\\\"\"\n        , \"  },\"\n        , \"  \\\"eslintConfig\\\": {\"\n        , \"    \\\"extends\\\": [\"\n        , \"      \\\"eslint:recommended\\\",\""
  },
  {
    "id" : "eb9756f5-3d6c-480e-8176-4dcb4b3bde75",
    "prId" : 4658,
    "comments" : [
      {
        "id" : "550859ac-3dd8-4e14-b16b-c88b81534903",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "```suggestion\r\n      assertBool \"'Grover.ts' was created.\" . not =<< doesFileExist (charliesRestaurantTs </> \"src\" </> \"grover-1.0\" </> \"Grover.ts\")\r\n```\r\n```suggestion\r\n      assertBool \"'Grover.ts' was  not created.\" . not =<< doesFileExist (charliesRestaurantTs </> \"src\" </> \"grover-1.0\" </> \"Grover.ts\")\r\n```",
        "createdAt" : "2020-02-21T18:26:14Z",
        "updatedAt" : "2020-02-22T00:57:51Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "796fa7b8-c6f0-488a-919e-7449d9c21150",
        "parentId" : "550859ac-3dd8-4e14-b16b-c88b81534903",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "No, it's right as is I think. The logic is reversed. We are testing that the file has not been created. This is because the `Grover.dar` has not been included so `Grover.ts` is under it's package name, not the main-package name `grover-1.0` at this point.",
        "createdAt" : "2020-02-21T18:32:05Z",
        "updatedAt" : "2020-02-22T00:57:51Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "2fe5f13e0244d38e16379868ab482be336171b59",
    "line" : 92,
    "diffHunk" : "@@ -1,1 +161,165 @@      assertBool \"'CharliesRestaurant.ts' was not created.\" =<< doesFileExist (charliesRestaurantTs </> \"src\" </> \"charlies-restaurant-1.0\" </> \"CharliesRestaurant.ts\")\n      assertBool \"'packageId.ts' was not created.\" =<< doesFileExist (charliesRestaurantTs </> \"src\" </> \"charlies-restaurant-1.0\" </> \"packageId.ts\")\n      assertBool \"'Grover.ts' was created.\" . not =<< doesFileExist (charliesRestaurantTs </> \"src\" </> \"grover-1.0\" </> \"Grover.ts\")\n      removeDirectoryRecursive charliesRestaurantTs\n      assertBool \"'charlies-restaurant-ts' should not exist.\" . not =<< doesDirectoryExist charliesRestaurantTs"
  },
  {
    "id" : "bd8c8e85-8b43-4977-9f7d-12d892c557bc",
    "prId" : 4658,
    "comments" : [
      {
        "id" : "c9aba53e-2a00-41c6-a97d-adbe3166cd92",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "I'd be interested to see if we can remove this. The generated code should not use anything from the `dom`, not even `console`.",
        "createdAt" : "2020-02-24T08:32:41Z",
        "updatedAt" : "2020-02-24T08:42:23Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "ff465fe4-5632-4bb6-9365-ff2001e7961f",
        "parentId" : "c9aba53e-2a00-41c6-a97d-adbe3166cd92",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "Appears we can. Removed.",
        "createdAt" : "2020-02-24T14:47:00Z",
        "updatedAt" : "2020-02-24T14:47:00Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "2fe5f13e0244d38e16379868ab482be336171b59",
    "line" : 197,
    "diffHunk" : "@@ -1,1 +393,397 @@    , \"    \\\"target\\\": \\\"es5\\\",\"\n    , \"    \\\"lib\\\": [\"\n    , \"      \\\"dom\\\",\"\n    , \"      \\\"es2015\\\"\"\n    , \"     ],\""
  },
  {
    "id" : "1f35d655-c6c0-476a-83d7-b8a79c60865f",
    "prId" : 4658,
    "comments" : [
      {
        "id" : "2f035896-c3ce-404d-80c3-1e392f454c0e",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "That should be the version of the current SDK.",
        "createdAt" : "2020-02-24T08:36:32Z",
        "updatedAt" : "2020-02-24T08:42:23Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "fa224da5-76fe-414d-8fa0-744ece2f0962",
        "parentId" : "2f035896-c3ce-404d-80c3-1e392f454c0e",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "Well spotted.",
        "createdAt" : "2020-02-24T14:41:51Z",
        "updatedAt" : "2020-02-24T14:41:52Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "2fe5f13e0244d38e16379868ab482be336171b59",
    "line" : 219,
    "diffHunk" : "@@ -1,1 +415,419 @@        , \"  \\\"private\\\": true,\"\n        , \"  \\\"name\\\": \\\"\" <> name <> \"\\\",\"\n        , \"  \\\"version\\\": \\\"0.13.53\\\",\"\n        , \"  \\\"description\\\": \\\"Produced by daml2ts\\\",\"\n        , \"  \\\"license\\\": \\\"Apache-2.0\\\",\""
  },
  {
    "id" : "9f891d4f-4ebf-40d9-ab7c-3f1e401d544a",
    "prId" : 4658,
    "comments" : [
      {
        "id" : "8990a50e-5dbb-4e79-b513-562976e7b342",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "We don't want to compile in watch mode here.",
        "createdAt" : "2020-02-24T08:36:57Z",
        "updatedAt" : "2020-02-24T08:42:24Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "e2177d47-4af2-437c-b18c-efda1929150d",
        "parentId" : "8990a50e-5dbb-4e79-b513-562976e7b342",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "Yep. Removing.",
        "createdAt" : "2020-02-24T14:43:34Z",
        "updatedAt" : "2020-02-24T14:43:34Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "2fe5f13e0244d38e16379868ab482be336171b59",
    "line" : 228,
    "diffHunk" : "@@ -1,1 +424,428 @@        , \"  \\\"scripts\\\": {\"\n        , \"    \\\"build\\\": \\\"tsc --build\\\",\"\n        , \"    \\\"build:watch\\\": \\\"tsc --build --watch\\\",\"\n        , \"    \\\"test\\\": \\\"true\\\",\"\n        , \"    \\\"lint\\\": \\\"eslint --ext .js,.ts src/ --max-warnings 0\\\"\""
  },
  {
    "id" : "e17f9e99-d7fb-4a11-bf13-4f86c4ae68c2",
    "prId" : 4658,
    "comments" : [
      {
        "id" : "7aecda83-f1ed-4cfc-8057-cf5c12e1297d",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "We don't need this here.",
        "createdAt" : "2020-02-24T08:37:26Z",
        "updatedAt" : "2020-02-24T08:42:24Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "85cf6cd9-0024-4891-bb6b-0b92d4ba4847",
        "parentId" : "7aecda83-f1ed-4cfc-8057-cf5c12e1297d",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "Removing.",
        "createdAt" : "2020-02-24T14:44:14Z",
        "updatedAt" : "2020-02-24T14:44:14Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "2fe5f13e0244d38e16379868ab482be336171b59",
    "line" : 229,
    "diffHunk" : "@@ -1,1 +425,429 @@        , \"    \\\"build\\\": \\\"tsc --build\\\",\"\n        , \"    \\\"build:watch\\\": \\\"tsc --build --watch\\\",\"\n        , \"    \\\"test\\\": \\\"true\\\",\"\n        , \"    \\\"lint\\\": \\\"eslint --ext .js,.ts src/ --max-warnings 0\\\"\"\n        , \"  },\""
  },
  {
    "id" : "656726ed-97f1-4453-adcc-af71efbd98c4",
    "prId" : 4658,
    "comments" : [
      {
        "id" : "3cc877f7-f8d0-4b43-bb80-d3883041f3f3",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "That should be the current SDK version too.",
        "createdAt" : "2020-02-24T08:37:47Z",
        "updatedAt" : "2020-02-24T08:42:24Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "e2ba30bb-283f-4f3d-a5a0-abbefe569e62",
        "parentId" : "3cc877f7-f8d0-4b43-bb80-d3883041f3f3",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "Again, well spotted.",
        "createdAt" : "2020-02-24T14:42:09Z",
        "updatedAt" : "2020-02-24T14:42:10Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "78955534-e085-4321-aa20-790dd3ee706b",
        "parentId" : "3cc877f7-f8d0-4b43-bb80-d3883041f3f3",
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "Actually, we might need `0.0.0-SNAPSHOT` here in order to use `@daml/types` from `HEAD`.  The `build-and-list` test should demonstrate how to depend on these.",
        "createdAt" : "2020-02-24T16:45:25Z",
        "updatedAt" : "2020-02-24T16:45:25Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "2fe5f13e0244d38e16379868ab482be336171b59",
    "line" : 223,
    "diffHunk" : "@@ -1,1 +419,423 @@        , \"  \\\"license\\\": \\\"Apache-2.0\\\",\"\n        , \"  \\\"dependencies\\\": {\"\n        , \"    \\\"@daml/types\\\": \\\"0.13.53\\\",\"\n        , \"    \\\"@mojotech/json-type-validation\\\": \\\"^3.1.0\\\"\"\n        , \"  },\""
  },
  {
    "id" : "fb8bbe54-1b07-459c-aebd-03cbdc030af1",
    "prId" : 4658,
    "comments" : [
      {
        "id" : "1891fcef-cdde-45e4-bd3e-ab09aa99ebd6",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "What do we need this one for?",
        "createdAt" : "2020-02-24T08:39:03Z",
        "updatedAt" : "2020-02-24T08:42:24Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "757f9b86-c939-4d62-b94b-ca71def6c957",
        "parentId" : "1891fcef-cdde-45e4-bd3e-ab09aa99ebd6",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "We don't. Removing.",
        "createdAt" : "2020-02-24T14:23:27Z",
        "updatedAt" : "2020-02-24T14:23:27Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "9c223bca-f682-42d6-9a44-6b0edd9a55df",
        "parentId" : "1891fcef-cdde-45e4-bd3e-ab09aa99ebd6",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "Actually, turns out we do. Need to write one for the `yarn install` step to work but otherwise don't if we `cd x&& yarn build`.",
        "createdAt" : "2020-02-24T14:29:23Z",
        "updatedAt" : "2020-02-24T14:29:24Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "8aff5410-4650-4dc9-86e9-22c32eb8b0ee",
        "parentId" : "1891fcef-cdde-45e4-bd3e-ab09aa99ebd6",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "It turns out we really, really do in order to make our scheme of `yarn install` run once work.",
        "createdAt" : "2020-02-24T16:07:18Z",
        "updatedAt" : "2020-02-24T17:47:09Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "9f3b3161-5f30-465f-937f-0dab91afc5f7",
        "parentId" : "1891fcef-cdde-45e4-bd3e-ab09aa99ebd6",
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "Is there a way to depend on the \"global\" `node_modules` directory we maintain with bazel? @aherrmann do you know the answer?\r\nIf there is, we might get away without using workspaces. If we have to use workspaces, I'd prefer to call `yarn build` and `yarn lint` from the directory containing the generated code rather than calling the `yarn workspaces run ...` versions, which also run over the `@dummy/dummy` package.",
        "createdAt" : "2020-02-24T16:48:18Z",
        "updatedAt" : "2020-02-24T16:48:18Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "0a46edca-ddaf-4588-86c6-b401a5132387",
        "parentId" : "1891fcef-cdde-45e4-bd3e-ab09aa99ebd6",
        "author" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "body" : "@hurryabit You can depend on `\"@language_support_ts_deps//:node_modules\"` to put them into the sandbox. I'm not sure if there is a way to point yarn to another `node_modules` folder, if not you could create a symlink to put it in the right place.\r\n\r\nAlternatively, you could turn the `yarn lint` call into it's own `eslint_test` target. However, that would require some larger refactoring of this PR.",
        "createdAt" : "2020-02-25T08:42:36Z",
        "updatedAt" : "2020-02-25T08:42:36Z",
        "lastEditedBy" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "2fe5f13e0244d38e16379868ab482be336171b59",
    "line" : 262,
    "diffHunk" : "@@ -1,1 +458,462 @@\nwriteRootPackageJson :: FilePath -> String -> IO ()\nwriteRootPackageJson rootDir workspace =\n   writeFileUTF8 (rootDir </> \"package.json\") $ unlines\n     [ \"{\""
  },
  {
    "id" : "1219f012-c986-4fc9-babe-aa876cd7e38e",
    "prId" : 4658,
    "comments" : [
      {
        "id" : "d2edba83-8ee3-4854-8cb8-a1559bbfd3a8",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "```suggestion\r\n        , \"  \\\"name\\\": \\\"@daml2ts/\" <> name <> \"\\\",\"\r\n```\r\nThis is what I've used in other place. I think ultimately we should move to `@daml.js/foo`.",
        "createdAt" : "2020-02-24T08:42:06Z",
        "updatedAt" : "2020-02-24T08:42:24Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "3fd1545d-6e8c-41e9-87e4-af1476469163",
        "parentId" : "d2edba83-8ee3-4854-8cb8-a1559bbfd3a8",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "Have gone with `@daml2ts` for now (tell me if you want that to be `@daml.js` for forward compatibility) also, derive the package name as the leaf of the directory containing the `src` folder - one less argument to pass.",
        "createdAt" : "2020-02-24T14:40:09Z",
        "updatedAt" : "2020-02-24T14:40:09Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "41b92f50-f01a-4097-86f4-652122b847d5",
        "parentId" : "d2edba83-8ee3-4854-8cb8-a1559bbfd3a8",
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "Let's stay with `@daml2ts` for now.",
        "createdAt" : "2020-02-24T16:48:42Z",
        "updatedAt" : "2020-02-24T16:48:42Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "2fe5f13e0244d38e16379868ab482be336171b59",
    "line" : 218,
    "diffHunk" : "@@ -1,1 +414,418 @@        [\"{\"\n        , \"  \\\"private\\\": true,\"\n        , \"  \\\"name\\\": \\\"\" <> name <> \"\\\",\"\n        , \"  \\\"version\\\": \\\"0.13.53\\\",\"\n        , \"  \\\"description\\\": \\\"Produced by daml2ts\\\",\""
  },
  {
    "id" : "64a56460-960f-4b40-8e69-7c00e946d288",
    "prId" : 4613,
    "comments" : [
      {
        "id" : "3aef7eff-5f3e-49ec-9921-ce5555128f42",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "We should probably clean the old output of `daml2ts` before we run it again and then make sure that the files from `CharliesRestaurant` were created again.",
        "createdAt" : "2020-02-19T21:56:53Z",
        "updatedAt" : "2020-02-19T23:15:36Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "e4b192cb-db47-4d5c-9561-eebb91d99c06",
        "parentId" : "3aef7eff-5f3e-49ec-9921-ce5555128f42",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "Ok!",
        "createdAt" : "2020-02-19T22:07:28Z",
        "updatedAt" : "2020-02-19T23:15:36Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "50ce067e81997115901457e48b83e65be6842714",
    "line" : 137,
    "diffHunk" : "@@ -1,1 +135,139 @@      createDirectoryIfMissing True charliesRestaurantTs\n      assertBool \"'charlies-restaurant-ts' should exist.\" =<< doesDirectoryExist charliesRestaurantTs\n      daml2tsProject [charliesRestaurantDar, groverDar] charliesRestaurantTs\n      assertBool \"'CharliesRestaurant.ts' was not created.\" =<< doesFileExist (charliesRestaurantTs </> \"charlies-restaurant-1.0\" </> \"CharliesRestaurant.ts\")\n      assertBool \"'packageId.ts' was not created.\" =<< doesFileExist (charliesRestaurantTs </> \"charlies-restaurant-1.0\" </> \"packageId.ts\")"
  },
  {
    "id" : "52981a5e-c119-43c6-85ed-573431ea84d7",
    "prId" : 4613,
    "comments" : [
      {
        "id" : "850bb7e9-e50b-4ab8-a56f-9c4aa135f23a",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "It would be great to check that there's no second version of the `Grover` package under its package hash. At least once we have actually implemented it.",
        "createdAt" : "2020-02-19T21:59:40Z",
        "updatedAt" : "2020-02-19T23:15:36Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "2c62b38f-dada-4aa2-9e96-67e94327912f",
        "parentId" : "850bb7e9-e50b-4ab8-a56f-9c4aa135f23a",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "Yes. The tests will evolve with the improved implementation.",
        "createdAt" : "2020-02-19T22:07:54Z",
        "updatedAt" : "2020-02-19T23:15:36Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "50ce067e81997115901457e48b83e65be6842714",
    "line" : 141,
    "diffHunk" : "@@ -1,1 +139,143 @@      assertBool \"'packageId.ts' was not created.\" =<< doesFileExist (charliesRestaurantTs </> \"charlies-restaurant-1.0\" </> \"packageId.ts\")\n      assertBool \"'Grover.ts' was not created.\" =<< doesFileExist (charliesRestaurantTs </> \"grover-1.0\" </> \"Grover.ts\")\n      assertBool \"'packageId.ts' was not created.\" =<< doesFileExist (charliesRestaurantTs </> \"grover-1.0\" </> \"packageId.ts\")\n\n  , testCaseSteps \"Package name collision test\" $ \\step -> withTempDir $ \\tmpDir -> do"
  },
  {
    "id" : "fd036ff0-80cc-48c8-bc83-d39d23983499",
    "prId" : 4613,
    "comments" : [
      {
        "id" : "5f0df962-54c8-468b-9bed-e586e4021419",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "I wonder if we should finally invest in some shared helpers to create all these `daml.yaml` files and the directories containing them. The packaging tests are already full of these repetitions...",
        "createdAt" : "2020-02-19T22:01:58Z",
        "updatedAt" : "2020-02-19T23:15:36Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "c5f3180e-ab72-4e52-aa51-5cfee3c9db3f",
        "parentId" : "5f0df962-54c8-468b-9bed-e586e4021419",
        "author" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "body" : "Yes, there's a mini-library emerging. Maybe not today but soon.",
        "createdAt" : "2020-02-19T22:08:23Z",
        "updatedAt" : "2020-02-19T23:15:36Z",
        "lastEditedBy" : {
          "login" : "shayne-fletcher",
          "name" : "Shayne Fletcher",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/1500167?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "50ce067e81997115901457e48b83e65be6842714",
    "line" : 50,
    "diffHunk" : "@@ -1,1 +48,52 @@        , \"        return self\"\n        ]\n      writeFileUTF8 (grover </> \"daml.yaml\") $ unlines\n        [ \"sdk-version: \" <> sdkVersion\n        , \"name: grover\""
  }
]