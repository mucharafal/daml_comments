[
  {
    "id" : "1f5b6270-38a4-4186-a9e9-861bdf19b997",
    "prId" : 7632,
    "comments" : [
      {
        "id" : "a6c73b8f-e86f-4249-843f-608be65cbbc6",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "We should figure out a way to compile the DAML model conditionally. We arenâ€™t actually breaking backwards compatibility here so medium-term we shouldnâ€™t have to change anything here.",
        "createdAt" : "2020-10-13T16:44:24Z",
        "updatedAt" : "2020-10-13T16:58:51Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "48eea012-6865-4a2d-b011-f174656a7d67",
        "parentId" : "a6c73b8f-e86f-4249-843f-608be65cbbc6",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Fine to change it in this PR.",
        "createdAt" : "2020-10-13T16:44:37Z",
        "updatedAt" : "2020-10-13T16:58:51Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "aaba0517-9912-437a-9e64-9dd2a0924d6e",
        "parentId" : "a6c73b8f-e86f-4249-843f-608be65cbbc6",
        "author" : {
          "login" : "S11001001",
          "name" : "Stephen Compall",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/219186?u=7b27ed58a578fe7d4983d1bab28c2f5608ed8739&v=4"
        },
        "body" : "There's a bit of a tarpit here, because we're conflating source compatibility (which e.g. this PR breaks) and SDK/runner compatibility (which e.g. this PR does not) in how we set up the cross builds. _And then_ you consider the divergent 1.6.0 series versus the 1.7.0 series, which have different requirements for each of these categories. Certainly worth some wonky Python [in a separate PR ðŸ™‚ ]",
        "createdAt" : "2020-10-13T17:19:48Z",
        "updatedAt" : "2020-10-13T17:19:48Z",
        "lastEditedBy" : {
          "login" : "S11001001",
          "name" : "Stephen Compall",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/219186?u=7b27ed58a578fe7d4983d1bab28c2f5608ed8739&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "ff9c6cdb061569d69928ce65252f33699b9f793b",
    "line" : 4,
    "diffHunk" : "@@ -79,12 +79,12 @@ config_setting(\n     if versions.is_at_least(sdk_version, platform_version)\n ]\n \n-last_pre_7600_trigger_version = \"1.7.0-snapshot.20201006.5358.0.0c1cadcf\""
  },
  {
    "id" : "bdf1ea75-a216-43b0-be02-cef87d988154",
    "prId" : 7456,
    "comments" : [
      {
        "id" : "9039c287-ec31-42f4-87a2-9a09a140ccfb",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "This seems a bit too strong. We donâ€™t want to kill those compat tests for newer versions completely. What we can remove is testing a version > last_pre_7456_trigger_version against a DAR built with an older version.",
        "createdAt" : "2020-10-02T07:01:33Z",
        "updatedAt" : "2020-10-02T16:27:21Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "34a25320-4dc4-4f90-a674-35112cd84a05",
        "parentId" : "9039c287-ec31-42f4-87a2-9a09a140ccfb",
        "author" : {
          "login" : "S11001001",
          "name" : "Stephen Compall",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/219186?u=7b27ed58a578fe7d4983d1bab28c2f5608ed8739&v=4"
        },
        "body" : "What I'm trying to do here is avoid building the trigger dar with any SDK version that precedes this change. Is that not what I'm expressing here?",
        "createdAt" : "2020-10-02T15:05:46Z",
        "updatedAt" : "2020-10-02T16:27:21Z",
        "lastEditedBy" : {
          "login" : "S11001001",
          "name" : "Stephen Compall",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/219186?u=7b27ed58a578fe7d4983d1bab28c2f5608ed8739&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "b65d327b-f16c-495b-b87f-d5bb11a6ba2f",
        "parentId" : "9039c287-ec31-42f4-87a2-9a09a140ccfb",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "duh, I somehow missed the negation. Seems sensible then.",
        "createdAt" : "2020-10-02T15:07:39Z",
        "updatedAt" : "2020-10-02T16:27:21Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "27c8c9b1e1674688c7b1e08c329341d8e4615ef4",
    "line" : 9,
    "diffHunk" : "@@ -79,9 +79,12 @@ config_setting(\n     if versions.is_at_least(sdk_version, platform_version)\n ]\n \n+last_pre_7456_trigger_version = \"1.6.0-snapshot.20200930.5312.0.b9a1905d\"\n+\n [\n     daml_trigger_dar(sdk_version)\n     for sdk_version in sdk_versions\n+    if not versions.is_at_most(last_pre_7456_trigger_version, sdk_version)"
  },
  {
    "id" : "6ca9d07e-116d-43b1-a432-76d35ae2e4ae",
    "prId" : 6266,
    "comments" : [
      {
        "id" : "82525fce-0b50-4bb8-8766-6694c2feca8b",
        "parentId" : null,
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Isn't there a tag to run this only manually?",
        "createdAt" : "2020-06-08T14:59:14Z",
        "updatedAt" : "2020-06-08T15:03:45Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "ca05582d-f3e6-4b8e-9557-a6a721100888",
        "parentId" : "82525fce-0b50-4bb8-8766-6694c2feca8b",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Yeah but I already deleted it. Didnâ€™t intend to commit this.",
        "createdAt" : "2020-06-08T15:03:54Z",
        "updatedAt" : "2020-06-08T15:03:54Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "86be5ed3dac71cd8897f7aa708c5e0b57ba5b6e6",
    "line" : null,
    "diffHunk" : "@@ -115,3 +115,10 @@ migration_test(\n     tags = [\"exclusive\"],\n     versions = platform_versions,\n ) if not is_windows else None\n+\n+migration_test(\n+    name = \"migration-quick\",\n+    # Exclusive due to hardcoded postgres ports.\n+    tags = [\"exclusive\"],"
  },
  {
    "id" : "5b026f81-7089-42ae-abba-50b06c4881c2",
    "prId" : 6244,
    "comments" : [
      {
        "id" : "c6b0c056-b026-4ae5-bb6b-f956ce940435",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "If you want to keep this can we give it a more descriptive name? Also why is this particular combination useful? Latest stable vs HEAD makes more sense to me.",
        "createdAt" : "2020-06-05T18:53:39Z",
        "updatedAt" : "2020-06-08T06:33:11Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "802212d8-0723-4af3-ac5b-f04b9fe3ed67",
        "parentId" : "c6b0c056-b026-4ae5-bb6b-f956ce940435",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "I'll remove it for now and re-introduce it later. I was thinking that if you had a single test that covers all migrations in one go you can lower the chances of missing weird regressions when using this rule to quickly test while developing. Let me know what you think about it (and what name could make more sense: `migration-meta-test`, `meta-migration-test`, `test-migration-test`, `migration-test-test`? Something else?)",
        "createdAt" : "2020-06-08T06:29:18Z",
        "updatedAt" : "2020-06-08T06:33:11Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "256c235b-0de5-4aee-bcec-e44955a768d8",
        "parentId" : "c6b0c056-b026-4ae5-bb6b-f956ce940435",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Maybe just make it very explicit, `migration-1.0.0-to-head`? I donâ€™t mind keeping it, I just find the name to be a bit too vague.",
        "createdAt" : "2020-06-08T06:33:21Z",
        "updatedAt" : "2020-06-08T06:33:21Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "9623dd46-02d9-4b15-ac9a-bb594589d570",
        "parentId" : "c6b0c056-b026-4ae5-bb6b-f956ce940435",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Addressed by https://github.com/digital-asset/daml/pull/6244/commits/8845557ef5ed5b9a5a9f48108ed16ca00f178d35",
        "createdAt" : "2020-06-08T06:33:28Z",
        "updatedAt" : "2020-06-08T06:33:28Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "8845557ef5ed5b9a5a9f48108ed16ca00f178d35",
    "line" : null,
    "diffHunk" : "@@ -115,3 +115,15 @@ migration_test(\n     tags = [\"exclusive\"],\n     versions = platform_versions,\n ) if not is_windows else None\n+\n+migration_test(\n+    name = \"migration-test\","
  },
  {
    "id" : "d0ea0094-859b-4a0c-a6fb-f2577c9c50ad",
    "prId" : 6112,
    "comments" : [
      {
        "id" : "665b5ac5-67f1-4440-86c7-58ce116308d1",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Can we use the version comparison Iâ€™ve written here?",
        "createdAt" : "2020-05-27T10:33:51Z",
        "updatedAt" : "2020-05-27T11:56:25Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "77a6693e-3d6b-4bc3-bf25-71a02db5429e",
        "parentId" : "665b5ac5-67f1-4440-86c7-58ce116308d1",
        "author" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "body" : "Done, I've noticed that their arguments were in backwards order compared to the [skylib ones](https://github.com/bazelbuild/bazel-skylib/blob/4b25373d12887f5add565197c4a163e9f1d9b716/lib/versions.bzl#L57-L67), I've aligned them for consistency.",
        "createdAt" : "2020-05-27T11:57:36Z",
        "updatedAt" : "2020-05-27T11:57:36Z",
        "lastEditedBy" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "4ad341a1b6e99a9daf01df515ae4f5092f22bb5e",
    "line" : null,
    "diffHunk" : "@@ -69,6 +74,25 @@ config_setting(\n        platform_version == \"0.0.0\"\n ]\n \n+[\n+    daml_trigger_dar(sdk_version)\n+    for sdk_version in sdk_versions\n+]\n+\n+[\n+    daml_trigger_test(\n+        compiler_version = sdk_version,\n+        runner_version = platform_version,\n+    )\n+    for sdk_version in sdk_versions\n+    for platform_version in platform_versions\n+    # Test that the DAML trigger runner can run DARs built with an older SDK\n+    # version. I.e. where the runner version is at least the SDK version or\n+    # more recent. The HEAD version 0.0.0 is a special case.\n+    if versions.is_at_least(sdk_version, platform_version) and sdk_version != \"0.0.0\" or"
  },
  {
    "id" : "349cb915-a4f1-42aa-8219-3eb21184c06a",
    "prId" : 5825,
    "comments" : [
      {
        "id" : "f531d2aa-8865-4302-bb6c-3c6f7a770d22",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "I think it would be helpful to use named arguments here to make it clear that `sdk_version` is mapped to `compiler_version` and `platform_version` to `runner_version`.",
        "createdAt" : "2020-05-04T16:48:12Z",
        "updatedAt" : "2020-05-05T08:12:59Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "06a82dec-c977-486a-81cb-7b8c94683da7",
        "parentId" : "f531d2aa-8865-4302-bb6c-3c6f7a770d22",
        "author" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "body" : "Good idea, done.",
        "createdAt" : "2020-05-05T08:13:19Z",
        "updatedAt" : "2020-05-05T08:13:20Z",
        "lastEditedBy" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "594b8c14cdd555d3fda55e0fc541e71114e7f5d0",
    "line" : null,
    "diffHunk" : "@@ -51,6 +53,22 @@ platform_versions = [\n     for platform_version in platform_versions\n ]\n \n+[\n+    daml_script_dar(sdk_version)\n+    for sdk_version in sdk_versions\n+]\n+\n+[\n+    daml_script_test(sdk_version, platform_version)"
  },
  {
    "id" : "ec7489d0-d44b-4a90-bc44-82b30862387d",
    "prId" : 5705,
    "comments" : [
      {
        "id" : "d8efdc29-1fdc-4f98-bb5b-482153bf40fc",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "for better or for worse `sh_binary` seems like the easiest way to switch out the runfiles of a Haskell target without recompiling it.",
        "createdAt" : "2020-04-23T15:31:48Z",
        "updatedAt" : "2020-04-24T10:01:19Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "ded6b68b4154f8f0a95eedd02f7655b0ea279eb3",
    "line" : 5,
    "diffHunk" : "@@ -18,6 +18,15 @@ platform_versions = [\n     \"1.0.1-snapshot.20200417.3908.1.722bac90\",\n ]\n \n+[\n+    sh_binary("
  },
  {
    "id" : "7b2155b0-a0d5-4af2-b1a6-8b9ffa746ab2",
    "prId" : 5665,
    "comments" : [
      {
        "id" : "d2d2408e-173a-4364-a091-ae2404ac524a",
        "parentId" : null,
        "author" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "body" : "`rules_nixpkgs` has [`nixpkgs_python_configure`](https://github.com/tweag/rules_nixpkgs/blob/d3c7bc94fed4001d5375632a936d743dc085c9a1/nixpkgs/nixpkgs.bzl#L418) which takes care of all that. Example use case: https://github.com/tweag/rules_haskell/blob/c625c53c3fe6644abb366bd868051d9e82f2a204/WORKSPACE#L209",
        "createdAt" : "2020-04-23T09:54:05Z",
        "updatedAt" : "2020-04-23T10:46:39Z",
        "lastEditedBy" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "44f56002-0f04-4f95-b2c9-d67f1084567d",
        "parentId" : "d2d2408e-173a-4364-a091-ae2404ac524a",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Oh fantastic! Iâ€™ve switched to that. I guess we can also switch to that for the main workspace? I had just copied what we did there. If so, Iâ€™ll do that in a separate PR.",
        "createdAt" : "2020-04-23T10:11:59Z",
        "updatedAt" : "2020-04-23T10:46:39Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "50892d42-45cb-4aa1-ac83-cc4fd14bbce3",
        "parentId" : "d2d2408e-173a-4364-a091-ae2404ac524a",
        "author" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "body" : "Yes, I thought I had already switched it over in `@daml`. Must have forgotten...",
        "createdAt" : "2020-04-23T10:12:52Z",
        "updatedAt" : "2020-04-23T10:46:39Z",
        "lastEditedBy" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "fae715204e6fbce3b32c31c7d03f3ca3a5de8700",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,47 @@\n+# Copyright (c) 2020 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+# SPDX-License-Identifier: Apache-2.0\n+\n+load(\n+    \"@daml//bazel_tools/client_server:client_server_test.bzl\",\n+    \"client_server_test\",\n+)\n+load(\"@os_info//:os_info.bzl\", \"is_linux\")\n+load(\"@bazel_tools//tools/python:toolchain.bzl\", \"py_runtime_pair\")\n+\n+py_runtime(\n+    name = \"nix_python3_runtime\",\n+    interpreter = \"@python3_nix//:bin/python\",\n+    python_version = \"PY3\",\n+)\n+\n+py_runtime_pair(\n+    name = \"nix_python_runtime_pair\",\n+    py3_runtime = \":nix_python3_runtime\",\n+)\n+\n+toolchain(\n+    name = \"nix_python_toolchain\",\n+    exec_compatible_with = [\n+        \"@rules_haskell//haskell/platforms:nixpkgs\",\n+    ],\n+    toolchain = \":nix_python_runtime_pair\",\n+    toolchain_type = \"@bazel_tools//tools/python:toolchain_type\",\n+)"
  }
]