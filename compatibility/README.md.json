[
  {
    "id" : "2840b532-f26b-4563-9441-2067678f1917",
    "prId" : 6377,
    "comments" : [
      {
        "id" : "70cd43ed-620d-421d-90ae-52582bd4a200",
        "parentId" : null,
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "```suggestion\r\nthe same SDK version so this also ensures that sandbox can load a DAR from\r\n```",
        "createdAt" : "2020-06-17T08:37:03Z",
        "updatedAt" : "2020-06-17T08:41:55Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "967a1f57dbd9a12f4cc7f15838fb72880444fc74",
    "line" : null,
    "diffHunk" : "@@ -13,3 +13,76 @@ to be there for this workspace to use.\n Any Bazel command can then be used afterwards. `./test.sh` are the\n tests run on CI.\n \n+### What is currently being tested?\n+\n+We include the following SDK versions in our tests:\n+\n+1. All stable SDK versions.\n+2. All snapshots `x.y.z-snapshot-*` for which there is no stable release `x.y.z`\n+3. HEAD.\n+\n+Since running all tests can be rather slow, we run them in a daily\n+cron job. On each PR we only include HEAD and the latest stable\n+release.\n+\n+#### Cross-version compatibility between ledger-api-test-tool\n+\n+We test that the `ledger-api-test-tool` of a given version passes\n+against Sandbox next of another version. We test all possible version\n+combinations here to ensure forwards and backwards compatibility. The\n+`ledger-api-test-tool` includes a DAR built using a compiler from\n+the same SDK version so this also ensures that we can load a DAR from"
  },
  {
    "id" : "5bd4cafa-b1c6-4a8f-bc26-d50fa625fe5b",
    "prId" : 6377,
    "comments" : [
      {
        "id" : "378335e0-9d13-4f97-bc80-4489980f5a17",
        "parentId" : null,
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "```suggestion\r\n      transaction streams are the same after the migration and that the\r\n```",
        "createdAt" : "2020-06-17T08:37:53Z",
        "updatedAt" : "2020-06-17T08:41:55Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "967a1f57dbd9a12f4cc7f15838fb72880444fc74",
    "line" : null,
    "diffHunk" : "@@ -13,3 +13,76 @@ to be there for this workspace to use.\n Any Bazel command can then be used afterwards. `./test.sh` are the\n tests run on CI.\n \n+### What is currently being tested?\n+\n+We include the following SDK versions in our tests:\n+\n+1. All stable SDK versions.\n+2. All snapshots `x.y.z-snapshot-*` for which there is no stable release `x.y.z`\n+3. HEAD.\n+\n+Since running all tests can be rather slow, we run them in a daily\n+cron job. On each PR we only include HEAD and the latest stable\n+release.\n+\n+#### Cross-version compatibility between ledger-api-test-tool\n+\n+We test that the `ledger-api-test-tool` of a given version passes\n+against Sandbox next of another version. We test all possible version\n+combinations here to ensure forwards and backwards compatibility. The\n+`ledger-api-test-tool` includes a DAR built using a compiler from\n+the same SDK version so this also ensures that we can load a DAR from\n+a different SDK version.\n+\n+Since all our JVM ledger clients use the same client libraries we\n+consider the `ledger-api-test-tool` to be a good proxy and if things\n+are not covered it should be extended.\n+\n+#### Data-continuity for Sandbox classic\n+\n+We have migration tests that work as follows:\n+\n+1. Start the oldest Sandbox version and upload a DAR.\n+\n+2. Iterate over SDK versions in order. For each version:\n+\n+   1. Start sandbox of that SDK version.\n+\n+   2. Run a custom Scala binary that interacts with the ledger and\n+      records results.\n+\n+   3. Validates the results. This includes verifying that the\n+      transaction streams are the same after the migration and the the"
  },
  {
    "id" : "a5393e30-404b-45c8-a8f7-1bce6c3caa1e",
    "prId" : 6377,
    "comments" : [
      {
        "id" : "edcc7cb2-c933-4b07-bd0d-023abf1faee0",
        "parentId" : null,
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "Given the current description, it's unclear to me whether this involves creating any contract in a past version and accessing said contracts after migration. The DAR could be pure library.",
        "createdAt" : "2020-06-17T08:39:53Z",
        "updatedAt" : "2020-06-17T08:41:55Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "3a0a954f-624e-4537-94df-29ef857be315",
        "parentId" : "edcc7cb2-c933-4b07-bd0d-023abf1faee0",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Good point, Iâ€™ve spelled out the â€œinteractions with the ledgerâ€ a bit more explicitly. Does that help?",
        "createdAt" : "2020-06-17T08:42:10Z",
        "updatedAt" : "2020-06-17T08:42:10Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "f3faff31-caa4-4cb0-a881-83e3a6de5587",
        "parentId" : "edcc7cb2-c933-4b07-bd0d-023abf1faee0",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "ðŸ‘ ",
        "createdAt" : "2020-06-17T08:43:07Z",
        "updatedAt" : "2020-06-17T08:43:07Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "967a1f57dbd9a12f4cc7f15838fb72880444fc74",
    "line" : 29,
    "diffHunk" : "@@ -13,3 +13,76 @@ to be there for this workspace to use.\n Any Bazel command can then be used afterwards. `./test.sh` are the\n tests run on CI.\n \n+### What is currently being tested?\n+\n+We include the following SDK versions in our tests:\n+\n+1. All stable SDK versions.\n+2. All snapshots `x.y.z-snapshot-*` for which there is no stable release `x.y.z`\n+3. HEAD.\n+\n+Since running all tests can be rather slow, we run them in a daily\n+cron job. On each PR we only include HEAD and the latest stable\n+release.\n+\n+#### Cross-version compatibility between ledger-api-test-tool\n+\n+We test that the `ledger-api-test-tool` of a given version passes\n+against Sandbox next of another version. We test all possible version\n+combinations here to ensure forwards and backwards compatibility. The\n+`ledger-api-test-tool` includes a DAR built using a compiler from\n+the same SDK version so this also ensures that we can load a DAR from\n+a different SDK version.\n+\n+Since all our JVM ledger clients use the same client libraries we\n+consider the `ledger-api-test-tool` to be a good proxy and if things\n+are not covered it should be extended.\n+\n+#### Data-continuity for Sandbox classic"
  },
  {
    "id" : "bb7a3f42-98a2-4beb-9122-b7fd747f5d41",
    "prId" : 6377,
    "comments" : [
      {
        "id" : "7a8d812d-4ca9-44a4-9bc0-41f7311a8064",
        "parentId" : null,
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "```suggestion\r\n```",
        "createdAt" : "2020-06-17T08:40:57Z",
        "updatedAt" : "2020-06-17T08:41:55Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "967a1f57dbd9a12f4cc7f15838fb72880444fc74",
    "line" : 57,
    "diffHunk" : "@@ -13,3 +13,76 @@ to be there for this workspace to use.\n Any Bazel command can then be used afterwards. `./test.sh` are the\n tests run on CI.\n \n+### What is currently being tested?\n+\n+We include the following SDK versions in our tests:\n+\n+1. All stable SDK versions.\n+2. All snapshots `x.y.z-snapshot-*` for which there is no stable release `x.y.z`\n+3. HEAD.\n+\n+Since running all tests can be rather slow, we run them in a daily\n+cron job. On each PR we only include HEAD and the latest stable\n+release.\n+\n+#### Cross-version compatibility between ledger-api-test-tool\n+\n+We test that the `ledger-api-test-tool` of a given version passes\n+against Sandbox next of another version. We test all possible version\n+combinations here to ensure forwards and backwards compatibility. The\n+`ledger-api-test-tool` includes a DAR built using a compiler from\n+the same SDK version so this also ensures that we can load a DAR from\n+a different SDK version.\n+\n+Since all our JVM ledger clients use the same client libraries we\n+consider the `ledger-api-test-tool` to be a good proxy and if things\n+are not covered it should be extended.\n+\n+#### Data-continuity for Sandbox classic\n+\n+We have migration tests that work as follows:\n+\n+1. Start the oldest Sandbox version and upload a DAR.\n+\n+2. Iterate over SDK versions in order. For each version:\n+\n+   1. Start sandbox of that SDK version.\n+\n+   2. Run a custom Scala binary that interacts with the ledger and\n+      records results.\n+\n+   3. Validates the results. This includes verifying that the\n+      transaction streams are the same after the migration and the the\n+      ACS is the same + additional test-specific checks.\n+\n+We have two tests here: One that includes snapshot versions and one\n+that only iterates through stable versions up to HEAD. This ensures\n+that both individual migrations are correct as well as the migrations\n+from one stable version to the next work as a whole.\n+\n+#### Backwards-compatibility for DAML Script\n+\n+We test that the DAML Script runner from a given SDK version can load\n+DARs built against the DAML Script library from an older SDK. We only\n+guarantee backwards compatibility here.\n+"
  },
  {
    "id" : "ca0fec11-b722-4522-931a-e6f791f452d7",
    "prId" : 6194,
    "comments" : [
      {
        "id" : "92533687-e712-4c8d-a89a-5bc27c67bfa3",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Note that `./test.sh` will run _all_ tests. We are already up to > 700 iirc so if cashing doesnâ€™t work this is a bad idea. There is `./test.sh --quick` which only runs latest stable vs HEAD and once you copied `.bazelrc` you can also just use `bazel test`.",
        "createdAt" : "2020-06-02T16:26:38Z",
        "updatedAt" : "2020-06-02T16:37:20Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "38654612c371754cfafdf2f47fa8c046fe8fe39c",
    "line" : 12,
    "diffHunk" : "@@ -2,3 +2,14 @@ This directory contains the infrastructure and test setup for\n cross-version compatibility testing. We make this a separate Bazel\n workspace to make it easier to enforce that we only depend on release\n artifacts.\n+\n+### How to\n+\n+Before using this, make sure to always run the scripts that build the\n+SDK, namely `./build-release-artifacts.sh` and `./build-ts-libs.sh`.\n+These should be run every time there is a relevant change you want\n+to be there for this workspace to use.\n+\n+Any Bazel command can then be used afterwards. `./test.sh` are the"
  }
]