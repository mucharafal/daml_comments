[
  {
    "id" : "0347580a-e7c1-41ed-8fa9-00c3d6a9644b",
    "prId" : 7400,
    "comments" : [
      {
        "id" : "59ea63b9-488a-47f7-8de7-6436c679bc62",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "I couldn't find anything on this PR explaining what is going on here and below. Could you please leave a top-level comment with an explanation?",
        "createdAt" : "2020-09-17T15:41:44Z",
        "updatedAt" : "2020-09-17T15:49:12Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "77a506c1-591f-4b11-be67-1d0e54cfdaca",
        "parentId" : "59ea63b9-488a-47f7-8de7-6436c679bc62",
        "author" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "body" : "PR description extended",
        "createdAt" : "2020-09-17T16:58:20Z",
        "updatedAt" : "2020-09-17T16:58:20Z",
        "lastEditedBy" : {
          "login" : "nickchapman-da",
          "name" : null,
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/49153372?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "a360635b966cdfe27bfd3cd6e156308321238660",
    "line" : 10,
    "diffHunk" : "@@ -98,6 +98,31 @@ excluded_test_tool_tests = [\n             },\n         ],\n     },\n+    {\n+        \"end\": \"1.3.0-snapshot.20200617.4484.0.7e0a6848\",\n+        \"platform_ranges\": [\n+            {\n+                \"start\": \"0.0.0\",  #fix to first snapshot after now\n+                \"exclusions\": [\n+                    # See https://github.com/digital-asset/daml/pull/7400"
  },
  {
    "id" : "d3ea52ca-421b-4904-8475-0c41041e6967",
    "prId" : 6458,
    "comments" : [
      {
        "id" : "1a1cb00b-1659-4bac-a1fa-bc0508c42571",
        "parentId" : null,
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "@cocreature is there a better way to handle this?",
        "createdAt" : "2020-06-22T18:17:54Z",
        "updatedAt" : "2020-06-23T11:39:22Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "6c734dc6-0af1-4883-b341-4aa41bc6052d",
        "parentId" : "1a1cb00b-1659-4bac-a1fa-bc0508c42571",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "`0.0.0` is equivalent to just omitting `end`.",
        "createdAt" : "2020-06-22T18:37:34Z",
        "updatedAt" : "2020-06-23T11:39:22Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "9dab07a8-caa2-4ab1-9845-6d31aa22c743",
        "parentId" : "1a1cb00b-1659-4bac-a1fa-bc0508c42571",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "actually is this really what you want? The end is inclusive. I think you want the latest snapshot at the time of merging.",
        "createdAt" : "2020-06-22T18:39:21Z",
        "updatedAt" : "2020-06-23T11:39:22Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "aa988d57-dab4-42df-adab-80b98ce4eff5",
        "parentId" : "1a1cb00b-1659-4bac-a1fa-bc0508c42571",
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "> I think you want the latest snapshot at the time of merging.\r\n\r\nRight. I'll update that before merging.",
        "createdAt" : "2020-06-22T19:15:06Z",
        "updatedAt" : "2020-06-23T11:39:22Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "369498b2337dab0f8d310a86dce521d86703c678",
    "line" : null,
    "diffHunk" : "@@ -52,13 +52,26 @@ excluded_test_tool_tests = [\n     },\n     {\n         \"start\": \"1.1.1\",\n+        \"end\": \"0.0.0\",  #FIXME: change to 1.3 after release"
  },
  {
    "id" : "f96e34d7-446e-4704-87df-32eb9ad50003",
    "prId" : 6440,
    "comments" : [
      {
        "id" : "ace9745a-e98f-4618-8d9a-f04bd3104cf5",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "@cocreature Is this acceptable?",
        "createdAt" : "2020-06-26T09:30:00Z",
        "updatedAt" : "2020-06-30T15:19:02Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "c21cff64-2889-4296-adc9-21ce0d8e24f9",
        "parentId" : "ace9745a-e98f-4618-8d9a-f04bd3104cf5",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Yes, it sucks that we have to exclude the whole suite but we cannot fix that for old ledger-api-test-tool versions. Luckily Gary fixed that so in the future that is no longer a problem.",
        "createdAt" : "2020-06-26T12:33:53Z",
        "updatedAt" : "2020-06-30T15:19:02Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "f1ca0fa6575631a0602ea895e0155fae12fd986b",
    "line" : 14,
    "diffHunk" : "@@ -72,6 +72,17 @@ excluded_test_tool_tests = [\n             },\n         ],\n     },\n+    {\n+        \"end\": \"1.3.0-snapshot.20200617.4484.0.7e0a6848\",\n+        \"platform_ranges\": [\n+            {\n+                \"start\": \"0.0.0\",  # fixme on next release\n+                \"exclusions\": [\n+                    \"CommandServiceIT\",\n+                ],\n+            },\n+        ],\n+    },"
  },
  {
    "id" : "3c22040b-e819-4e56-824e-49aac8e5da3e",
    "prId" : 6325,
    "comments" : [
      {
        "id" : "20b4a464-744d-4018-92f3-567c90c70376",
        "parentId" : null,
        "author" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "body" : "As this version is not going to be tested anymore, should we remove this exclusion?",
        "createdAt" : "2020-06-12T14:27:35Z",
        "updatedAt" : "2020-06-12T14:27:36Z",
        "lastEditedBy" : {
          "login" : "garyverhaegen-da",
          "name" : "Gary Verhaegen",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/45561385?u=eb17386ea66edbd0cd449e33b2d291bf5a1b51cb&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "bbb76ae7-489b-4454-ba28-8ef73dc3970e",
        "parentId" : "20b4a464-744d-4018-92f3-567c90c70376",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "I don’t feel too strongly about this but it seems easier to me to just keep the exclusions. They don’t cause any harm.",
        "createdAt" : "2020-06-12T14:31:35Z",
        "updatedAt" : "2020-06-12T14:31:35Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "98fc7d82-dadc-4e4d-8a07-b0ed93e50174",
        "parentId" : "20b4a464-744d-4018-92f3-567c90c70376",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Otherwise you probably also want to switch all the other bounds to start or end at versions that we include. That just seems more tricky to keep in sync.",
        "createdAt" : "2020-06-12T14:32:50Z",
        "updatedAt" : "2020-06-12T14:32:50Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "99ac5b3a8e197dd0ba803fc2c0a381168386c2c4",
    "line" : 83,
    "diffHunk" : "@@ -128,7 +69,7 @@ excluded_test_tool_tests = {\n             \"exclusions\": [\"ContractKeysIT\"],"
  },
  {
    "id" : "b9a3bbf0-cd2f-40fe-94a9-bbb6ff094388",
    "prId" : 6094,
    "comments" : [
      {
        "id" : "8ebbce1a-9821-418b-8e57-6556e7c28839",
        "parentId" : null,
        "author" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "body" : "We're assigning special meaning to the version `0.0.0` by making it always the latest version. I think it would make sense to pull this into `cmp_version`. For versions that don't follow that pattern we can still use [skylib's comparisons](https://github.com/bazelbuild/bazel-skylib/blob/560d7b2359aecb066d81041cb532b82d7354561b/lib/versions.bzl#L57-L80).",
        "createdAt" : "2020-05-26T08:24:47Z",
        "updatedAt" : "2020-05-26T09:27:01Z",
        "lastEditedBy" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "ea73635b-42e4-4245-9119-3c1a04f90979",
        "parentId" : "8ebbce1a-9821-418b-8e57-6556e7c28839",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Makes sense, I’ll make the change. As mentioned below, we cannot use the skylib comparisons since they ignore the prerelease but we can at least use a similar API.",
        "createdAt" : "2020-05-26T09:08:45Z",
        "updatedAt" : "2020-05-26T09:27:01Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "222870e2-e5f6-4010-8b1c-308e2bfdc3d2",
        "parentId" : "8ebbce1a-9821-418b-8e57-6556e7c28839",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Moved to `cmp_version`.",
        "createdAt" : "2020-05-26T09:26:24Z",
        "updatedAt" : "2020-05-26T09:27:01Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "d2375e181edcce21badd15d0e16947bba6cada49",
    "line" : null,
    "diffHunk" : "@@ -6,277 +6,174 @@ load(\n     \"client_server_test\",\n )\n load(\"@os_info//:os_info.bzl\", \"is_windows\")\n-load(\"//bazel_tools:versions.bzl\", \"version_to_name\")\n+load(\"//bazel_tools:versions.bzl\", \"cmp_version\", \"version_to_name\")\n load(\"//:versions.bzl\", \"latest_stable_version\")\n \n # Indexed first by test tool version and then by sandbox version.\n # Note that at this point the granularity for disabling tests\n # is sadly quite coarse. See\n # https://discuss.daml.com/t/can-i-disable-individual-tests-in-the-ledger-api-test-tool/226\n # for details.\n+# PRs that resulted in exclusions:\n+# - ContractKeysIT:\n+#   - https://github.com/digital-asset/daml/pull/5608\n+# - ContractKeysSubmitterIsMaintainerIT:\n+#   - https://github.com/digital-asset/daml/pull/5611\n excluded_test_tool_tests = {\n-    \"1.0.0\": {\n-        \"1.1.0-snapshot.20200430.4057.0.681c862d\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200506.4107.0.7e448d81\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"0.0.0\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1-snapshot.20200424.3917.0.16093690\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.1\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.2.0-snapshot.20200513.4172.0.021f4af3\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-    },\n-    \"1.0.1-snapshot.20200417.3908.1.722bac90\": {\n-        \"0.0.0\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1-snapshot.20200424.3917.0.16093690\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200430.4057.0.681c862d\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200506.4107.0.7e448d81\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.1\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.2.0-snapshot.20200513.4172.0.021f4af3\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-    },\n-    \"1.0.1-snapshot.20200424.3917.0.16093690\": {\n-        \"1.0.0\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1-snapshot.20200417.3908.1.722bac90\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200422.3991.0.6391ee9f\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200430.4057.0.681c862d\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-        ],\n-        \"1.1.0-snapshot.20200506.4107.0.7e448d81\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-        ],\n-        \"1.1.1\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-        ],\n-        \"1.2.0-snapshot.20200513.4172.0.021f4af3\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-        ],\n-        \"0.0.0\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-        ],\n-    },\n-    \"1.0.1\": {\n-        \"1.0.0\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1-snapshot.20200417.3908.1.722bac90\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200422.3991.0.6391ee9f\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200430.4057.0.681c862d\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-        ],\n-        \"1.1.0-snapshot.20200506.4107.0.7e448d81\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-        ],\n-        \"1.1.1\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-        ],\n-        \"1.2.0-snapshot.20200513.4172.0.021f4af3\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-        ],\n-        \"0.0.0\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-        ],\n-    },\n-    \"1.1.0-snapshot.20200422.3991.0.6391ee9f\": {\n-        \"1.0.1-snapshot.20200424.3917.0.16093690\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200430.4057.0.681c862d\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200506.4107.0.7e448d81\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.1\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.2.0-snapshot.20200513.4172.0.021f4af3\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"0.0.0\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-    },\n-    \"1.1.0-snapshot.20200430.4057.0.681c862d\": {\n-        \"1.0.0\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1-snapshot.20200417.3908.1.722bac90\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200422.3991.0.6391ee9f\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-    },\n-    \"1.1.0-snapshot.20200506.4107.0.7e448d81\": {\n-        \"1.0.0\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1-snapshot.20200417.3908.1.722bac90\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200422.3991.0.6391ee9f\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-    },\n-    \"1.1.1\": {\n-        \"1.0.0\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1-snapshot.20200417.3908.1.722bac90\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200422.3991.0.6391ee9f\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-    },\n-    \"1.2.0-snapshot.20200513.4172.0.021f4af3\": {\n-        \"1.0.0\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1-snapshot.20200417.3908.1.722bac90\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200422.3991.0.6391ee9f\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-    },\n-    \"0.0.0\": {\n-        \"1.0.0\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1-snapshot.20200417.3908.1.722bac90\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200422.3991.0.6391ee9f\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-    },\n+    \"1.0.0\": [\n+        {\n+            \"start\": \"1.0.1-snapshot.20200424.3917.0.16093690\",\n+            \"end\": \"1.0.1\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200430.4057.0.681c862d\",\n+            \"exclusions\": [\"ContractKeysIT\", \"ContractKeysSubmitterIsMaintainerIT\"],\n+        },\n+    ],\n+    \"1.0.1-snapshot.20200417.3908.1.722bac90\": [\n+        {\n+            \"start\": \"1.0.1-snapshot.20200424.3917.0.16093690\",\n+            \"end\": \"1.0.1\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200430.4057.0.681c862d\",\n+            \"exclusions\": [\"ContractKeysIT\", \"ContractKeysSubmitterIsMaintainerIT\"],\n+        },\n+    ],\n+    \"1.0.1-snapshot.20200424.3917.0.16093690\": [\n+        {\n+            \"end\": \"1.0.1-snapshot.20200417.3908.1.722bac90\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"end\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200430.4057.0.681c862d\",\n+            \"exclusions\": [\"ContractKeysSubmitterIsMaintainerIT\"],\n+        },\n+    ],\n+    \"1.0.1\": [\n+        {\n+            \"end\": \"1.0.1-snapshot.20200417.3908.1.722bac90\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"end\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200430.4057.0.681c862d\",\n+            \"exclusions\": [\"ContractKeysSubmitterIsMaintainerIT\"],\n+        },\n+    ],\n+    \"1.1.0-snapshot.20200422.3991.0.6391ee9f\": [\n+        {\n+            \"start\": \"1.0.1-snapshot.20200424.3917.0.16093690\",\n+            \"end\": \"1.0.1\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200430.4057.0.681c862d\",\n+            \"exclusions\": [\"ContractKeysIT\", \"ContractKeysSubmitterIsMaintainerIT\"],\n+        },\n+    ],\n+    \"1.1.0-snapshot.20200430.4057.0.681c862d\": [\n+        {\n+            \"end\": \"1.0.1-snapshot.20200417.3908.1.722bac90\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"end\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+    ],\n+    \"1.1.0-snapshot.20200506.4107.0.7e448d81\": [\n+        {\n+            \"end\": \"1.0.1-snapshot.20200417.3908.1.722bac90\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"end\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+    ],\n+    \"1.1.1\": [\n+        {\n+            \"end\": \"1.0.1-snapshot.20200417.3908.1.722bac90\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"end\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+    ],\n+    \"1.2.0-snapshot.20200513.4172.0.021f4af3\": [\n+        {\n+            \"end\": \"1.0.1-snapshot.20200417.3908.1.722bac90\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"end\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+    ],\n+    \"1.2.0-snapshot.20200520.4224.0.2af134ca\": [\n+        {\n+            \"end\": \"1.0.1-snapshot.20200417.3908.1.722bac90\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"end\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+    ],\n+    \"1.2.0-snapshot.20200520.4228.0.595f1e27\": [\n+        {\n+            \"end\": \"1.0.1-snapshot.20200417.3908.1.722bac90\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"end\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+    ],\n+    \"0.0.0\": [\n+        {\n+            \"end\": \"1.0.1-snapshot.20200417.3908.1.722bac90\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"end\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+    ],\n }\n \n def get_excluded_tests(test_tool_version, sandbox_version):\n-    return excluded_test_tool_tests.get(test_tool_version, default = {}).get(sandbox_version, default = [])\n+    exclusion_ranges = excluded_test_tool_tests.get(test_tool_version, default = [])\n+    exclusions = []\n+    for range in exclusion_ranges:\n+        start = range.get(\"start\")\n+        end = range.get(\"end\")\n+        if start and sandbox_version != \"0.0.0\" and cmp_version(sandbox_version, start) < 0:"
  },
  {
    "id" : "4cce3533-425a-4212-8573-a3b2513699ac",
    "prId" : 6094,
    "comments" : [
      {
        "id" : "ddcd9d96-fa7a-407e-9c10-4f2914cb433b",
        "parentId" : null,
        "author" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "body" : "This comment seems outdated.",
        "createdAt" : "2020-05-26T08:30:27Z",
        "updatedAt" : "2020-05-26T09:27:01Z",
        "lastEditedBy" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "2344c88f-c74b-481a-8492-89b0fd281b80",
        "parentId" : "ddcd9d96-fa7a-407e-9c10-4f2914cb433b",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "How so? We still have the issue that the granularity is too coarse.",
        "createdAt" : "2020-05-26T09:00:53Z",
        "updatedAt" : "2020-05-26T09:27:01Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "56f57fa9-47fd-4601-b62a-b6e1575dd023",
        "parentId" : "ddcd9d96-fa7a-407e-9c10-4f2914cb433b",
        "author" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "body" : "> Indexed first by test tool version and then by sandbox version\r\n\r\nIIUC they are no longer indexed by sandbox version.",
        "createdAt" : "2020-05-26T09:05:48Z",
        "updatedAt" : "2020-05-26T09:27:01Z",
        "lastEditedBy" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "d7307147-ac4a-45e2-b4a2-1e47058cef16",
        "parentId" : "ddcd9d96-fa7a-407e-9c10-4f2914cb433b",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Ah I see, I’ll update it.",
        "createdAt" : "2020-05-26T09:08:06Z",
        "updatedAt" : "2020-05-26T09:27:01Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "b58ceeac-3937-4af6-bc88-162425caac91",
        "parentId" : "ddcd9d96-fa7a-407e-9c10-4f2914cb433b",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "updated",
        "createdAt" : "2020-05-26T09:25:52Z",
        "updatedAt" : "2020-05-26T09:27:01Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "8e40e366-a8e1-4300-ad4d-a4813ecf01d1",
        "parentId" : "ddcd9d96-fa7a-407e-9c10-4f2914cb433b",
        "author" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "body" : "Thank you!",
        "createdAt" : "2020-05-26T09:28:56Z",
        "updatedAt" : "2020-05-26T09:28:56Z",
        "lastEditedBy" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "d2375e181edcce21badd15d0e16947bba6cada49",
    "line" : null,
    "diffHunk" : "@@ -6,277 +6,174 @@ load(\n     \"client_server_test\",\n )\n load(\"@os_info//:os_info.bzl\", \"is_windows\")\n-load(\"//bazel_tools:versions.bzl\", \"version_to_name\")\n+load(\"//bazel_tools:versions.bzl\", \"cmp_version\", \"version_to_name\")\n load(\"//:versions.bzl\", \"latest_stable_version\")\n \n # Indexed first by test tool version and then by sandbox version.\n # Note that at this point the granularity for disabling tests\n # is sadly quite coarse. See\n # https://discuss.daml.com/t/can-i-disable-individual-tests-in-the-ledger-api-test-tool/226\n # for details."
  },
  {
    "id" : "61b89e8d-2e87-4ca4-b709-ef9ecf091132",
    "prId" : 6094,
    "comments" : [
      {
        "id" : "3b500019-1393-4f8f-a957-59da24d001ce",
        "parentId" : null,
        "author" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "body" : "Skylib has a reasonably nice [API for comparing versions](https://github.com/bazelbuild/bazel-skylib/blob/560d7b2359aecb066d81041cb532b82d7354561b/lib/versions.bzl#L57-L80) I think it might make this a bit easier to read. Something along the lines of\r\n\r\n```\r\nif versions.is_at_least(start, sandbox_version) and versions.is_at_most(end, sandbox_version):\r\n    exclusions += range[\"exclusions\"]\r\n```\r\n\r\nAssuming that our `is_at_least` and `is_at_most` treats `0.0.0` as most recent.",
        "createdAt" : "2020-05-26T08:56:26Z",
        "updatedAt" : "2020-05-26T09:27:01Z",
        "lastEditedBy" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "50dc4418-7a0e-4848-97ab-5f3df4a5655e",
        "parentId" : "3b500019-1393-4f8f-a957-59da24d001ce",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "I’ve looked at this API but it only uses `major,minor,patch` and ignores the prerelease part.",
        "createdAt" : "2020-05-26T09:01:20Z",
        "updatedAt" : "2020-05-26T09:27:01Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "c0521f88-6272-4069-9334-7540918c05b2",
        "parentId" : "3b500019-1393-4f8f-a957-59da24d001ce",
        "author" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "body" : "Yes, the suggestion is to replicate that API, not to use it.",
        "createdAt" : "2020-05-26T09:06:10Z",
        "updatedAt" : "2020-05-26T09:27:01Z",
        "lastEditedBy" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "b53618fe-2101-4e6c-acaf-39ca3a2ae1f9",
        "parentId" : "3b500019-1393-4f8f-a957-59da24d001ce",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Oh that makes sense, I’ll give it a shot :+1:",
        "createdAt" : "2020-05-26T09:07:56Z",
        "updatedAt" : "2020-05-26T09:27:01Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "a494789e-bc31-4e8d-a078-189755cdf202",
        "parentId" : "3b500019-1393-4f8f-a957-59da24d001ce",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "I’ve put the skylib-style API on top of `cmp_versions` and made that one private.",
        "createdAt" : "2020-05-26T09:26:13Z",
        "updatedAt" : "2020-05-26T09:27:01Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "d8ee5eed-54f6-4799-8642-4fbfef840726",
        "parentId" : "3b500019-1393-4f8f-a957-59da24d001ce",
        "author" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "body" : "Thank you, looks good!",
        "createdAt" : "2020-05-26T09:28:27Z",
        "updatedAt" : "2020-05-26T09:28:27Z",
        "lastEditedBy" : {
          "login" : "aherrmann-da",
          "name" : "Andreas Herrmann",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/42969706?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "d2375e181edcce21badd15d0e16947bba6cada49",
    "line" : null,
    "diffHunk" : "@@ -6,277 +6,174 @@ load(\n     \"client_server_test\",\n )\n load(\"@os_info//:os_info.bzl\", \"is_windows\")\n-load(\"//bazel_tools:versions.bzl\", \"version_to_name\")\n+load(\"//bazel_tools:versions.bzl\", \"cmp_version\", \"version_to_name\")\n load(\"//:versions.bzl\", \"latest_stable_version\")\n \n # Indexed first by test tool version and then by sandbox version.\n # Note that at this point the granularity for disabling tests\n # is sadly quite coarse. See\n # https://discuss.daml.com/t/can-i-disable-individual-tests-in-the-ledger-api-test-tool/226\n # for details.\n+# PRs that resulted in exclusions:\n+# - ContractKeysIT:\n+#   - https://github.com/digital-asset/daml/pull/5608\n+# - ContractKeysSubmitterIsMaintainerIT:\n+#   - https://github.com/digital-asset/daml/pull/5611\n excluded_test_tool_tests = {\n-    \"1.0.0\": {\n-        \"1.1.0-snapshot.20200430.4057.0.681c862d\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200506.4107.0.7e448d81\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"0.0.0\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1-snapshot.20200424.3917.0.16093690\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.1\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.2.0-snapshot.20200513.4172.0.021f4af3\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-    },\n-    \"1.0.1-snapshot.20200417.3908.1.722bac90\": {\n-        \"0.0.0\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1-snapshot.20200424.3917.0.16093690\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200430.4057.0.681c862d\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200506.4107.0.7e448d81\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.1\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.2.0-snapshot.20200513.4172.0.021f4af3\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-    },\n-    \"1.0.1-snapshot.20200424.3917.0.16093690\": {\n-        \"1.0.0\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1-snapshot.20200417.3908.1.722bac90\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200422.3991.0.6391ee9f\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200430.4057.0.681c862d\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-        ],\n-        \"1.1.0-snapshot.20200506.4107.0.7e448d81\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-        ],\n-        \"1.1.1\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-        ],\n-        \"1.2.0-snapshot.20200513.4172.0.021f4af3\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-        ],\n-        \"0.0.0\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-        ],\n-    },\n-    \"1.0.1\": {\n-        \"1.0.0\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1-snapshot.20200417.3908.1.722bac90\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200422.3991.0.6391ee9f\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200430.4057.0.681c862d\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-        ],\n-        \"1.1.0-snapshot.20200506.4107.0.7e448d81\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-        ],\n-        \"1.1.1\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-        ],\n-        \"1.2.0-snapshot.20200513.4172.0.021f4af3\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-        ],\n-        \"0.0.0\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-        ],\n-    },\n-    \"1.1.0-snapshot.20200422.3991.0.6391ee9f\": {\n-        \"1.0.1-snapshot.20200424.3917.0.16093690\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200430.4057.0.681c862d\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200506.4107.0.7e448d81\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.1\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.2.0-snapshot.20200513.4172.0.021f4af3\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"0.0.0\": [\n-            # This restriction has been removed in https://github.com/digital-asset/daml/pull/5611.\n-            \"ContractKeysSubmitterIsMaintainerIT\",\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-    },\n-    \"1.1.0-snapshot.20200430.4057.0.681c862d\": {\n-        \"1.0.0\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1-snapshot.20200417.3908.1.722bac90\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200422.3991.0.6391ee9f\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-    },\n-    \"1.1.0-snapshot.20200506.4107.0.7e448d81\": {\n-        \"1.0.0\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1-snapshot.20200417.3908.1.722bac90\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200422.3991.0.6391ee9f\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-    },\n-    \"1.1.1\": {\n-        \"1.0.0\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1-snapshot.20200417.3908.1.722bac90\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200422.3991.0.6391ee9f\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-    },\n-    \"1.2.0-snapshot.20200513.4172.0.021f4af3\": {\n-        \"1.0.0\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1-snapshot.20200417.3908.1.722bac90\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200422.3991.0.6391ee9f\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-    },\n-    \"0.0.0\": {\n-        \"1.0.0\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.0.1-snapshot.20200417.3908.1.722bac90\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-        \"1.1.0-snapshot.20200422.3991.0.6391ee9f\": [\n-            # Fix for https://github.com/digital-asset/daml/issues/5562\n-            \"ContractKeysIT\",\n-        ],\n-    },\n+    \"1.0.0\": [\n+        {\n+            \"start\": \"1.0.1-snapshot.20200424.3917.0.16093690\",\n+            \"end\": \"1.0.1\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200430.4057.0.681c862d\",\n+            \"exclusions\": [\"ContractKeysIT\", \"ContractKeysSubmitterIsMaintainerIT\"],\n+        },\n+    ],\n+    \"1.0.1-snapshot.20200417.3908.1.722bac90\": [\n+        {\n+            \"start\": \"1.0.1-snapshot.20200424.3917.0.16093690\",\n+            \"end\": \"1.0.1\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200430.4057.0.681c862d\",\n+            \"exclusions\": [\"ContractKeysIT\", \"ContractKeysSubmitterIsMaintainerIT\"],\n+        },\n+    ],\n+    \"1.0.1-snapshot.20200424.3917.0.16093690\": [\n+        {\n+            \"end\": \"1.0.1-snapshot.20200417.3908.1.722bac90\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"end\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200430.4057.0.681c862d\",\n+            \"exclusions\": [\"ContractKeysSubmitterIsMaintainerIT\"],\n+        },\n+    ],\n+    \"1.0.1\": [\n+        {\n+            \"end\": \"1.0.1-snapshot.20200417.3908.1.722bac90\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"end\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200430.4057.0.681c862d\",\n+            \"exclusions\": [\"ContractKeysSubmitterIsMaintainerIT\"],\n+        },\n+    ],\n+    \"1.1.0-snapshot.20200422.3991.0.6391ee9f\": [\n+        {\n+            \"start\": \"1.0.1-snapshot.20200424.3917.0.16093690\",\n+            \"end\": \"1.0.1\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200430.4057.0.681c862d\",\n+            \"exclusions\": [\"ContractKeysIT\", \"ContractKeysSubmitterIsMaintainerIT\"],\n+        },\n+    ],\n+    \"1.1.0-snapshot.20200430.4057.0.681c862d\": [\n+        {\n+            \"end\": \"1.0.1-snapshot.20200417.3908.1.722bac90\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"end\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+    ],\n+    \"1.1.0-snapshot.20200506.4107.0.7e448d81\": [\n+        {\n+            \"end\": \"1.0.1-snapshot.20200417.3908.1.722bac90\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"end\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+    ],\n+    \"1.1.1\": [\n+        {\n+            \"end\": \"1.0.1-snapshot.20200417.3908.1.722bac90\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"end\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+    ],\n+    \"1.2.0-snapshot.20200513.4172.0.021f4af3\": [\n+        {\n+            \"end\": \"1.0.1-snapshot.20200417.3908.1.722bac90\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"end\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+    ],\n+    \"1.2.0-snapshot.20200520.4224.0.2af134ca\": [\n+        {\n+            \"end\": \"1.0.1-snapshot.20200417.3908.1.722bac90\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"end\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+    ],\n+    \"1.2.0-snapshot.20200520.4228.0.595f1e27\": [\n+        {\n+            \"end\": \"1.0.1-snapshot.20200417.3908.1.722bac90\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"end\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+    ],\n+    \"0.0.0\": [\n+        {\n+            \"end\": \"1.0.1-snapshot.20200417.3908.1.722bac90\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+        {\n+            \"start\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"end\": \"1.1.0-snapshot.20200422.3991.0.6391ee9f\",\n+            \"exclusions\": [\"ContractKeysIT\"],\n+        },\n+    ],\n }\n \n def get_excluded_tests(test_tool_version, sandbox_version):\n-    return excluded_test_tool_tests.get(test_tool_version, default = {}).get(sandbox_version, default = [])\n+    exclusion_ranges = excluded_test_tool_tests.get(test_tool_version, default = [])\n+    exclusions = []\n+    for range in exclusion_ranges:\n+        start = range.get(\"start\")\n+        end = range.get(\"end\")\n+        if start and sandbox_version != \"0.0.0\" and cmp_version(sandbox_version, start) < 0:\n+            continue\n+        if end and (cmp_version(sandbox_version, end) > 0 or sandbox_version == \"0.0.0\"):\n+            continue"
  },
  {
    "id" : "6492bc87-6715-44be-9d5a-503b64ccb2a4",
    "prId" : 5905,
    "comments" : [
      {
        "id" : "d1e2445f-1be6-4570-9681-6af63fe435a2",
        "parentId" : null,
        "author" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "body" : "Don't you need a `--sandbox-option` here?",
        "createdAt" : "2020-05-08T07:55:57Z",
        "updatedAt" : "2020-05-08T07:57:28Z",
        "lastEditedBy" : {
          "login" : "SamirTalwar-DA",
          "name" : "Samir Talwar",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/60356447?u=f6cdfccc6ea4254bd7c212099bbac2c27a00a28c&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "f0fdf6c4-eddc-4ee0-8379-5c5435998bd3",
        "parentId" : "d1e2445f-1be6-4570-9681-6af63fe435a2",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "No, `--sandbox-option` is for `daml start`. `daml sandbox` just calls the underlying JAR directly without passing any extra options.",
        "createdAt" : "2020-05-08T07:57:46Z",
        "updatedAt" : "2020-05-08T07:57:46Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "e1968b767a892c28b216eaef82ca3471eb4a9418",
    "line" : 8,
    "diffHunk" : "@@ -225,7 +225,9 @@ def sdk_platform_test(sdk_version, platform_version):\n     sandbox = \"@daml-sdk-{platform_version}//:daml\".format(\n         platform_version = platform_version,\n     )\n-    sandbox_args = [\"sandbox\"]\n+    # We need to use weak seeding to avoid our tests timing out\n+    # if the CI machine does not have enough entropy.\n+    sandbox_args = [\"sandbox\", \"--contract-id-seeding=testing-weak\"]"
  }
]