[
  {
    "id" : "4935fdd1-41af-4863-96b7-f89acc95182d",
    "prId" : 6298,
    "comments" : [
      {
        "id" : "043b1f9a-825d-45c6-8958-04364ecc4c3c",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "If we do start postgres separately for each test we might as well move it into `runTest`.",
        "createdAt" : "2020-06-11T13:34:22Z",
        "updatedAt" : "2020-06-12T11:38:52Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "81ea9759-c114-43b7-bd4f-39390c745773",
        "parentId" : "043b1f9a-825d-45c6-8958-04364ecc4c3c",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Yeah, I faced some issues initially because I was trying to run starting from the earliest version after I completed a step-by-step test over the entire version range. This caused an older Ledger API server to use a newer underlying database schema, causing weird runtime issues. Ideally it would be nice to have a way of using a single Postgres instance and running all steps for all tests for a given version before moving on. If you think this is feasible but perhaps requires a bit of tinkering around, I'd be ok moving the `withPostgres` inside `runTest` and use the new approach as part of a separate contribution.",
        "createdAt" : "2020-06-11T14:37:33Z",
        "updatedAt" : "2020-06-12T11:38:52Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "56f50249-2f0f-43eb-ac52-57efc3fd8037",
        "parentId" : "043b1f9a-825d-45c6-8958-04364ecc4c3c",
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Should be doable but itâ€™s a bit of work so I would suggest to move `withPostgres` inside the test for now and address this separately.",
        "createdAt" : "2020-06-11T14:42:49Z",
        "updatedAt" : "2020-06-12T11:38:52Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "289c87af-ff48-4108-b49a-6945cb00734f",
        "parentId" : "043b1f9a-825d-45c6-8958-04364ecc4c3c",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Addressed by https://github.com/digital-asset/daml/pull/6298/commits/472ae2786225c9408d53ff0de86917e1df0cae64",
        "createdAt" : "2020-06-12T10:56:44Z",
        "updatedAt" : "2020-06-12T11:38:52Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "386f92db7169d27dc45764e60f30d42b1c7b3ea6",
    "line" : null,
    "diffHunk" : "@@ -67,27 +67,37 @@ main = do\n                 , \"--host=localhost\", \"--port=\" <> show p\n                 ]\n         hPutStrLn stderr \"<-- Uploaded model DAR\"\n-        runTest jdbcUrl platformAssistants (ProposeAccept.test step modelDar)\n+        runTest \"propose-accept\" jdbcUrl platformAssistants (ProposeAccept.test step modelDar)\n+    withPostgres $ \\jdbcUrl -> do"
  }
]