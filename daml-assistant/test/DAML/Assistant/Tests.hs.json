[
  {
    "id" : "3e172f7d-3f94-47ec-a066-b97bcc681447",
    "prId" : 1528,
    "comments" : [
      {
        "id" : "3b01d4e9-6a21-496d-b38e-1d839180a90f",
        "parentId" : null,
        "author" : {
          "login" : "neil-da",
          "name" : "Neil Mitchell",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/35463327?u=0eb1719958bc6e449ec5e7df3a312fa566f5055d&v=4"
        },
        "body" : "Should this not be `withCurrentDirectory`? Any use of `setCurrentDirectory` freaks me out.",
        "createdAt" : "2019-06-05T15:43:55Z",
        "updatedAt" : "2019-06-05T15:44:20Z",
        "lastEditedBy" : {
          "login" : "neil-da",
          "name" : "Neil Mitchell",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/35463327?u=0eb1719958bc6e449ec5e7df3a312fa566f5055d&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "affcd2cfd0f8d6cca9edd2f0fa778f7f276825eb",
    "line" : 93,
    "diffHunk" : "@@ -398,7 +401,34 @@ testInstall = Tasty.testGroup \"DAML.Assistant.Install\"\n \n testInstallUnix :: Tasty.TestTree\n testInstallUnix = Tasty.testGroup \"unix-specific tests\"\n-    [ Tasty.testCase \"reject an absolute symlink in a tarball\" $ do\n+    [ Tasty.testCase \"initial install a tarball from symlink\" $ do\n+              withSystemTempDirectory \"test-install\" $ \\ base -> do\n+                  let damlPath = DamlPath (base </> \"daml\")\n+                      options = InstallOptions\n+                          { iTargetM = Just (RawInstallTarget \"source.tar.gz\")\n+                          , iActivate = ActivateInstall True\n+                          , iQuiet = QuietInstall True\n+                          , iForce = ForceInstall False\n+                          , iSetPath = SetPath False\n+                          }\n+\n+                  setCurrentDirectory base"
  },
  {
    "id" : "e2372f0b-f468-4b3b-8686-bc59eb899dae",
    "prId" : 951,
    "comments" : [
      {
        "id" : "4f512ebc-5574-4087-9c53-b52f04f184f8",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "A comment mentioning the `setEnv` behavior might be useful.",
        "createdAt" : "2019-05-06T15:36:33Z",
        "updatedAt" : "2019-05-06T18:41:43Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "cb6073a2-342d-40a7-ad1e-80776b10ec6f",
        "parentId" : "4f512ebc-5574-4087-9c53-b52f04f184f8",
        "author" : null,
        "body" : ":+1:",
        "createdAt" : "2019-05-06T15:53:39Z",
        "updatedAt" : "2019-05-06T18:41:43Z",
        "lastEditedBy" : null,
        "tags" : [
        ]
      }
    ],
    "commit" : "0ec70931aecdfe07d7ccfbe670c9ad12d0c349a6",
    "line" : 21,
    "diffHunk" : "@@ -36,14 +35,39 @@ import qualified Data.Conduit.Tar as Tar\n -- unix specific\n import System.PosixCompat.Files (createSymbolicLink)\n \n+-- | Replace all environment variables for test action, then restore them."
  }
]