[
  {
    "id" : "476b5ae1-72c7-46bb-8277-a966a087c531",
    "prId" : 4814,
    "comments" : [
      {
        "id" : "72247843-15d6-4993-8a54-b251d7380ccf",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "Looks like we need a `json2csv` tool. ðŸ˜„ ",
        "createdAt" : "2020-03-04T17:38:14Z",
        "updatedAt" : "2020-03-04T17:39:01Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "b83ac4a8c9ad0954a4a763078060f903297858c4",
    "line" : 30,
    "diffHunk" : "@@ -68,19 +69,28 @@ echo \"Writing export to $FILE...\"\n \n echo \"\\\"date merged\\\",\\\"date opened\\\",\\\"title\\\",\\\"author\\\",\\\"approvers\\\",\\\"merger\\\",\\\"change type\\\",\\\"sha\\\",\\\"commit link\\\",\\\"PR\\\",\\\"PR link\\\"\" > \"$FILE\"\n for sha in $SHA_LIST; do\n-    PR_URL=$(cat $TMP/commits/$sha | jq -r '.[] | .url')\n-    PR=$(cat $TMP/commits/$sha | jq -r '.[] | .number')\n-    OPEN_DATE=$(cat $TMP/pulls/$PR | jq \".created_at\")\n-    MERGE_DATE=$(cat $TMP/pulls/$PR | jq \".merged_at\")\n-    AUTHOR=$(cat $TMP/pulls/$PR | jq '.user.login')\n-    MERGER=$(cat $TMP/pulls/$PR | jq '.merged_by.login')\n-    PR_LINK=\"https://github.com/digital-asset/daml/pull/$PR\"\n     COMMIT_LINK=\"https://github.com/digital-asset/daml/commit/$sha\"\n-    TITLE=$(cat $TMP/pulls/$PR | jq '.title')\n-    CHANGE_TYPE=$(cat $TMP/issues/$PR | jq 'if [.labels[] | .name] | contains([\"Standard-Change\"]) then \"Standard-Change\" else \"Routine-Change\" end')\n-    APPROVERS=$(cat $TMP/approvers/$PR | jq '[.[] | select(.state==\"APPROVED\") | .user.login] | join(\";\")')\n-    if [ \"$CHANGE_TYPE\" = '\"Standard-Change\"' ] || [ \"$FULL\" = \"true\" ]; then\n-        echo \"$MERGE_DATE,$OPEN_DATE,$TITLE,$AUTHOR,$APPROVERS,$MERGER,$CHANGE_TYPE,\\\"$sha\\\",\\\"$COMMIT_LINK\\\",\\\"$PR\\\",\\\"$PR_LINK\\\"\" >> \"$FILE\"\n+    PR=$(cat $TMP/commits/$sha | jq -r '.[] | .number')\n+\n+    if [ -z \"$PR\" ]; then\n+        echo \"$COMMIT_LINK\" >> \"$ERROR_FILE\"\n+    else\n+        PR_URL=$(cat $TMP/commits/$sha | jq -r '.[] | .url')"
  },
  {
    "id" : "3ffcaca0-b81a-442a-a22a-54f9dccf3535",
    "prId" : 4416,
    "comments" : [
      {
        "id" : "bff8cc91-9cae-4aee-8975-c4cd8a9acb2a",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Long bash scripts scare me but as long as it stays around this size, Iâ€™m fine with it :slightly_smiling_face: ",
        "createdAt" : "2020-02-05T18:26:41Z",
        "updatedAt" : "2020-02-06T12:17:50Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "ee5975abf9b0735296b4336fb91e3d353186af8d",
    "line" : 1,
    "diffHunk" : "@@ -0,0 +1,82 @@\n+#!/usr/bin/env bash"
  }
]