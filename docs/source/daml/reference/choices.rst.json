[
  {
    "id" : "1f7513fb-50c5-4f41-9d4b-a90621dfac34",
    "prId" : 4134,
    "comments" : [
      {
        "id" : "f2c501c5-e82e-4aa6-aa14-4c814f3f5ba4",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "Once we have merged https://github.com/digital-asset/daml/pull/4164, this will be wrong. No qualified means `consuming` which is like `preconsuming` + the additional privacy leak.",
        "createdAt" : "2020-01-22T17:43:54Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "f85f7d0a-21de-4a15-84f2-8efe6f9a2fca",
        "parentId" : "f2c501c5-e82e-4aa6-aa14-4c814f3f5ba4",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Addressed by https://github.com/digital-asset/daml/pull/4134/commits/bf8c3d9a27f12feadb1499a45e53a6cacd0454ef",
        "createdAt" : "2020-01-23T15:31:01Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "11f52f472e3cb698771d149a1e0d4ac0a464f02a",
    "line" : null,
    "diffHunk" : "@@ -72,10 +72,55 @@ Controllers\n \n   The conjunction of **all** the parties are required to authorize when this choice is exercised.\n \n-.. _daml-ref-anytime:\n+.. _daml-ref-consumability:\n+\n+Consumability\n+=============\n+\n+If no qualifier is present, choices are *preconsuming*. This behavior is also usually referred to simply as *consuming*."
  },
  {
    "id" : "4d7dfef0-9392-4b5d-abce-9788c90e3904",
    "prId" : 4134,
    "comments" : [
      {
        "id" : "54d36964-3339-4ee1-9e2d-21c3bde32710",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "See above.",
        "createdAt" : "2020-01-22T17:44:15Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "75afc67e-1996-48b1-a85e-26b89c0cc4f1",
        "parentId" : "54d36964-3339-4ee1-9e2d-21c3bde32710",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Addressed by https://github.com/digital-asset/daml/pull/4134/commits/a2b69af4083a79ab433725dcd0a269db061a7d0b",
        "createdAt" : "2020-01-23T15:31:20Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "11f52f472e3cb698771d149a1e0d4ac0a464f02a",
    "line" : null,
    "diffHunk" : "@@ -72,10 +72,55 @@ Controllers\n \n   The conjunction of **all** the parties are required to authorize when this choice is exercised.\n \n-.. _daml-ref-anytime:\n+.. _daml-ref-consumability:\n+\n+Consumability\n+=============\n+\n+If no qualifier is present, choices are *preconsuming*. This behavior is also usually referred to simply as *consuming*.\n+\n+Preconsuming choices\n+********************\n+\n+.. literalinclude:: ../code-snippets/Reference.daml\n+   :language: daml\n+   :start-after: -- start choice-first preconsuming snippet\n+   :end-before: -- end choice-first preconsuming snippet\n+   :caption: Option 1 for specifying choices: choice name first\n+\n+.. literalinclude:: ../code-snippets/Reference.daml\n+   :language: daml\n+   :start-after: -- start controller-first preconsuming snippet\n+   :end-before: -- end controller-first preconsuming snippet\n+   :caption: Option 2 for specifying choices: controller first\n+\n+- ``preconsuming`` keyword. Optional.\n+- Makes a choice preconsuming: the contract is archived before the body of the exercise is executed.\n+- Default behavior, equivalent to not specifying a consumability qualifier."
  },
  {
    "id" : "6826e0ef-fada-4043-a1e8-f2c14e0bb84b",
    "prId" : 4134,
    "comments" : [
      {
        "id" : "61f2bd8e-0a03-44ad-83e6-4c831f99b6b0",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "```suggestion\r\n- Contracts created in the choice body are divulged to the signatories and controllers of the contracts as well as to the observers of the contract on which the choice was exercised.\r\n```\r\n@bame-da Is this the correct term from the disclogence vocabulary?",
        "createdAt" : "2020-01-22T17:45:39Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "f5718365-90fb-4dcd-89d3-5a1d49d8e0c1",
        "parentId" : "61f2bd8e-0a03-44ad-83e6-4c831f99b6b0",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Addressed by https://github.com/digital-asset/daml/pull/4134/commits/36b7177f3a93bebf84663eec459fd2c0252b6d2c",
        "createdAt" : "2020-01-23T15:31:36Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "11f52f472e3cb698771d149a1e0d4ac0a464f02a",
    "line" : null,
    "diffHunk" : "@@ -72,10 +72,55 @@ Controllers\n \n   The conjunction of **all** the parties are required to authorize when this choice is exercised.\n \n-.. _daml-ref-anytime:\n+.. _daml-ref-consumability:\n+\n+Consumability\n+=============\n+\n+If no qualifier is present, choices are *preconsuming*. This behavior is also usually referred to simply as *consuming*.\n+\n+Preconsuming choices\n+********************\n+\n+.. literalinclude:: ../code-snippets/Reference.daml\n+   :language: daml\n+   :start-after: -- start choice-first preconsuming snippet\n+   :end-before: -- end choice-first preconsuming snippet\n+   :caption: Option 1 for specifying choices: choice name first\n+\n+.. literalinclude:: ../code-snippets/Reference.daml\n+   :language: daml\n+   :start-after: -- start controller-first preconsuming snippet\n+   :end-before: -- end controller-first preconsuming snippet\n+   :caption: Option 2 for specifying choices: controller first\n+\n+- ``preconsuming`` keyword. Optional.\n+- Makes a choice preconsuming: the contract is archived before the body of the exercise is executed.\n+- Default behavior, equivalent to not specifying a consumability qualifier.\n+- Contracts created in the choice body are known to the signatories and controllers of the contracts as well as to the observers of the contract on which the choice was exercised."
  },
  {
    "id" : "f6c9d191-4bbe-4ac0-9d8f-de226bf7ff9f",
    "prId" : 4134,
    "comments" : [
      {
        "id" : "6452d8b6-00df-4530-a742-49efb9a4876c",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "```suggestion\r\n- Contracts created in the choice body are known only to the signatories and controllers of these contracts and not made known to the observers of the contract on which the choice was exercised.\r\n```",
        "createdAt" : "2020-01-22T17:46:05Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "86b71f19-c2ba-4618-b35c-9ef9d7db49a4",
        "parentId" : "6452d8b6-00df-4530-a742-49efb9a4876c",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Addressed by https://github.com/digital-asset/daml/pull/4134/commits/1ca1d57de204782a3d07ce2485c2b4a1695d377b",
        "createdAt" : "2020-01-23T15:31:56Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "11f52f472e3cb698771d149a1e0d4ac0a464f02a",
    "line" : null,
    "diffHunk" : "@@ -72,10 +72,55 @@ Controllers\n \n   The conjunction of **all** the parties are required to authorize when this choice is exercised.\n \n-.. _daml-ref-anytime:\n+.. _daml-ref-consumability:\n+\n+Consumability\n+=============\n+\n+If no qualifier is present, choices are *preconsuming*. This behavior is also usually referred to simply as *consuming*.\n+\n+Preconsuming choices\n+********************\n+\n+.. literalinclude:: ../code-snippets/Reference.daml\n+   :language: daml\n+   :start-after: -- start choice-first preconsuming snippet\n+   :end-before: -- end choice-first preconsuming snippet\n+   :caption: Option 1 for specifying choices: choice name first\n+\n+.. literalinclude:: ../code-snippets/Reference.daml\n+   :language: daml\n+   :start-after: -- start controller-first preconsuming snippet\n+   :end-before: -- end controller-first preconsuming snippet\n+   :caption: Option 2 for specifying choices: controller first\n+\n+- ``preconsuming`` keyword. Optional.\n+- Makes a choice preconsuming: the contract is archived before the body of the exercise is executed.\n+- Default behavior, equivalent to not specifying a consumability qualifier.\n+- Contracts created in the choice body are known to the signatories and controllers of the contracts as well as to the observers of the contract on which the choice was exercised.\n+\n+Postconsuming choices\n+*********************\n+\n+.. literalinclude:: ../code-snippets/Reference.daml\n+   :language: daml\n+   :start-after: -- start choice-first postconsuming snippet\n+   :end-before: -- end choice-first postconsuming snippet\n+   :caption: Option 1 for specifying choices: choice name first\n+\n+.. literalinclude:: ../code-snippets/Reference.daml\n+   :language: daml\n+   :start-after: -- start controller-first postconsuming snippet\n+   :end-before: -- end controller-first postconsuming snippet\n+   :caption: Option 2 for specifying choices: controller first\n+\n+- ``postconsuming`` keyword. Optional.\n+- Makes a choice postconsuming: the contract is archived after the body of the exercise is executed.\n+- The contract can still be used in the body of the exercise.\n+- Contracts created in the choice body are known only to the signatories and controllers of the contracts and not made known to the observers of the contract on which the choice was exercised."
  },
  {
    "id" : "de3cf2fc-80fe-4b4d-8fae-b806c6cafa17",
    "prId" : 4134,
    "comments" : [
      {
        "id" : "96be6e70-b247-4a86-9789-a6f5a4cd8a3c",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "See above.",
        "createdAt" : "2020-01-22T17:46:24Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "11f52f472e3cb698771d149a1e0d4ac0a464f02a",
    "line" : null,
    "diffHunk" : "@@ -91,9 +136,11 @@ Non-consuming choices\n \n - ``nonconsuming`` keyword. Optional.\n - Makes a choice non-consuming: that is, exercising the choice does not archive the contract.\n+- Contracts created in the choice body are known only to the signatories and controllers of the contracts and not made known to the observers of the contract on which the choice was exercised.\n+\n+  By default, choices are *preconsuming*: when a choice on a contract is exercised, that contract instance is *archived*. Archived means that it's permanently marked as being inactive, and no more choices can be exercised on it, though it still exists on the ledger."
  },
  {
    "id" : "22a2520b-43ca-4abc-a4ae-971100e5f906",
    "prId" : 4134,
    "comments" : [
      {
        "id" : "499d54dc-c1bd-4f78-93c7-529ab6f23976",
        "parentId" : null,
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "I'm not sure I understand this correctly but what I understand sounds wrong. `preconsuming` and `postconsuming` still archive the contract and hence can only ve exercised once. `nonconsuming` has the property you're describing.",
        "createdAt" : "2020-01-22T17:47:52Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "9ebdf95a-b9c1-44f2-b666-25698f574fd7",
        "parentId" : "499d54dc-c1bd-4f78-93c7-529ab6f23976",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Yeah, I guess I messed up while re-ordering some paragraph. Thanks.",
        "createdAt" : "2020-01-23T07:57:29Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "beeedeef-a2d6-4e26-bada-09e95af60c3d",
        "parentId" : "499d54dc-c1bd-4f78-93c7-529ab6f23976",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Addressed by https://github.com/digital-asset/daml/pull/4134/commits/a133907a47c005289fce27fb37e67c2798774ea2",
        "createdAt" : "2020-01-23T15:32:15Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "11f52f472e3cb698771d149a1e0d4ac0a464f02a",
    "line" : null,
    "diffHunk" : "@@ -91,9 +136,11 @@ Non-consuming choices\n \n - ``nonconsuming`` keyword. Optional.\n - Makes a choice non-consuming: that is, exercising the choice does not archive the contract.\n+- Contracts created in the choice body are known only to the signatories and controllers of the contracts and not made known to the observers of the contract on which the choice was exercised.\n+\n+  By default, choices are *preconsuming*: when a choice on a contract is exercised, that contract instance is *archived*. Archived means that it's permanently marked as being inactive, and no more choices can be exercised on it, though it still exists on the ledger.\n \n-  By default, choices are *consuming*: when a choice on a contract is exercised, that contract instance is *archived*. Archived means that it's permanently marked as being inactive, and no more choices can be exercised on it, though it still exists on the ledger.\n-- This is useful in the many situations when you want to be able to exercise a choice more than once.\n+- Both *preconsuming* and *postconsuming* behaviors are useful in the many situations when you want to be able to exercise a choice more than once."
  },
  {
    "id" : "b48f08e6-9ee5-4257-97a5-d82608195bd1",
    "prId" : 4134,
    "comments" : [
      {
        "id" : "2d85fece-c22d-47e4-9378-c4429ffb7159",
        "parentId" : null,
        "author" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "body" : "Maybe it would make sense to mention explicitly that pre- and post-consuming choices are just syntactic sugar for non-consuming choices + `archive self`?",
        "createdAt" : "2020-01-23T15:43:32Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "cocreature",
          "name" : "Moritz Kiefer",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/1313584?u=7864421488a876940b33e865c4b0091925617ca7&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "62b644bf-3590-43e3-a15e-7fb6032fbac8",
        "parentId" : "2d85fece-c22d-47e4-9378-c4429ffb7159",
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "That would make sense. I would not use the term \"syntactic sugar\" though but rather something like \"you can think of it as if ...\"",
        "createdAt" : "2020-01-23T16:51:30Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "70e58fd6-9912-407d-b271-4716f6048e17",
        "parentId" : "2d85fece-c22d-47e4-9378-c4429ffb7159",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Addressed by https://github.com/digital-asset/daml/pull/4134/commits/ab6062e4e6c8dce85565d5b573495f1ed95d7e9f\r\n\r\nLet me know if you find the wording suitable.",
        "createdAt" : "2020-01-23T16:57:00Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "11f52f472e3cb698771d149a1e0d4ac0a464f02a",
    "line" : 12,
    "diffHunk" : "@@ -72,10 +72,57 @@ Controllers\n \n   The conjunction of **all** the parties are required to authorize when this choice is exercised.\n \n-.. _daml-ref-anytime:\n+.. _daml-ref-consumability:\n+\n+Consumability\n+=============\n+\n+If no qualifier is present, choices are *consuming*: the contract is archived before the evaluation of the choice body.\n+\n+Note that the contracts created in the choice body are divulged to the signatories and controllers of the contracts as well as to the observers of the contract on which the choice was exercised. This behavior differs from that of *preconsuming* and *postconsuming* choices.\n+\n+Preconsuming choices"
  },
  {
    "id" : "b4251f14-b223-4283-b066-4d409694772d",
    "prId" : 4134,
    "comments" : [
      {
        "id" : "70afa121-08c7-41c9-8678-de509871a1f6",
        "parentId" : null,
        "author" : {
          "login" : "rohanjr",
          "name" : "Rohan Jacob-Rao",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/10836630?u=a30da7f2a9ceeb7c25249d5146f10fce61aeec4e&v=4"
        },
        "body" : "```suggestion\r\nChoice Consumption\r\n```\r\n\"Consumability\" doesn't give the right connotations to me, and not sure it's a real word :D",
        "createdAt" : "2020-01-23T20:26:48Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "rohanjr",
          "name" : "Rohan Jacob-Rao",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/10836630?u=a30da7f2a9ceeb7c25249d5146f10fce61aeec4e&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "d0d00426-1975-491b-af3b-fb1e29ddeb22",
        "parentId" : "70afa121-08c7-41c9-8678-de509871a1f6",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "I'm not sure it's a word either but I copied it from the existing documentation. :slightly_smiling_face: I'm not sure \"choice consumption\" is particularly apt either, maybe it's because I'm not a native speaker but it almost make it sound as if the object of consumption if the choice.\r\n\r\nThe consuming/non-consuming property is called \"exercise kind\" in the ledger model documentation. That doesn't touch on pre-/post- concerns though, so I'm not sure we want to go that way (plus, kind already has an established meaning in programming language parlance).\r\n\r\nWhat about \"contract consumption\"?",
        "createdAt" : "2020-01-24T06:14:45Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "c6cc832a-0f09-4847-b1c5-d40d8565ff85",
        "parentId" : "70afa121-08c7-41c9-8678-de509871a1f6",
        "author" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "body" : "How about \"Contract Consumption of Choices\" (or \"in Choices\")?",
        "createdAt" : "2020-01-24T08:24:57Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "hurryabit",
          "name" : "Martin Huschenbett",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/11665611?u=7dbd00d5e7ea53919ed31dc4200f602ebca91c8f&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "2b1bd6c8-550d-4c94-89ed-edb2ad0f0903",
        "parentId" : "70afa121-08c7-41c9-8678-de509871a1f6",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "\"Consumption annotations\"?",
        "createdAt" : "2020-01-24T13:18:24Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "c16fc6e6-9362-4ef2-907f-666bad5267af",
        "parentId" : "70afa121-08c7-41c9-8678-de509871a1f6",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "I'm saying this because this is the page on choices, I'm not sure how much sense it makes to add \"choices\" to the title of a paragraph. Seems redundant.",
        "createdAt" : "2020-01-24T14:25:24Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "5014cc1c-e2e0-414f-b2e4-38785f5b3ef4",
        "parentId" : "70afa121-08c7-41c9-8678-de509871a1f6",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "I changed to \"contract consumption\" in https://github.com/digital-asset/daml/pull/4134/commits/c9961e31ced894b7cf5f2507998ad2b98bbab41c\r\n\r\nI also changed the mention of \"consumability\" in `structure.rst` in https://github.com/digital-asset/daml/pull/4134/commits/11f52f472e3cb698771d149a1e0d4ac0a464f02a to reflect the new naming.\r\n\r\nHappy to make further changes if you think this wording is still not clear enough.",
        "createdAt" : "2020-01-24T15:18:20Z",
        "updatedAt" : "2020-01-24T15:18:20Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "48c9e286-ba5f-435a-a71b-f9a5d2b3d46e",
        "parentId" : "70afa121-08c7-41c9-8678-de509871a1f6",
        "author" : {
          "login" : "rohanjr",
          "name" : "Rohan Jacob-Rao",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/10836630?u=a30da7f2a9ceeb7c25249d5146f10fce61aeec4e&v=4"
        },
        "body" : "Perfect, thanks!",
        "createdAt" : "2020-01-24T15:56:31Z",
        "updatedAt" : "2020-01-24T15:56:31Z",
        "lastEditedBy" : {
          "login" : "rohanjr",
          "name" : "Rohan Jacob-Rao",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/10836630?u=a30da7f2a9ceeb7c25249d5146f10fce61aeec4e&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "11f52f472e3cb698771d149a1e0d4ac0a464f02a",
    "line" : null,
    "diffHunk" : "@@ -72,10 +72,59 @@ Controllers\n \n   The conjunction of **all** the parties are required to authorize when this choice is exercised.\n \n-.. _daml-ref-anytime:\n+.. _daml-ref-consumability:\n+\n+Consumability"
  },
  {
    "id" : "d0eabe9e-8de0-4d15-9072-4550ef244266",
    "prId" : 4134,
    "comments" : [
      {
        "id" : "8ebcb0f9-d957-4900-8866-372586e8441a",
        "parentId" : null,
        "author" : {
          "login" : "bame-da",
          "name" : "Bernhard Elsner",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/40762178?u=28b5edbfe9271d5db3fcfa3b80d30f93cce4321f&v=4"
        },
        "body" : "It's not only contracts created. Any contract with an action on them (including fetches and exercises) is divulged.",
        "createdAt" : "2020-01-24T08:34:45Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "bame-da",
          "name" : "Bernhard Elsner",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/40762178?u=28b5edbfe9271d5db3fcfa3b80d30f93cce4321f&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "c967a503-b7a9-4127-a0ee-0170b61648ae",
        "parentId" : "8ebcb0f9-d957-4900-8866-372586e8441a",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Solved in https://github.com/digital-asset/daml/pull/4134/commits/11f52f472e3cb698771d149a1e0d4ac0a464f02a",
        "createdAt" : "2020-01-24T15:18:33Z",
        "updatedAt" : "2020-01-24T15:18:34Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "11f52f472e3cb698771d149a1e0d4ac0a464f02a",
    "line" : null,
    "diffHunk" : "@@ -72,10 +72,59 @@ Controllers\n \n   The conjunction of **all** the parties are required to authorize when this choice is exercised.\n \n-.. _daml-ref-anytime:\n+.. _daml-ref-consumability:\n+\n+Consumability\n+=============\n+\n+If no qualifier is present, choices are *consuming*: the contract is archived before the evaluation of the choice body.\n+\n+Note that the contracts created in the choice body are divulged to the signatories and controllers of the contracts as well as to the observers of the contract on which the choice was exercised. This behavior differs from that of *preconsuming* and *postconsuming* choices."
  },
  {
    "id" : "2e60d002-e068-4def-b80b-f1ef1f7746ea",
    "prId" : 4134,
    "comments" : [
      {
        "id" : "6acfa543-60a0-4bcd-96d5-094e6fa90261",
        "parentId" : null,
        "author" : {
          "login" : "bame-da",
          "name" : "Bernhard Elsner",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/40762178?u=28b5edbfe9271d5db3fcfa3b80d30f93cce4321f&v=4"
        },
        "body" : "Same here. ",
        "createdAt" : "2020-01-24T08:34:55Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "bame-da",
          "name" : "Bernhard Elsner",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/40762178?u=28b5edbfe9271d5db3fcfa3b80d30f93cce4321f&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "ac791d37-c716-407b-b42f-02e21efdc8e3",
        "parentId" : "6acfa543-60a0-4bcd-96d5-094e6fa90261",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Solved in https://github.com/digital-asset/daml/pull/4134/commits/11f52f472e3cb698771d149a1e0d4ac0a464f02a",
        "createdAt" : "2020-01-24T15:18:41Z",
        "updatedAt" : "2020-01-24T15:18:41Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "11f52f472e3cb698771d149a1e0d4ac0a464f02a",
    "line" : null,
    "diffHunk" : "@@ -72,10 +72,59 @@ Controllers\n \n   The conjunction of **all** the parties are required to authorize when this choice is exercised.\n \n-.. _daml-ref-anytime:\n+.. _daml-ref-consumability:\n+\n+Consumability\n+=============\n+\n+If no qualifier is present, choices are *consuming*: the contract is archived before the evaluation of the choice body.\n+\n+Note that the contracts created in the choice body are divulged to the signatories and controllers of the contracts as well as to the observers of the contract on which the choice was exercised. This behavior differs from that of *preconsuming* and *postconsuming* choices.\n+\n+Preconsuming choices\n+********************\n+\n+.. literalinclude:: ../code-snippets/Reference.daml\n+   :language: daml\n+   :start-after: -- start choice-first preconsuming snippet\n+   :end-before: -- end choice-first preconsuming snippet\n+   :caption: Option 1 for specifying choices: choice name first\n+\n+.. literalinclude:: ../code-snippets/Reference.daml\n+   :language: daml\n+   :start-after: -- start controller-first preconsuming snippet\n+   :end-before: -- end controller-first preconsuming snippet\n+   :caption: Option 2 for specifying choices: controller first\n+\n+- ``preconsuming`` keyword. Optional.\n+- Makes a choice pre-consuming: the contract is archived before the body of the exercise is executed.\n+- The archival behavior is analogous to the *consuming* default behavior.\n+- Unlike what happens the in *consuming* default behavior, though, contracts created in the choice body are divulged only to their respective signatories and controllers and not to the observers of the contract on which the choice was exercised."
  },
  {
    "id" : "5b1a3235-dd08-4a0b-a3bb-9c14c97e4003",
    "prId" : 4134,
    "comments" : [
      {
        "id" : "2f593425-aeba-421f-90a4-a4867142c3b8",
        "parentId" : null,
        "author" : {
          "login" : "bame-da",
          "name" : "Bernhard Elsner",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/40762178?u=28b5edbfe9271d5db3fcfa3b80d30f93cce4321f&v=4"
        },
        "body" : "And here",
        "createdAt" : "2020-01-24T08:35:06Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "bame-da",
          "name" : "Bernhard Elsner",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/40762178?u=28b5edbfe9271d5db3fcfa3b80d30f93cce4321f&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "c53d088f-85ce-4d37-a7ff-d1efb617f534",
        "parentId" : "2f593425-aeba-421f-90a4-a4867142c3b8",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Solved in https://github.com/digital-asset/daml/pull/4134/commits/11f52f472e3cb698771d149a1e0d4ac0a464f02a",
        "createdAt" : "2020-01-24T15:19:24Z",
        "updatedAt" : "2020-01-24T15:19:24Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "11f52f472e3cb698771d149a1e0d4ac0a464f02a",
    "line" : null,
    "diffHunk" : "@@ -72,10 +72,59 @@ Controllers\n \n   The conjunction of **all** the parties are required to authorize when this choice is exercised.\n \n-.. _daml-ref-anytime:\n+.. _daml-ref-consumability:\n+\n+Consumability\n+=============\n+\n+If no qualifier is present, choices are *consuming*: the contract is archived before the evaluation of the choice body.\n+\n+Note that the contracts created in the choice body are divulged to the signatories and controllers of the contracts as well as to the observers of the contract on which the choice was exercised. This behavior differs from that of *preconsuming* and *postconsuming* choices.\n+\n+Preconsuming choices\n+********************\n+\n+.. literalinclude:: ../code-snippets/Reference.daml\n+   :language: daml\n+   :start-after: -- start choice-first preconsuming snippet\n+   :end-before: -- end choice-first preconsuming snippet\n+   :caption: Option 1 for specifying choices: choice name first\n+\n+.. literalinclude:: ../code-snippets/Reference.daml\n+   :language: daml\n+   :start-after: -- start controller-first preconsuming snippet\n+   :end-before: -- end controller-first preconsuming snippet\n+   :caption: Option 2 for specifying choices: controller first\n+\n+- ``preconsuming`` keyword. Optional.\n+- Makes a choice pre-consuming: the contract is archived before the body of the exercise is executed.\n+- The archival behavior is analogous to the *consuming* default behavior.\n+- Unlike what happens the in *consuming* default behavior, though, contracts created in the choice body are divulged only to their respective signatories and controllers and not to the observers of the contract on which the choice was exercised.\n+- Can be thought as a non-consuming choice that implicitly archives the contract before anything else happens\n+\n+Postconsuming choices\n+*********************\n+\n+.. literalinclude:: ../code-snippets/Reference.daml\n+   :language: daml\n+   :start-after: -- start choice-first postconsuming snippet\n+   :end-before: -- end choice-first postconsuming snippet\n+   :caption: Option 1 for specifying choices: choice name first\n+\n+.. literalinclude:: ../code-snippets/Reference.daml\n+   :language: daml\n+   :start-after: -- start controller-first postconsuming snippet\n+   :end-before: -- end controller-first postconsuming snippet\n+   :caption: Option 2 for specifying choices: controller first\n+\n+- ``postconsuming`` keyword. Optional.\n+- Makes a choice post-consuming: the contract is archived after the body of the exercise is executed.\n+- The contract can still be used in the body of the exercise.\n+- Contracts created in the choice body are divulged only to their respective signatories and controllers and not to the observers of the contract on which the choice was exercised."
  },
  {
    "id" : "cadc988f-83ef-4795-a43d-0916a7496b78",
    "prId" : 4134,
    "comments" : [
      {
        "id" : "00b52489-6b4d-417e-993a-f0051dbd0346",
        "parentId" : null,
        "author" : {
          "login" : "bame-da",
          "name" : "Bernhard Elsner",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/40762178?u=28b5edbfe9271d5db3fcfa3b80d30f93cce4321f&v=4"
        },
        "body" : "And here",
        "createdAt" : "2020-01-24T08:35:17Z",
        "updatedAt" : "2020-01-24T15:16:01Z",
        "lastEditedBy" : {
          "login" : "bame-da",
          "name" : "Bernhard Elsner",
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/40762178?u=28b5edbfe9271d5db3fcfa3b80d30f93cce4321f&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "4edbdcf5-9399-4fa9-96aa-896ef8de3bb4",
        "parentId" : "00b52489-6b4d-417e-993a-f0051dbd0346",
        "author" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "body" : "Solved in https://github.com/digital-asset/daml/pull/4134/commits/11f52f472e3cb698771d149a1e0d4ac0a464f02a",
        "createdAt" : "2020-01-24T15:19:15Z",
        "updatedAt" : "2020-01-24T15:19:15Z",
        "lastEditedBy" : {
          "login" : "stefanobaghino-da",
          "name" : "Stefano Baghino",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/43749967?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "11f52f472e3cb698771d149a1e0d4ac0a464f02a",
    "line" : null,
    "diffHunk" : "@@ -91,9 +140,8 @@ Non-consuming choices\n \n - ``nonconsuming`` keyword. Optional.\n - Makes a choice non-consuming: that is, exercising the choice does not archive the contract.\n-\n-  By default, choices are *consuming*: when a choice on a contract is exercised, that contract instance is *archived*. Archived means that it's permanently marked as being inactive, and no more choices can be exercised on it, though it still exists on the ledger.\n-- This is useful in the many situations when you want to be able to exercise a choice more than once.\n+- Contracts created in the choice body are known only to the signatories and controllers of the contracts and not made known to the observers of the contract on which the choice was exercised."
  }
]