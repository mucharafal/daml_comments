[
  {
    "id" : "09927aca-d12d-40b7-a420-4286655272c6",
    "prId" : 2532,
    "comments" : [
      {
        "id" : "b222657c-8164-4862-b476-97a3186fdedd",
        "parentId" : null,
        "author" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "body" : "add headings of the two topologies to give a preview and easy link targets",
        "createdAt" : "2019-08-16T14:36:40Z",
        "updatedAt" : "2019-08-19T16:16:24Z",
        "lastEditedBy" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "4eb2b5576ac4e4d575bb69337a36b944a8aaef8a",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,179 @@\n+.. Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+.. SPDX-License-Identifier: Apache-2.0\n+\n+.. _daml-ledger-topologies:\n+\n+DAML Ledger Topologies\n+######################\n+\n+The Ledger API provides parties with an abstraction of a virtual shared ledger, visualized as follows.\n+\n+.. image:: ./ledger-model/images/da-ledger-model.svg\n+   :width: 80%\n+   :align: center\n+\n+The real-world topologies of actual ledger implementations differ significantly, however.\n+The topologies can impact both the functional and non-functional properties of the resulting ledger.\n+This document:\n+\n+1. Provides one useful categorization of the existing implementations' topologies."
  },
  {
    "id" : "0d0b1b5a-fa76-42ba-ae60-a09c64892daf",
    "prId" : 2532,
    "comments" : [
      {
        "id" : "15a6f33d-f8e6-4aea-8cab-c9bc88b89ba4",
        "parentId" : null,
        "author" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "body" : "Suggest to drop this line. Covered by `one useful` above.",
        "createdAt" : "2019-08-16T14:36:59Z",
        "updatedAt" : "2019-08-19T16:16:24Z",
        "lastEditedBy" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "4eb2b5576ac4e4d575bb69337a36b944a8aaef8a",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,179 @@\n+.. Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+.. SPDX-License-Identifier: Apache-2.0\n+\n+.. _daml-ledger-topologies:\n+\n+DAML Ledger Topologies\n+######################\n+\n+The Ledger API provides parties with an abstraction of a virtual shared ledger, visualized as follows.\n+\n+.. image:: ./ledger-model/images/da-ledger-model.svg\n+   :width: 80%\n+   :align: center\n+\n+The real-world topologies of actual ledger implementations differ significantly, however.\n+The topologies can impact both the functional and non-functional properties of the resulting ledger.\n+This document:\n+\n+1. Provides one useful categorization of the existing implementations' topologies.\n+   The categorization is not the only one possible, and it is not always clear-cut."
  },
  {
    "id" : "c6a25aa6-725d-4f8f-aa61-555646cfaac6",
    "prId" : 2532,
    "comments" : [
      {
        "id" : "eaf88882-86ca-478f-a139-e18fcccb19d7",
        "parentId" : null,
        "author" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "body" : "Drop as well. Not clear how it helps reader.",
        "createdAt" : "2019-08-16T14:37:18Z",
        "updatedAt" : "2019-08-19T16:16:24Z",
        "lastEditedBy" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "4eb2b5576ac4e4d575bb69337a36b944a8aaef8a",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,179 @@\n+.. Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+.. SPDX-License-Identifier: Apache-2.0\n+\n+.. _daml-ledger-topologies:\n+\n+DAML Ledger Topologies\n+######################\n+\n+The Ledger API provides parties with an abstraction of a virtual shared ledger, visualized as follows.\n+\n+.. image:: ./ledger-model/images/da-ledger-model.svg\n+   :width: 80%\n+   :align: center\n+\n+The real-world topologies of actual ledger implementations differ significantly, however.\n+The topologies can impact both the functional and non-functional properties of the resulting ledger.\n+This document:\n+\n+1. Provides one useful categorization of the existing implementations' topologies.\n+   The categorization is not the only one possible, and it is not always clear-cut.\n+   Its main aim is to group the implementations according to their high-level properties."
  },
  {
    "id" : "24e9f25d-5475-4b27-a6e7-e400d2d5b23b",
    "prId" : 2532,
    "comments" : [
      {
        "id" : "f402456e-2428-42f1-97e8-ef2e1f6ce03a",
        "parentId" : null,
        "author" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "body" : "Having written the above comments: consider replacing the two items with a short summary of the two categories, and add a forward link to Package and Party Management where they are helpful to know.",
        "createdAt" : "2019-08-16T14:38:29Z",
        "updatedAt" : "2019-08-19T16:16:24Z",
        "lastEditedBy" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "4eb2b5576ac4e4d575bb69337a36b944a8aaef8a",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,179 @@\n+.. Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+.. SPDX-License-Identifier: Apache-2.0\n+\n+.. _daml-ledger-topologies:\n+\n+DAML Ledger Topologies\n+######################\n+\n+The Ledger API provides parties with an abstraction of a virtual shared ledger, visualized as follows.\n+\n+.. image:: ./ledger-model/images/da-ledger-model.svg\n+   :width: 80%\n+   :align: center\n+\n+The real-world topologies of actual ledger implementations differ significantly, however.\n+The topologies can impact both the functional and non-functional properties of the resulting ledger.\n+This document:\n+\n+1. Provides one useful categorization of the existing implementations' topologies.\n+   The categorization is not the only one possible, and it is not always clear-cut.\n+   Its main aim is to group the implementations according to their high-level properties.\n+\n+2. Describes the general ledger properties of each category."
  },
  {
    "id" : "e3908e0a-cee7-41df-a826-3974f6fff570",
    "prId" : 2532,
    "comments" : [
      {
        "id" : "432592ec-6275-44b1-bf38-af53abeb7661",
        "parentId" : null,
        "author" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "body" : "Add definition to Glossary of Background concepts, and reference from here; or perhaps better intro of topologies page.",
        "createdAt" : "2019-08-16T14:39:40Z",
        "updatedAt" : "2019-08-19T16:16:24Z",
        "lastEditedBy" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "4eb2b5576ac4e4d575bb69337a36b944a8aaef8a",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,179 @@\n+.. Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+.. SPDX-License-Identifier: Apache-2.0\n+\n+.. _daml-ledger-topologies:\n+\n+DAML Ledger Topologies\n+######################\n+\n+The Ledger API provides parties with an abstraction of a virtual shared ledger, visualized as follows.\n+\n+.. image:: ./ledger-model/images/da-ledger-model.svg\n+   :width: 80%\n+   :align: center\n+\n+The real-world topologies of actual ledger implementations differ significantly, however.\n+The topologies can impact both the functional and non-functional properties of the resulting ledger.\n+This document:\n+\n+1. Provides one useful categorization of the existing implementations' topologies.\n+   The categorization is not the only one possible, and it is not always clear-cut.\n+   Its main aim is to group the implementations according to their high-level properties.\n+\n+2. Describes the general ledger properties of each category.\n+\n+\n+.. _global-state-topologies:\n+\n+Global State Topologies\n+***********************\n+\n+.. _trust-domain:\n+\n+We call a system operated by a single real-world entity a **trust domain**."
  },
  {
    "id" : "1c9bb6c2-7dbd-4d67-ac4b-67fe8beba8c7",
    "prId" : 2532,
    "comments" : [
      {
        "id" : "987918ce-4e91-47eb-949c-2322a55052e3",
        "parentId" : null,
        "author" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "body" : "these two properties are \"not not true\" ;-) all the Google Apps are examples of highly available and scalable services operated in a single trust domain.\r\n\r\n==> remove these two bullet points",
        "createdAt" : "2019-08-16T14:41:40Z",
        "updatedAt" : "2019-08-19T16:16:24Z",
        "lastEditedBy" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "4eb2b5576ac4e4d575bb69337a36b944a8aaef8a",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,179 @@\n+.. Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+.. SPDX-License-Identifier: Apache-2.0\n+\n+.. _daml-ledger-topologies:\n+\n+DAML Ledger Topologies\n+######################\n+\n+The Ledger API provides parties with an abstraction of a virtual shared ledger, visualized as follows.\n+\n+.. image:: ./ledger-model/images/da-ledger-model.svg\n+   :width: 80%\n+   :align: center\n+\n+The real-world topologies of actual ledger implementations differ significantly, however.\n+The topologies can impact both the functional and non-functional properties of the resulting ledger.\n+This document:\n+\n+1. Provides one useful categorization of the existing implementations' topologies.\n+   The categorization is not the only one possible, and it is not always clear-cut.\n+   Its main aim is to group the implementations according to their high-level properties.\n+\n+2. Describes the general ledger properties of each category.\n+\n+\n+.. _global-state-topologies:\n+\n+Global State Topologies\n+***********************\n+\n+.. _trust-domain:\n+\n+We call a system operated by a single real-world entity a **trust domain**.\n+In global state topologies, there exists at least one trust domain (and possibly more) whose systems contain a physical copy of the entire virtual shared ledger that is accessible through the API.\n+\n+.. _fully-centralized-ledger:\n+\n+The Fully Centralized Ledger\n+============================\n+\n+The simplest global state topology is the one where the virtual shared ledger is implemented through a single machine containing a physical copy of the shared ledger.\n+\n+.. image:: ./images/ledger-topologies/physical-shared-ledger.svg\n+   :width: 80%\n+   :align: center\n+\n+The :ref:`DAML Sandbox <sandbox-manual>` uses this topology.\n+While simple, this topology has certain downsides:\n+\n+- it provides no scaling\n+\n+- it is not highly available"
  },
  {
    "id" : "268b0a66-6c0b-412c-9b25-70dfa519a483",
    "prId" : 2532,
    "comments" : [
      {
        "id" : "701ea1be-5f6c-44fb-b452-6e33b6b20b89",
        "parentId" : null,
        "author" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "body" : "`real-world entity` vs. `single physical copy` vs. `trust domain`. Consider defining `operating entity` as the entity operating `trust domain` use that in the definition of `Fully Centralized Ledger` topology",
        "createdAt" : "2019-08-16T14:43:45Z",
        "updatedAt" : "2019-08-19T16:16:24Z",
        "lastEditedBy" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "4eb2b5576ac4e4d575bb69337a36b944a8aaef8a",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,179 @@\n+.. Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+.. SPDX-License-Identifier: Apache-2.0\n+\n+.. _daml-ledger-topologies:\n+\n+DAML Ledger Topologies\n+######################\n+\n+The Ledger API provides parties with an abstraction of a virtual shared ledger, visualized as follows.\n+\n+.. image:: ./ledger-model/images/da-ledger-model.svg\n+   :width: 80%\n+   :align: center\n+\n+The real-world topologies of actual ledger implementations differ significantly, however.\n+The topologies can impact both the functional and non-functional properties of the resulting ledger.\n+This document:\n+\n+1. Provides one useful categorization of the existing implementations' topologies.\n+   The categorization is not the only one possible, and it is not always clear-cut.\n+   Its main aim is to group the implementations according to their high-level properties.\n+\n+2. Describes the general ledger properties of each category.\n+\n+\n+.. _global-state-topologies:\n+\n+Global State Topologies\n+***********************\n+\n+.. _trust-domain:\n+\n+We call a system operated by a single real-world entity a **trust domain**.\n+In global state topologies, there exists at least one trust domain (and possibly more) whose systems contain a physical copy of the entire virtual shared ledger that is accessible through the API.\n+\n+.. _fully-centralized-ledger:\n+\n+The Fully Centralized Ledger\n+============================\n+\n+The simplest global state topology is the one where the virtual shared ledger is implemented through a single machine containing a physical copy of the shared ledger.\n+\n+.. image:: ./images/ledger-topologies/physical-shared-ledger.svg\n+   :width: 80%\n+   :align: center\n+\n+The :ref:`DAML Sandbox <sandbox-manual>` uses this topology.\n+While simple, this topology has certain downsides:\n+\n+- it provides no scaling\n+\n+- it is not highly available\n+\n+- the real-world entity operating the physical shared ledger is fully trusted with preserving the ledger's integrity\n+\n+- the real-world entity operating the physical shared ledger has full insight into the entire ledger, and is thus fully trusted with privacy"
  },
  {
    "id" : "ebe0cff4-2d98-4c6e-962e-a43de57aa36f",
    "prId" : 2532,
    "comments" : [
      {
        "id" : "9947dc63-2140-4c8d-bdf4-0fd98997c445",
        "parentId" : null,
        "author" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "body" : "suggestion: use ordered lists to make it easy to reference items in discussions",
        "createdAt" : "2019-08-16T14:46:06Z",
        "updatedAt" : "2019-08-19T16:16:24Z",
        "lastEditedBy" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "4eb2b5576ac4e4d575bb69337a36b944a8aaef8a",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,179 @@\n+.. Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+.. SPDX-License-Identifier: Apache-2.0\n+\n+.. _daml-ledger-topologies:\n+\n+DAML Ledger Topologies\n+######################\n+\n+The Ledger API provides parties with an abstraction of a virtual shared ledger, visualized as follows.\n+\n+.. image:: ./ledger-model/images/da-ledger-model.svg\n+   :width: 80%\n+   :align: center\n+\n+The real-world topologies of actual ledger implementations differ significantly, however.\n+The topologies can impact both the functional and non-functional properties of the resulting ledger.\n+This document:\n+\n+1. Provides one useful categorization of the existing implementations' topologies.\n+   The categorization is not the only one possible, and it is not always clear-cut.\n+   Its main aim is to group the implementations according to their high-level properties.\n+\n+2. Describes the general ledger properties of each category.\n+\n+\n+.. _global-state-topologies:\n+\n+Global State Topologies\n+***********************\n+\n+.. _trust-domain:\n+\n+We call a system operated by a single real-world entity a **trust domain**.\n+In global state topologies, there exists at least one trust domain (and possibly more) whose systems contain a physical copy of the entire virtual shared ledger that is accessible through the API.\n+\n+.. _fully-centralized-ledger:\n+\n+The Fully Centralized Ledger\n+============================\n+\n+The simplest global state topology is the one where the virtual shared ledger is implemented through a single machine containing a physical copy of the shared ledger.\n+\n+.. image:: ./images/ledger-topologies/physical-shared-ledger.svg\n+   :width: 80%\n+   :align: center\n+\n+The :ref:`DAML Sandbox <sandbox-manual>` uses this topology.\n+While simple, this topology has certain downsides:\n+\n+- it provides no scaling"
  },
  {
    "id" : "7c344142-53f7-4cfc-8923-689ef983716e",
    "prId" : 2532,
    "comments" : [
      {
        "id" : "fa8118ac-24c7-4244-afb0-32118aa30edc",
        "parentId" : null,
        "author" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "body" : "consider using ordered list for ease of reference",
        "createdAt" : "2019-08-16T14:46:20Z",
        "updatedAt" : "2019-08-19T16:16:24Z",
        "lastEditedBy" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "4eb2b5576ac4e4d575bb69337a36b944a8aaef8a",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,179 @@\n+.. Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+.. SPDX-License-Identifier: Apache-2.0\n+\n+.. _daml-ledger-topologies:\n+\n+DAML Ledger Topologies\n+######################\n+\n+The Ledger API provides parties with an abstraction of a virtual shared ledger, visualized as follows.\n+\n+.. image:: ./ledger-model/images/da-ledger-model.svg\n+   :width: 80%\n+   :align: center\n+\n+The real-world topologies of actual ledger implementations differ significantly, however.\n+The topologies can impact both the functional and non-functional properties of the resulting ledger.\n+This document:\n+\n+1. Provides one useful categorization of the existing implementations' topologies.\n+   The categorization is not the only one possible, and it is not always clear-cut.\n+   Its main aim is to group the implementations according to their high-level properties.\n+\n+2. Describes the general ledger properties of each category.\n+\n+\n+.. _global-state-topologies:\n+\n+Global State Topologies\n+***********************\n+\n+.. _trust-domain:\n+\n+We call a system operated by a single real-world entity a **trust domain**.\n+In global state topologies, there exists at least one trust domain (and possibly more) whose systems contain a physical copy of the entire virtual shared ledger that is accessible through the API.\n+\n+.. _fully-centralized-ledger:\n+\n+The Fully Centralized Ledger\n+============================\n+\n+The simplest global state topology is the one where the virtual shared ledger is implemented through a single machine containing a physical copy of the shared ledger.\n+\n+.. image:: ./images/ledger-topologies/physical-shared-ledger.svg\n+   :width: 80%\n+   :align: center\n+\n+The :ref:`DAML Sandbox <sandbox-manual>` uses this topology.\n+While simple, this topology has certain downsides:\n+\n+- it provides no scaling\n+\n+- it is not highly available\n+\n+- the real-world entity operating the physical shared ledger is fully trusted with preserving the ledger's integrity\n+\n+- the real-world entity operating the physical shared ledger has full insight into the entire ledger, and is thus fully trusted with privacy\n+\n+- it provides no built-in way to interoperate (transactionally share data) across several deployed ledgers; each deployment defines its own segregated virtual shared ledger.\n+\n+The first four problems can be solved or mitigated as follows:\n+\n+- scaling by splitting the system up into separate functional components and parallelizing execution"
  },
  {
    "id" : "1c2c180d-b75a-4603-afb2-35abbd1f37a6",
    "prId" : 2532,
    "comments" : [
      {
        "id" : "a3a47a40-df69-4dea-9b2a-7af7604fd44e",
        "parentId" : null,
        "author" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "body" : "s/ledger API/Ledger API",
        "createdAt" : "2019-08-16T15:31:32Z",
        "updatedAt" : "2019-08-19T16:16:24Z",
        "lastEditedBy" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "4eb2b5576ac4e4d575bb69337a36b944a8aaef8a",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,179 @@\n+.. Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+.. SPDX-License-Identifier: Apache-2.0\n+\n+.. _daml-ledger-topologies:\n+\n+DAML Ledger Topologies\n+######################\n+\n+The Ledger API provides parties with an abstraction of a virtual shared ledger, visualized as follows.\n+\n+.. image:: ./ledger-model/images/da-ledger-model.svg\n+   :width: 80%\n+   :align: center\n+\n+The real-world topologies of actual ledger implementations differ significantly, however.\n+The topologies can impact both the functional and non-functional properties of the resulting ledger.\n+This document:\n+\n+1. Provides one useful categorization of the existing implementations' topologies.\n+   The categorization is not the only one possible, and it is not always clear-cut.\n+   Its main aim is to group the implementations according to their high-level properties.\n+\n+2. Describes the general ledger properties of each category.\n+\n+\n+.. _global-state-topologies:\n+\n+Global State Topologies\n+***********************\n+\n+.. _trust-domain:\n+\n+We call a system operated by a single real-world entity a **trust domain**.\n+In global state topologies, there exists at least one trust domain (and possibly more) whose systems contain a physical copy of the entire virtual shared ledger that is accessible through the API.\n+\n+.. _fully-centralized-ledger:\n+\n+The Fully Centralized Ledger\n+============================\n+\n+The simplest global state topology is the one where the virtual shared ledger is implemented through a single machine containing a physical copy of the shared ledger.\n+\n+.. image:: ./images/ledger-topologies/physical-shared-ledger.svg\n+   :width: 80%\n+   :align: center\n+\n+The :ref:`DAML Sandbox <sandbox-manual>` uses this topology.\n+While simple, this topology has certain downsides:\n+\n+- it provides no scaling\n+\n+- it is not highly available\n+\n+- the real-world entity operating the physical shared ledger is fully trusted with preserving the ledger's integrity\n+\n+- the real-world entity operating the physical shared ledger has full insight into the entire ledger, and is thus fully trusted with privacy\n+\n+- it provides no built-in way to interoperate (transactionally share data) across several deployed ledgers; each deployment defines its own segregated virtual shared ledger.\n+\n+The first four problems can be solved or mitigated as follows:\n+\n+- scaling by splitting the system up into separate functional components and parallelizing execution\n+\n+- availability by replication\n+\n+- trust for integrity by introducing multiple trust domains and distributing trust using Byzantine fault tolerant replication, or by maintaining one trust domain but using hardware-based Trusted Execution Environments (TEEs) or other cryptographic means to enforce or audit ledger integrity without having to trust the operating entity.\n+\n+- trust for privacy through TEEs that restrict data access by hardware means.\n+\n+The remainder of the section discuses these solutions and their implementations in the different DAML Ledgers.\n+The last problem, interoperability, is inherent when the two deployments are operated by different trust domains: by definition, a topology in which no single trust domain would hold the entire ledger is not a global state topology.\n+\n+.. _scaling-daml-ledgers:\n+\n+Scaling\n+=======\n+\n+The main functionalities of a system providing the Ledger API are:\n+\n+1. serving the API itself (handling the gRPC connections, authenticating users, etc),\n+\n+#. allowing the API users to access their :ref:`ledger projection <da-model-projections>` (reading the ledger), and\n+\n+#. allowing the API users to issue commands and thus attempt to append commits to the shared ledger (writing to the ledger).\n+\n+The implementation thus naturally splits up into components for serving the API, reading from the ledger, and writing to the ledger.\n+Serving the API and reading can be scaled out horizontally.\n+Reading can be scaled out by building caches of the ledger contents; as the projections are streams, no synchronization between the different caches is necessary.\n+\n+To ensure ledger integrity, the writing component must preserve the ledger's :ref:`validity conditions <da-model-validity>`.\n+Writing can thus be further split up into three sub-components, one for each of the three validity conditions:\n+\n+1. :ref:`model conformance <da-model-conformance>` checks (i.e., DAML intepretation),\n+#. :ref:`authorization <da-model-authorization>` checks, and\n+#. :ref:`consistency <da-model-consistency>` checks.\n+\n+Of these three, conformance and authorization checks can be checked in isolation for each commit.\n+Thus, such checks can be parallelized and scaled out.\n+The consistency check cannot be done in isolation and requires synchronization.\n+However, to improve scaling, it can internally still use some form of sharding, together with a commit protocol.\n+\n+For example, the next versions of DAML on `Amazon Aurora <https://aws.amazon.com/rds/aurora/>`__ and on `Hyperledger Fabric <https://www.hyperledger.org/projects/fabric>`__ will use such partitioned topologies.\n+The next image shows an extreme version of this partitioning, where each party is served by a separate system node running all the parallelizable functions.\n+The writing subsystem is split into two stages.\n+The first stage checks conformance and authorization, and can be arbitrarily replicated, while the second stage is centralized and checks consistency.\n+\n+.. image:: ./images/ledger-topologies/full-partitioning.svg\n+   :align: center\n+\n+.. _daml-ledger-replication:\n+\n+Replication: Availability and Distributing Trust\n+================================================\n+\n+Availability is improved by replication.\n+The scaling methodology described in the previous section already improves the ledger's availability properties, as it introduces replication for most functions.\n+For example, if a node serving a client with the API fails, clients can fail over to other such nodes.\n+Replicating the writer's consistency-checking subsystem must use a consensus algorithm to ensure consistency of the replicated system (in particular, the `linearizability <https://aphyr.com/posts/333-serializability-linearizability-and-locality>`__ of the virtual shared ledger).\n+\n+Replication can also help to lower, or more precisely distribute the trust required to ensure the system's integrity.\n+Trust can be distributed by introducing multiple organizations, i.e., multiple trust domains into the system.\n+In these situations, the system typically consists of two types of nodes:\n+\n+1. Writer nodes, which replicate the physical shared ledger and can extend it with new commits.\n+   Writer nodes are thus also referred to as **committer nodes**.\n+\n+.. _participant-node-def:\n+\n+2. **Participant nodes**, (also called Client nodes in some platforms) which serve the ledger API to a subset of the system parties, which we say are hosted by this participant."
  },
  {
    "id" : "9dc8d461-3ff7-40ac-9c26-90cbca8a6e30",
    "prId" : 2532,
    "comments" : [
      {
        "id" : "79041d9f-a757-4b6b-a0ef-cce7b818ce86",
        "parentId" : null,
        "author" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "body" : "Completed review of topology section: very nice decomposition of topologies @oggy- ! This is going to be a good basis for providing a \"Which DAML ledger should I use?\" section!",
        "createdAt" : "2019-08-16T15:37:10Z",
        "updatedAt" : "2019-08-19T16:16:24Z",
        "lastEditedBy" : {
          "login" : "meiersi-da",
          "name" : "Simon Meier",
          "avatarUrl" : "https://avatars2.githubusercontent.com/u/13766136?u=a00dd223b1cde8578fe208ebbb7cccd4db41eb9a&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "4eb2b5576ac4e4d575bb69337a36b944a8aaef8a",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,179 @@\n+.. Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+.. SPDX-License-Identifier: Apache-2.0\n+\n+.. _daml-ledger-topologies:\n+\n+DAML Ledger Topologies\n+######################\n+\n+The Ledger API provides parties with an abstraction of a virtual shared ledger, visualized as follows.\n+\n+.. image:: ./ledger-model/images/da-ledger-model.svg\n+   :width: 80%\n+   :align: center\n+\n+The real-world topologies of actual ledger implementations differ significantly, however.\n+The topologies can impact both the functional and non-functional properties of the resulting ledger.\n+This document:\n+\n+1. Provides one useful categorization of the existing implementations' topologies.\n+   The categorization is not the only one possible, and it is not always clear-cut.\n+   Its main aim is to group the implementations according to their high-level properties.\n+\n+2. Describes the general ledger properties of each category.\n+\n+\n+.. _global-state-topologies:\n+\n+Global State Topologies\n+***********************\n+\n+.. _trust-domain:\n+\n+We call a system operated by a single real-world entity a **trust domain**.\n+In global state topologies, there exists at least one trust domain (and possibly more) whose systems contain a physical copy of the entire virtual shared ledger that is accessible through the API.\n+\n+.. _fully-centralized-ledger:\n+\n+The Fully Centralized Ledger\n+============================\n+\n+The simplest global state topology is the one where the virtual shared ledger is implemented through a single machine containing a physical copy of the shared ledger.\n+\n+.. image:: ./images/ledger-topologies/physical-shared-ledger.svg\n+   :width: 80%\n+   :align: center\n+\n+The :ref:`DAML Sandbox <sandbox-manual>` uses this topology.\n+While simple, this topology has certain downsides:\n+\n+- it provides no scaling\n+\n+- it is not highly available\n+\n+- the real-world entity operating the physical shared ledger is fully trusted with preserving the ledger's integrity\n+\n+- the real-world entity operating the physical shared ledger has full insight into the entire ledger, and is thus fully trusted with privacy\n+\n+- it provides no built-in way to interoperate (transactionally share data) across several deployed ledgers; each deployment defines its own segregated virtual shared ledger.\n+\n+The first four problems can be solved or mitigated as follows:\n+\n+- scaling by splitting the system up into separate functional components and parallelizing execution\n+\n+- availability by replication\n+\n+- trust for integrity by introducing multiple trust domains and distributing trust using Byzantine fault tolerant replication, or by maintaining one trust domain but using hardware-based Trusted Execution Environments (TEEs) or other cryptographic means to enforce or audit ledger integrity without having to trust the operating entity.\n+\n+- trust for privacy through TEEs that restrict data access by hardware means.\n+\n+The remainder of the section discuses these solutions and their implementations in the different DAML Ledgers.\n+The last problem, interoperability, is inherent when the two deployments are operated by different trust domains: by definition, a topology in which no single trust domain would hold the entire ledger is not a global state topology.\n+\n+.. _scaling-daml-ledgers:\n+\n+Scaling\n+=======\n+\n+The main functionalities of a system providing the Ledger API are:\n+\n+1. serving the API itself (handling the gRPC connections, authenticating users, etc),\n+\n+#. allowing the API users to access their :ref:`ledger projection <da-model-projections>` (reading the ledger), and\n+\n+#. allowing the API users to issue commands and thus attempt to append commits to the shared ledger (writing to the ledger).\n+\n+The implementation thus naturally splits up into components for serving the API, reading from the ledger, and writing to the ledger.\n+Serving the API and reading can be scaled out horizontally.\n+Reading can be scaled out by building caches of the ledger contents; as the projections are streams, no synchronization between the different caches is necessary.\n+\n+To ensure ledger integrity, the writing component must preserve the ledger's :ref:`validity conditions <da-model-validity>`.\n+Writing can thus be further split up into three sub-components, one for each of the three validity conditions:\n+\n+1. :ref:`model conformance <da-model-conformance>` checks (i.e., DAML intepretation),\n+#. :ref:`authorization <da-model-authorization>` checks, and\n+#. :ref:`consistency <da-model-consistency>` checks.\n+\n+Of these three, conformance and authorization checks can be checked in isolation for each commit.\n+Thus, such checks can be parallelized and scaled out.\n+The consistency check cannot be done in isolation and requires synchronization.\n+However, to improve scaling, it can internally still use some form of sharding, together with a commit protocol.\n+\n+For example, the next versions of DAML on `Amazon Aurora <https://aws.amazon.com/rds/aurora/>`__ and on `Hyperledger Fabric <https://www.hyperledger.org/projects/fabric>`__ will use such partitioned topologies.\n+The next image shows an extreme version of this partitioning, where each party is served by a separate system node running all the parallelizable functions.\n+The writing subsystem is split into two stages.\n+The first stage checks conformance and authorization, and can be arbitrarily replicated, while the second stage is centralized and checks consistency.\n+\n+.. image:: ./images/ledger-topologies/full-partitioning.svg\n+   :align: center\n+\n+.. _daml-ledger-replication:\n+\n+Replication: Availability and Distributing Trust\n+================================================\n+\n+Availability is improved by replication.\n+The scaling methodology described in the previous section already improves the ledger's availability properties, as it introduces replication for most functions.\n+For example, if a node serving a client with the API fails, clients can fail over to other such nodes.\n+Replicating the writer's consistency-checking subsystem must use a consensus algorithm to ensure consistency of the replicated system (in particular, the `linearizability <https://aphyr.com/posts/333-serializability-linearizability-and-locality>`__ of the virtual shared ledger).\n+\n+Replication can also help to lower, or more precisely distribute the trust required to ensure the system's integrity.\n+Trust can be distributed by introducing multiple organizations, i.e., multiple trust domains into the system.\n+In these situations, the system typically consists of two types of nodes:\n+\n+1. Writer nodes, which replicate the physical shared ledger and can extend it with new commits.\n+   Writer nodes are thus also referred to as **committer nodes**.\n+\n+.. _participant-node-def:\n+\n+2. **Participant nodes**, (also called Client nodes in some platforms) which serve the ledger API to a subset of the system parties, which we say are hosted by this participant.\n+   A participant node proposes new commits on behalf of the parties it hosts, and holds a portion of the ledger that is relevant for those parties (i.e., the parties' :ref:`ledger projection <da-model-projections>`).\n+   The term \"participant node\" is sometimes also used more generally, for any physical node serving the Ledger API to a party.\n+\n+The participant nodes need not be trusted by the other nodes, or by the committer(s); the participants can be operated by mutually distrusting entities, i.e., belong to different trust domains.\n+In general, the participant nodes do not necessarily even need to know each other.\n+However, they have to be known to and accepted by the committer nodes.\n+The committer nodes are jointly trusted with ensuring the ledger's integrity.\n+To distribute the trust, the committers nodes must implement a Byzantine fault tolerant replication mechanism.\n+For example, the mechanism can ensure that the system preserves integrity even if up to a third of the committer nodes (e.g., 2 out of 7) misbehave in arbitrary ways.\n+The resulting topology is visualized below.\n+\n+.. _replicated-committer-topology:\n+\n+.. image:: ./images/ledger-topologies/replicated-committer-topology.svg\n+   :align: center\n+\n+DAML on `VMware Concord <https://blogs.vmware.com/blockchain>`__ and DAML on `Hyperledger Sawtooth <https://sawtooth.hyperledger.org/>`__ are examples of such a replicated setup.\n+\n+Trusted Execution Environments\n+==============================\n+\n+Integrity and privacy can also be protected using hardware Trusted Execution Environments (TEEs), such as Intel SGX.\n+The software implementing the ledger can then be deployed inside of TEE \"enclaves\", which are code blocks that the processor isolates and protects from the rest of the software stack (even the operating system).\n+The hardware ensures that the enclave data never leaves the processor unencrypted, offering privacy.\n+Furthermore, hardware-based attestation can guarantee that the operating entities process data using the prescribed code only, guaranteeing integrity.\n+The hardware is designed in such a way as to make any potential physical attacks by the operating entity extremely expensive.\n+This moves the trust necessary to achieve these properties from the operators of the trust domains that maintain the global state to the hardware manufacturer, who is anyway trusted with correctly producing the hardware.\n+Recent security research has, however, found scenarios where the TEE protection mechanisms can be compromised.\n+\n+.. _partitioned-topologies:\n+\n+Partitioned Ledger Topologies\n+*****************************\n+\n+In these topologies, the ledger is implemented as a distributed system.\n+Unlike the global state topologies, no single trust domain holds a physical copy of the entire shared ledger.\n+Instead, the participant nodes hold just the part of the ledger (i.e., the :ref:`ledger projection <da-model-projections>`) that is relevant to the parties to whom they serve the Ledger API.\n+The participants jointly extend the ledger by running a distributed commit protocol.\n+\n+.. image:: ./images/ledger-topologies/decentralized-ledger-topology.svg\n+   :align: center\n+\n+The implementations might still rely on trusted third parties to facilitate the commit protocol.\n+The required trust in terms of privacy and integrity, however, can generally be lower than in global state topologies.\n+Moreover, unlike the previous topologies, they support interoperability: even if two transactions are committed with the help of disjoint sets of trusted third parties, their :ref:`output contracts <def-output-contract>` can in general still be used within the same atomic transaction.\n+The exact trust assumptions and the degree of supported interoperability are implementation-dependent.\n+`Canton <http://canton.io>`__ and DAML on `R3 Corda <https://www.corda.net>`__ are two such implementations.\n+The main drawback of this topology is that availability can be influenced by the participant nodes.\n+In particular, transactions cannot be committed if they use data that is only stored on unresponsive nodes.\n+Spreading the data among additional trusted entities can mitigate the problem."
  },
  {
    "id" : "863874ec-f1bf-49ca-a28e-9b6f9b739dde",
    "prId" : 2476,
    "comments" : [
      {
        "id" : "f68fea95-dee4-4c54-b67c-2da822b40517",
        "parentId" : null,
        "author" : {
          "login" : "shaul-da",
          "name" : "Shaul Kfir",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/20247917?u=d893afa568378e73597e1aca451044bfa8cf721d&v=4"
        },
        "body" : "```suggestion\r\n- the real-world entity operating the physical shared ledger has full insight into the entire ledger, and is thus fully trusted with privacy (Note: some platforms with this topology use Trusted Execution Environments to ensure the operating entity does not have access to private data)\r\n```",
        "createdAt" : "2019-08-09T14:17:11Z",
        "updatedAt" : "2019-08-15T15:00:37Z",
        "lastEditedBy" : {
          "login" : "shaul-da",
          "name" : "Shaul Kfir",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/20247917?u=d893afa568378e73597e1aca451044bfa8cf721d&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "9b318db6-feef-4981-befb-fcdc3191e561",
        "parentId" : "f68fea95-dee4-4c54-b67c-2da822b40517",
        "author" : {
          "login" : "shaul-da",
          "name" : "Shaul Kfir",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/20247917?u=d893afa568378e73597e1aca451044bfa8cf721d&v=4"
        },
        "body" : "You may instead of this comment want to take it to the next section as a potential privacy solution",
        "createdAt" : "2019-08-09T14:22:49Z",
        "updatedAt" : "2019-08-15T15:00:37Z",
        "lastEditedBy" : {
          "login" : "shaul-da",
          "name" : "Shaul Kfir",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/20247917?u=d893afa568378e73597e1aca451044bfa8cf721d&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "cdaf0aee-9e21-4267-b05d-2b04f8f335ed",
        "parentId" : "f68fea95-dee4-4c54-b67c-2da822b40517",
        "author" : {
          "login" : "oggy-",
          "name" : "Ognjen Maric",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/325151?v=4"
        },
        "body" : "I put it in the solutions and added a section on TEEs - please check if OK with you.",
        "createdAt" : "2019-08-12T17:48:12Z",
        "updatedAt" : "2019-08-15T15:00:37Z",
        "lastEditedBy" : {
          "login" : "oggy-",
          "name" : "Ognjen Maric",
          "avatarUrl" : "https://avatars1.githubusercontent.com/u/325151?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "48cc2e9f641df38ef7544150cfcc21d049d97ced",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,163 @@\n+.. Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+.. SPDX-License-Identifier: Apache-2.0\n+\n+.. _daml-ledger-topologies:\n+\n+DAML Ledger Topologies\n+######################\n+\n+The Ledger API provides parties with an abstraction of a virtual shared ledger, visualized as follows.\n+\n+.. image:: ./ledger-model/images/da-ledger-model.svg\n+   :width: 80%\n+   :align: center\n+\n+The real-world topologies of actual ledger implementations differ significantly, however.\n+The topologies can impact both the functional and non-functional properties of the resulting ledger.\n+This document:\n+\n+1. Provides one useful categorization of the existing implementations' topologies.\n+   The categorization is not the only one possible, and it is not always clear-cut.\n+   Its main aim is to group the implementations according to their high-level properties.\n+\n+2. Describes the general ledger properties of each category.\n+\n+\n+.. _centralized-topologies:\n+\n+Centralized Topologies\n+**********************\n+\n+We call a system operated by a single real-world entity a **trust domain**.\n+In centralized topologies, there exists at least one trust domain (and possibly more) whose systems contain a physical copy of the entire virtual shared ledger that is accessible through the API.\n+\n+.. _fully-centralized-ledger:\n+\n+The Fully Centralized Ledger\n+============================\n+\n+The simplest topology is the one where the virtual shared ledger is implemented through a single machine containing a physical copy of the shared ledger.\n+\n+.. image:: ./images/ledger-topologies/physical-shared-ledger.svg\n+   :width: 80%\n+   :align: center\n+\n+The :ref:`DAML Sandbox <sandbox-manual>` uses this topology.\n+While simple, this topology has certain downsides:\n+\n+- it provides no scaling\n+\n+- it is not highly available\n+\n+- the real-world entity operating the physical shared ledger is fully trusted with preserving the ledger's integrity\n+\n+- the real-world entity operating the physical shared ledger has full insight into the entire ledger, and is thus fully trusted with privacy"
  },
  {
    "id" : "4cc7b5ec-6cc5-4c67-929f-6724f3639465",
    "prId" : 2476,
    "comments" : [
      {
        "id" : "9a1a7838-6c6b-4514-a3c2-8352be1dec53",
        "parentId" : null,
        "author" : {
          "login" : "shaul-da",
          "name" : "Shaul Kfir",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/20247917?u=d893afa568378e73597e1aca451044bfa8cf721d&v=4"
        },
        "body" : "```suggestion\r\n- trust for integrity by introducing multiple trust domains and distributing trust using Byzantine fault tolerant replication, or by maintaining one trust domain but using Trusted Execution Environments or other cryptographic means to enforce or audit ledger integrity without having to trust the operating entity.\r\n```",
        "createdAt" : "2019-08-09T14:21:43Z",
        "updatedAt" : "2019-08-15T15:00:37Z",
        "lastEditedBy" : {
          "login" : "shaul-da",
          "name" : "Shaul Kfir",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/20247917?u=d893afa568378e73597e1aca451044bfa8cf721d&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "48cc2e9f641df38ef7544150cfcc21d049d97ced",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,163 @@\n+.. Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+.. SPDX-License-Identifier: Apache-2.0\n+\n+.. _daml-ledger-topologies:\n+\n+DAML Ledger Topologies\n+######################\n+\n+The Ledger API provides parties with an abstraction of a virtual shared ledger, visualized as follows.\n+\n+.. image:: ./ledger-model/images/da-ledger-model.svg\n+   :width: 80%\n+   :align: center\n+\n+The real-world topologies of actual ledger implementations differ significantly, however.\n+The topologies can impact both the functional and non-functional properties of the resulting ledger.\n+This document:\n+\n+1. Provides one useful categorization of the existing implementations' topologies.\n+   The categorization is not the only one possible, and it is not always clear-cut.\n+   Its main aim is to group the implementations according to their high-level properties.\n+\n+2. Describes the general ledger properties of each category.\n+\n+\n+.. _centralized-topologies:\n+\n+Centralized Topologies\n+**********************\n+\n+We call a system operated by a single real-world entity a **trust domain**.\n+In centralized topologies, there exists at least one trust domain (and possibly more) whose systems contain a physical copy of the entire virtual shared ledger that is accessible through the API.\n+\n+.. _fully-centralized-ledger:\n+\n+The Fully Centralized Ledger\n+============================\n+\n+The simplest topology is the one where the virtual shared ledger is implemented through a single machine containing a physical copy of the shared ledger.\n+\n+.. image:: ./images/ledger-topologies/physical-shared-ledger.svg\n+   :width: 80%\n+   :align: center\n+\n+The :ref:`DAML Sandbox <sandbox-manual>` uses this topology.\n+While simple, this topology has certain downsides:\n+\n+- it provides no scaling\n+\n+- it is not highly available\n+\n+- the real-world entity operating the physical shared ledger is fully trusted with preserving the ledger's integrity\n+\n+- the real-world entity operating the physical shared ledger has full insight into the entire ledger, and is thus fully trusted with privacy\n+\n+- it provides no built-in way to interoperate (transactionally share data) across several deployed ledgers; each deployment defines its own segregated virtual shared ledger.\n+\n+The first three problems can be solved as follows:\n+\n+- scaling by splitting the system up into separate functional components and parallelizing execution\n+\n+- availability by replication\n+\n+- trust for integrity by introducing multiple trust domains and distributing trust using Byzantine fault tolerant replication."
  },
  {
    "id" : "f03f414c-7d1f-40a3-804c-8ca87e40d2d4",
    "prId" : 2476,
    "comments" : [
      {
        "id" : "6a312d65-3e4f-4c74-ba28-fb8e4debdb26",
        "parentId" : null,
        "author" : {
          "login" : "shaul-da",
          "name" : "Shaul Kfir",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/20247917?u=d893afa568378e73597e1aca451044bfa8cf721d&v=4"
        },
        "body" : "```suggestion\r\n2. **Participant nodes**, (also called Client nodes in some platforms) which serve the ledger API to a subset of the system parties, which we say are hosted by this participant.\r\n```",
        "createdAt" : "2019-08-09T14:25:18Z",
        "updatedAt" : "2019-08-15T15:00:37Z",
        "lastEditedBy" : {
          "login" : "shaul-da",
          "name" : "Shaul Kfir",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/20247917?u=d893afa568378e73597e1aca451044bfa8cf721d&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "48cc2e9f641df38ef7544150cfcc21d049d97ced",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,163 @@\n+.. Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+.. SPDX-License-Identifier: Apache-2.0\n+\n+.. _daml-ledger-topologies:\n+\n+DAML Ledger Topologies\n+######################\n+\n+The Ledger API provides parties with an abstraction of a virtual shared ledger, visualized as follows.\n+\n+.. image:: ./ledger-model/images/da-ledger-model.svg\n+   :width: 80%\n+   :align: center\n+\n+The real-world topologies of actual ledger implementations differ significantly, however.\n+The topologies can impact both the functional and non-functional properties of the resulting ledger.\n+This document:\n+\n+1. Provides one useful categorization of the existing implementations' topologies.\n+   The categorization is not the only one possible, and it is not always clear-cut.\n+   Its main aim is to group the implementations according to their high-level properties.\n+\n+2. Describes the general ledger properties of each category.\n+\n+\n+.. _centralized-topologies:\n+\n+Centralized Topologies\n+**********************\n+\n+We call a system operated by a single real-world entity a **trust domain**.\n+In centralized topologies, there exists at least one trust domain (and possibly more) whose systems contain a physical copy of the entire virtual shared ledger that is accessible through the API.\n+\n+.. _fully-centralized-ledger:\n+\n+The Fully Centralized Ledger\n+============================\n+\n+The simplest topology is the one where the virtual shared ledger is implemented through a single machine containing a physical copy of the shared ledger.\n+\n+.. image:: ./images/ledger-topologies/physical-shared-ledger.svg\n+   :width: 80%\n+   :align: center\n+\n+The :ref:`DAML Sandbox <sandbox-manual>` uses this topology.\n+While simple, this topology has certain downsides:\n+\n+- it provides no scaling\n+\n+- it is not highly available\n+\n+- the real-world entity operating the physical shared ledger is fully trusted with preserving the ledger's integrity\n+\n+- the real-world entity operating the physical shared ledger has full insight into the entire ledger, and is thus fully trusted with privacy\n+\n+- it provides no built-in way to interoperate (transactionally share data) across several deployed ledgers; each deployment defines its own segregated virtual shared ledger.\n+\n+The first three problems can be solved as follows:\n+\n+- scaling by splitting the system up into separate functional components and parallelizing execution\n+\n+- availability by replication\n+\n+- trust for integrity by introducing multiple trust domains and distributing trust using Byzantine fault tolerant replication.\n+\n+The remainder of the section discuses these solutions and their implementations in the different DAML Ledgers.\n+As for the remaining problems, the privacy problem is difficult to solve in a centralized topology.\n+The last problem, interoperability, is inherent when the two deployments are operated by different trust domains: by definition, a topology in which no single trust domain would hold the entire ledger is not centralized.\n+\n+.. _scaling-daml-ledgers:\n+\n+Scaling\n+=======\n+\n+The main functionalities of a system providing the Ledger API are:\n+\n+1. serving the API itself (handling the gRPC connections, authenticating users, etc),\n+\n+#. allowing the API users to access their :ref:`ledger projection <da-model-projections>` (reading the ledger), and\n+\n+#. allowing the API users to issue commands and thus attempt to append commits to the shared ledger (writing to the ledger).\n+\n+The implementation thus naturally splits up into components for serving the API, reading from the ledger, and writing to the ledger.\n+Serving the API and reading can be scaled out horizontally.\n+Reading can be scaled out by building caches of the ledger contents; as the projections are streams, no synchronization between the different caches is necessary.\n+\n+To ensure ledger integrity, the writing component must preserve the ledger's :ref:`validity conditions <da-model-validity>`.\n+Writing can thus be further split up into three sub-components, one for each of the three validity conditions:\n+\n+1. :ref:`model conformance <da-model-conformance>` checks (i.e., DAML intepretation),\n+#. :ref:`authorization <da-model-authorization>` checks, and\n+#. :ref:`consistency <da-model-consistency>` checks.\n+\n+Of these three, conformance and authorization checks can be checked in isolation for each commit.\n+Thus, such checks can be parallelized and scaled out.\n+The consistency check cannot be done in isolation and requires synchronization.\n+However, to improve scaling, it can internally still use some form of sharding, together with a commit protocol.\n+\n+For example, the next versions of DAML on `Amazon Aurora <https://aws.amazon.com/rds/aurora/>`__ and on `Hyperledger Fabric <https://www.hyperledger.org/projects/fabric>`__ will use such partitioned topologies.\n+The next image shows an extreme version of this partitioning, where each party is served by a separate system node running all the parallelizable functions.\n+The writing subsystem is split into two stages.\n+The first stage checks conformance and authorization, and can be arbitrarily replicated, while the second stage is centralized and checks consistency.\n+\n+.. image:: ./images/ledger-topologies/full-partitioning.svg\n+   :align: center\n+\n+.. _daml-ledger-replication:\n+\n+Replication: Availability and Distributing Trust\n+================================================\n+\n+Availability is improved by replication.\n+The scaling methodology described in the previous section already improves the ledger's availability properties, as it introduces replication for most functions.\n+For example, if a node serving a client with the API fails, clients can fail over to other such nodes.\n+Replicating the writer's consistency-checking subsystem must use a consensus algorithm to ensure consistency of the replicated system (in particular, the `linearizability <https://aphyr.com/posts/333-serializability-linearizability-and-locality>`__ of the virtual shared ledger).\n+\n+Replication can also help to lower, or more precisely distribute the trust required to ensure the system's integrity.\n+Trust can be distributed by introducing multiple organizations, i.e., multiple trust domains into the system.\n+In these situations, the system typically consists of two types of nodes:\n+\n+1. Writer nodes, which replicate the physical shared ledger and can extend it with new commits.\n+   Writer nodes are thus also referred to as **committer nodes**.\n+\n+.. _participant-node-def:\n+\n+2. **Participant nodes**, which serve the ledger API to a subset of the system parties, which we say are hosted by this participant."
  },
  {
    "id" : "e3cf5adc-2a28-4c2f-a6d3-e39613e2fe3c",
    "prId" : 2476,
    "comments" : [
      {
        "id" : "33d8d455-5aeb-45c4-a280-c4cbd5749a45",
        "parentId" : null,
        "author" : {
          "login" : "shaul-da",
          "name" : "Shaul Kfir",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/20247917?u=d893afa568378e73597e1aca451044bfa8cf721d&v=4"
        },
        "body" : "```suggestion\r\nThe participant nodes need not be trusted by the other nodes, or by the committer(s); the participants can be operated by mutually distrusting entities, i.e., belong to different trust domains.\r\n```",
        "createdAt" : "2019-08-09T14:26:05Z",
        "updatedAt" : "2019-08-15T15:00:37Z",
        "lastEditedBy" : {
          "login" : "shaul-da",
          "name" : "Shaul Kfir",
          "avatarUrl" : "https://avatars3.githubusercontent.com/u/20247917?u=d893afa568378e73597e1aca451044bfa8cf721d&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "48cc2e9f641df38ef7544150cfcc21d049d97ced",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,163 @@\n+.. Copyright (c) 2019 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n+.. SPDX-License-Identifier: Apache-2.0\n+\n+.. _daml-ledger-topologies:\n+\n+DAML Ledger Topologies\n+######################\n+\n+The Ledger API provides parties with an abstraction of a virtual shared ledger, visualized as follows.\n+\n+.. image:: ./ledger-model/images/da-ledger-model.svg\n+   :width: 80%\n+   :align: center\n+\n+The real-world topologies of actual ledger implementations differ significantly, however.\n+The topologies can impact both the functional and non-functional properties of the resulting ledger.\n+This document:\n+\n+1. Provides one useful categorization of the existing implementations' topologies.\n+   The categorization is not the only one possible, and it is not always clear-cut.\n+   Its main aim is to group the implementations according to their high-level properties.\n+\n+2. Describes the general ledger properties of each category.\n+\n+\n+.. _centralized-topologies:\n+\n+Centralized Topologies\n+**********************\n+\n+We call a system operated by a single real-world entity a **trust domain**.\n+In centralized topologies, there exists at least one trust domain (and possibly more) whose systems contain a physical copy of the entire virtual shared ledger that is accessible through the API.\n+\n+.. _fully-centralized-ledger:\n+\n+The Fully Centralized Ledger\n+============================\n+\n+The simplest topology is the one where the virtual shared ledger is implemented through a single machine containing a physical copy of the shared ledger.\n+\n+.. image:: ./images/ledger-topologies/physical-shared-ledger.svg\n+   :width: 80%\n+   :align: center\n+\n+The :ref:`DAML Sandbox <sandbox-manual>` uses this topology.\n+While simple, this topology has certain downsides:\n+\n+- it provides no scaling\n+\n+- it is not highly available\n+\n+- the real-world entity operating the physical shared ledger is fully trusted with preserving the ledger's integrity\n+\n+- the real-world entity operating the physical shared ledger has full insight into the entire ledger, and is thus fully trusted with privacy\n+\n+- it provides no built-in way to interoperate (transactionally share data) across several deployed ledgers; each deployment defines its own segregated virtual shared ledger.\n+\n+The first three problems can be solved as follows:\n+\n+- scaling by splitting the system up into separate functional components and parallelizing execution\n+\n+- availability by replication\n+\n+- trust for integrity by introducing multiple trust domains and distributing trust using Byzantine fault tolerant replication.\n+\n+The remainder of the section discuses these solutions and their implementations in the different DAML Ledgers.\n+As for the remaining problems, the privacy problem is difficult to solve in a centralized topology.\n+The last problem, interoperability, is inherent when the two deployments are operated by different trust domains: by definition, a topology in which no single trust domain would hold the entire ledger is not centralized.\n+\n+.. _scaling-daml-ledgers:\n+\n+Scaling\n+=======\n+\n+The main functionalities of a system providing the Ledger API are:\n+\n+1. serving the API itself (handling the gRPC connections, authenticating users, etc),\n+\n+#. allowing the API users to access their :ref:`ledger projection <da-model-projections>` (reading the ledger), and\n+\n+#. allowing the API users to issue commands and thus attempt to append commits to the shared ledger (writing to the ledger).\n+\n+The implementation thus naturally splits up into components for serving the API, reading from the ledger, and writing to the ledger.\n+Serving the API and reading can be scaled out horizontally.\n+Reading can be scaled out by building caches of the ledger contents; as the projections are streams, no synchronization between the different caches is necessary.\n+\n+To ensure ledger integrity, the writing component must preserve the ledger's :ref:`validity conditions <da-model-validity>`.\n+Writing can thus be further split up into three sub-components, one for each of the three validity conditions:\n+\n+1. :ref:`model conformance <da-model-conformance>` checks (i.e., DAML intepretation),\n+#. :ref:`authorization <da-model-authorization>` checks, and\n+#. :ref:`consistency <da-model-consistency>` checks.\n+\n+Of these three, conformance and authorization checks can be checked in isolation for each commit.\n+Thus, such checks can be parallelized and scaled out.\n+The consistency check cannot be done in isolation and requires synchronization.\n+However, to improve scaling, it can internally still use some form of sharding, together with a commit protocol.\n+\n+For example, the next versions of DAML on `Amazon Aurora <https://aws.amazon.com/rds/aurora/>`__ and on `Hyperledger Fabric <https://www.hyperledger.org/projects/fabric>`__ will use such partitioned topologies.\n+The next image shows an extreme version of this partitioning, where each party is served by a separate system node running all the parallelizable functions.\n+The writing subsystem is split into two stages.\n+The first stage checks conformance and authorization, and can be arbitrarily replicated, while the second stage is centralized and checks consistency.\n+\n+.. image:: ./images/ledger-topologies/full-partitioning.svg\n+   :align: center\n+\n+.. _daml-ledger-replication:\n+\n+Replication: Availability and Distributing Trust\n+================================================\n+\n+Availability is improved by replication.\n+The scaling methodology described in the previous section already improves the ledger's availability properties, as it introduces replication for most functions.\n+For example, if a node serving a client with the API fails, clients can fail over to other such nodes.\n+Replicating the writer's consistency-checking subsystem must use a consensus algorithm to ensure consistency of the replicated system (in particular, the `linearizability <https://aphyr.com/posts/333-serializability-linearizability-and-locality>`__ of the virtual shared ledger).\n+\n+Replication can also help to lower, or more precisely distribute the trust required to ensure the system's integrity.\n+Trust can be distributed by introducing multiple organizations, i.e., multiple trust domains into the system.\n+In these situations, the system typically consists of two types of nodes:\n+\n+1. Writer nodes, which replicate the physical shared ledger and can extend it with new commits.\n+   Writer nodes are thus also referred to as **committer nodes**.\n+\n+.. _participant-node-def:\n+\n+2. **Participant nodes**, which serve the ledger API to a subset of the system parties, which we say are hosted by this participant.\n+   A participant node proposes new commits on behalf of the parties it hosts, and holds a portion of the ledger that is relevant for those parties (i.e., the parties' :ref:`ledger projection <da-model-projections>`).\n+   The term \"participant node\" is sometimes also used more generally, for any physical node serving the Ledger API to a party.\n+\n+The participant nodes need not be trusted by the other nodes, or by the committer; the participants can be operated by mutually distrusting entities, i.e., belong to different trust domains."
  }
]